
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Object &#8212; Swift 0.1.0.dev10161 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/basic.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="canonical" href="/openstack-swift/object.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Misc" href="misc.html" />
    <link rel="prev" title="Account DB and Container DB" href="db.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.min.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">

<!-- Search CSS -->
<link href="_static/css/search.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/pygments.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


  </head><body>

<!-- SOURCE_FILE: https://opendev.org/openstack/swift/src/doc/source/object.rst -->

<script>
    (function (window, document) {
        var loader = function () {
            var script = document.createElement("script"), tag = document.getElementsByTagName("script")[0];
            script.src = "https://search.openstack.org/widget/embed.min.js?t="+Date.now();
            tag.parentNode.insertBefore(script, tag);
        };
        window.addEventListener ? window.addEventListener("load", loader, false) : window.attachEvent("onload", loader);
    })(window, document);
</script>

<nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="https://www.openstack.org/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
    <div class="openstack-search-bar" data-baseUrl="search.openstack.org" data-context="docs-openstack"></div>
</div>
      <ul class="nav navbar-nav navbar-main show">
        <li class="search-container-mobile">
    <div class="openstack-search-bar" data-baseUrl="search.openstack.org" data-context="docs-openstack"></div>
</li>
        <li> <!--Software -->
          <a href="https://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/openstack-components">OpenStack Components</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/sdks">SDKs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/deployment-tools">Deployment Tools</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/assets/software/projectmap/openstack-map.pdf" target="_blank">OpenStack Map</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
          </ul>
        </li>
        <li> <!-- Use Cases -->
          <a href="https://www.openstack.org/use-cases/" class="drop" id="dropdownMenuUsers">Use Cases <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/">Users in Production</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/bare-metal/">Ironic Bare Metal</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/edge-computing/">Edge Computing</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/telecoms-and-nfv/">Telecom & NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/science/">Science and HPC</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/containers/">Containers</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/enterprise/">Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li> <!-- Events -->
          <a href="https://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">Open Infrastructure Summits</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/ptg/">Project Teams Gathering</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/opendev-2020/">OpenDev</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/community-events/">Community Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/openstackdays">OpenStack & OpenInfra Days</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
          </ul>
        </li>
        <li><!-- Community -->
          <a href="https://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/tech-committee">OpenStack Technical Committee</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/coa/">Get Certified (COA)</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketing/">Marketing Resources</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/news/">Community News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/supporting-organizations/">OpenInfra Foundation Supporting Organizations</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev">Open Infrastructure Foundation (OpenInfra Foundation)</a></li>
          </ul>
        </li>
        <li><!-- Marketplace -->
          <a href="https://www.openstack.orgmarketplace/" class="drop" id="dropdownMenuLearn">Marketplace <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/distros/">Distros & Appliances</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/public-clouds/">Public Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/hosted-private-clouds/">Hosted Private Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/remotely-managed-private-clouds/">Remotely Managed Private Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/consulting/">Consulting & Integrators</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/drivers/">Drivers</a></li>
          </ul>
        </li>
        <li><!-- Blog -->
          <a href="https://www.openstack.org/blog/">Blog</a>
        </li>
        <li><!-- Docs -->
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
        <li> <!-- Join -->
            <li class="join-nav-section">
              <a href="https://openinfra.dev/join/" id="dropdownMenuJoin">Join <i class="fa fa-caret-down"></i></a>
              <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuJoin" style="display: none;">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev/join/">Sign up for Foundation Membership</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev/join/">Sponsor the Foundation</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev">More about the Foundation</a></li>
              </ul>
            </li>
            <li>
              <a href="https://www.openstack.org/Security/login/?BackURL=/home/" class="sign-in-btn">Log In</a>
            </li>
        </li>
      </ul>
    </div>
  </div>
  <!-- /.container -->
</nav>

    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row docs-title">
  <div class="col-lg-8">
      <h1>Object</h1>
    
  </div>
  <div class="docs-actions">
    
    <a href="db.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Account DB and Container DB"></i></a>
    
    
    <a href="misc.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Misc"></i></a>
    
    <a id="pdfLink1" href="" target="_blank" title="Download the manuals as PDF"><i class="fa fa-file-pdf-o" data-toggle="tooltip" data-placement="top" title="Download PDF"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
    
  </div>
</div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-body" role="main">

  <section id="object">
<span id="id1"></span><h1>Object<a class="headerlink" href="#object" title="Permalink to this heading">¶</a></h1>
<section id="module-swift.obj.auditor">
<span id="id2"></span><span id="object-auditor"></span><h2>Object Auditor<a class="headerlink" href="#module-swift.obj.auditor" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.auditor.AuditorWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.auditor.</span></span><span class="sig-name descname"><span class="pre">AuditorWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rcache</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">devices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zero_byte_only_at_fps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watcher_defs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.AuditorWorker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Walk through file system to audit objects</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.AuditorWorker.audit_all_objects">
<span class="sig-name descname"><span class="pre">audit_all_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'once'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_dirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.AuditorWorker.audit_all_objects" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.AuditorWorker.create_recon_nested_dict">
<span class="sig-name descname"><span class="pre">create_recon_nested_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_level_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.AuditorWorker.create_recon_nested_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.AuditorWorker.failsafe_object_audit">
<span class="sig-name descname"><span class="pre">failsafe_object_audit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.AuditorWorker.failsafe_object_audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Entrypoint to object_audit, with a failsafe generic exception handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.AuditorWorker.object_audit">
<span class="sig-name descname"><span class="pre">object_audit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">location</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.AuditorWorker.object_audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Audits the given object location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>location</strong> – an audit location
(from diskfile.object_audit_location_generator)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.AuditorWorker.record_stats">
<span class="sig-name descname"><span class="pre">record_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.AuditorWorker.record_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Based on config’s object_size_stats will keep track of how many objects
fall into the specified ranges. For example with the following:</p>
<p>object_size_stats = 10, 100, 1024</p>
<p>and your system has 3 objects of sizes: 5, 20, and 10000 bytes the log
will look like: {“10”: 1, “100”: 1, “1024”: 0, “OVER”: 1}</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.auditor.ObjectAuditor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.auditor.</span></span><span class="sig-name descname"><span class="pre">ObjectAuditor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.ObjectAuditor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Daemon</span></code></p>
<p>Audit objects.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.ObjectAuditor.audit_loop">
<span class="sig-name descname"><span class="pre">audit_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zbo_fps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_devices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.ObjectAuditor.audit_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Parallel audit loop</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.ObjectAuditor.clear_recon_cache">
<span class="sig-name descname"><span class="pre">clear_recon_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">auditor_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.ObjectAuditor.clear_recon_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear recon cache entries</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.ObjectAuditor.fork_child">
<span class="sig-name descname"><span class="pre">fork_child</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">zero_byte_fps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sleep_between_zbf_scanner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.ObjectAuditor.fork_child" title="Permalink to this definition">¶</a></dt>
<dd><p>Child execution</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.ObjectAuditor.run_audit">
<span class="sig-name descname"><span class="pre">run_audit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.ObjectAuditor.run_audit" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the object audit</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.ObjectAuditor.run_forever">
<span class="sig-name descname"><span class="pre">run_forever</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.ObjectAuditor.run_forever" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the object audit until stopped.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.ObjectAuditor.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.ObjectAuditor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the object audit once</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.auditor.WatcherWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.auditor.</span></span><span class="sig-name descname"><span class="pre">WatcherWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">watcher_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watcher_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.WatcherWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Run the user-supplied watcher.</p>
<p>Simple and gets the job done. Note that we aren’t doing anything
to isolate ourselves from hangs or file descriptor leaks
in the plugins.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.WatcherWrapper.end">
<span class="sig-name descname"><span class="pre">end</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.WatcherWrapper.end" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.WatcherWrapper.see_object">
<span class="sig-name descname"><span class="pre">see_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.WatcherWrapper.see_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.auditor.WatcherWrapper.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audit_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.auditor.WatcherWrapper.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-swift.obj.diskfile">
<span id="object-backend"></span><span id="object-diskfile"></span><h2>Object Backend<a class="headerlink" href="#module-swift.obj.diskfile" title="Permalink to this heading">¶</a></h2>
<p>Disk File Interface for the Swift Object Server</p>
<p>The <cite>DiskFile</cite>, <cite>DiskFileWriter</cite> and <cite>DiskFileReader</cite> classes combined define
the on-disk abstraction layer for supporting the object server REST API
interfaces (excluding <cite>REPLICATE</cite>). Other implementations wishing to provide
an alternative backend for the object server must implement the three
classes. An example alternative implementation can be found in the
<cite>mem_server.py</cite> and <cite>mem_diskfile.py</cite> modules along size this one.</p>
<p>The <cite>DiskFileManager</cite> is a reference implemenation specific class and is not
part of the backend API.</p>
<p>The remaining methods in this module are considered implementation specific and
are also not considered part of the backend API.</p>
<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.AuditLocation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">AuditLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.AuditLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents an object location to be audited.</p>
<p>Other than being a bucket of data, the only useful thing this does is
stringify to a filesystem path so the auditor’s logs look okay.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">BaseDiskFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mgr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_datadir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_splice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pipe_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_expired</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next_part_power</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manage object files.</p>
<p>This specific implementation manages object files on a disk formatted with
a POSIX-compliant file system that supports extended attributes as
metadata on a file or directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The arguments to the constructor are considered implementation
specific. The API does not define the constructor arguments.</p>
<p>The following path format is used for data file locations:
&lt;devices_path/&lt;device_dir&gt;/&lt;datadir&gt;/&lt;partdir&gt;/&lt;suffixdir&gt;/&lt;hashdir&gt;/
&lt;datafile&gt;.&lt;ext&gt;</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mgr</strong> – associated DiskFileManager instance</p></li>
<li><p><strong>device_path</strong> – path to the target device or drive</p></li>
<li><p><strong>partition</strong> – partition on the device in which the object lives</p></li>
<li><p><strong>account</strong> – account name for the object</p></li>
<li><p><strong>container</strong> – container name for the object</p></li>
<li><p><strong>obj</strong> – object name for the object</p></li>
<li><p><strong>_datadir</strong> – override the full datadir otherwise constructed here</p></li>
<li><p><strong>policy</strong> – the StoragePolicy instance</p></li>
<li><p><strong>use_splice</strong> – if true, use zero-copy splice() to send data</p></li>
<li><p><strong>pipe_size</strong> – size of pipe buffer used in zero-copy operations</p></li>
<li><p><strong>open_expired</strong> – if True, open() will not raise a DiskFileExpired if
object is expired</p></li>
<li><p><strong>next_part_power</strong> – the next partition power to be used</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.account">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">account</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.account" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.container">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">container</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.container" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.content_length">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content_length</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.content_length" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.content_type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content_type</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.content_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.content_type_timestamp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content_type_timestamp</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.content_type_timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager to create a file. We create a temporary file first, and
then return a DiskFileWriter object to encapsulate the state.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An implementation is not required to perform on-disk
preallocations even if the parameter is specified. But if it does
and it fails, it must raise a <cite>DiskFileNoSpace</cite> exception.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>size</strong> – optional initial size of file to explicitly allocate on
disk</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileNoSpace" title="swift.common.exceptions.DiskFileNoSpace"><strong>DiskFileNoSpace</strong></a> – if a size is specified and allocation fails</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.data_timestamp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data_timestamp</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.data_timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete the object.</p>
<p>This implementation creates a tombstone file using the given
timestamp, and removes any older versions of the object file. Any
file that has an older timestamp than timestamp will be deleted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An implementation is free to use or ignore the timestamp
parameter.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> – timestamp to compare with each file</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><strong>DiskFileError</strong></a> – this implementation will raise the same
errors as the <cite>create()</cite> method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.durable_timestamp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">durable_timestamp</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.durable_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the timestamp of the newest data file found in the object
directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A Timestamp instance, or None if no data file was found.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileNotOpen" title="swift.common.exceptions.DiskFileNotOpen"><strong>DiskFileNotOpen</strong></a> – if the open() method has not been previously
called on this instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.fragments">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fragments</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.fragments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.from_hash_dir">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_hash_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mgr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash_dir_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.from_hash_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.get_datafile_metadata">
<span class="sig-name descname"><span class="pre">get_datafile_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.get_datafile_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the datafile metadata for a previously opened object as a
dictionary. This is metadata that was included when the object was
first PUT, and does not include metadata set by any subsequent POST.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>object’s datafile metadata dictionary</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileNotOpen" title="swift.common.exceptions.DiskFileNotOpen"><strong>DiskFileNotOpen</strong></a> – if the
<code class="xref py py-func docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFile.open()</span></code> method was not previously
invoked</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.get_metadata">
<span class="sig-name descname"><span class="pre">get_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.get_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the metadata for a previously opened object as a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>object’s metadata dictionary</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileNotOpen" title="swift.common.exceptions.DiskFileNotOpen"><strong>DiskFileNotOpen</strong></a> – if the
<code class="xref py py-func docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFile.open()</span></code> method was not previously
invoked</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.get_metafile_metadata">
<span class="sig-name descname"><span class="pre">get_metafile_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.get_metafile_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the metafile metadata for a previously opened object as a
dictionary. This is metadata that was written by a POST and does not
include any persistent metadata that was set by the original PUT.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>object’s .meta file metadata dictionary, or None if there is
no .meta file</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileNotOpen" title="swift.common.exceptions.DiskFileNotOpen"><strong>DiskFileNotOpen</strong></a> – if the
<code class="xref py py-func docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFile.open()</span></code> method was not previously
invoked</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.manager">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">manager</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.manager" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.obj">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">obj</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.obj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modernize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Open the object.</p>
<p>This implementation opens the data file representing the object, reads
the associated metadata in the extended attributes, additionally
combining metadata from fast-POST <cite>.meta</cite> files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modernize</strong> – if set, update this diskfile to the latest format.
Currently, this means adding metadata checksums if none are
present.</p></li>
<li><p><strong>current_time</strong> – Unix time used in checking expiration. If not
present, the current time will be used.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An implementation is allowed to raise any of the following
exceptions, but is only required to raise <cite>DiskFileNotExist</cite> when
the object representation does not exist.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileCollision" title="swift.common.exceptions.DiskFileCollision"><strong>DiskFileCollision</strong></a> – on name mis-match with metadata</p></li>
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileNotExist" title="swift.common.exceptions.DiskFileNotExist"><strong>DiskFileNotExist</strong></a> – if the object does not exist</p></li>
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileDeleted" title="swift.common.exceptions.DiskFileDeleted"><strong>DiskFileDeleted</strong></a> – if the object was previously deleted</p></li>
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileQuarantined" title="swift.common.exceptions.DiskFileQuarantined"><strong>DiskFileQuarantined</strong></a> – if while reading metadata of the file
some data did pass cross checks</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>itself for use as a context manager</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.read_metadata">
<span class="sig-name descname"><span class="pre">read_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.read_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the metadata for an object without requiring the caller to open
the object first.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>current_time</strong> – Unix time used in checking expiration. If not
present, the current time will be used.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>metadata dictionary for an object</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><strong>DiskFileError</strong></a> – this implementation will raise the same
errors as the <cite>open()</cite> method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.reader">
<span class="sig-name descname"><span class="pre">reader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keep_cache=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_quarantine_hook=&lt;function</span> <span class="pre">BaseDiskFile.&lt;lambda&gt;&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="misc.html#swift.common.swob.Response" title="swift.common.swob.Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">swift.common.swob.Response</span></code></a> class compatible
“<cite>app_iter</cite>” object as defined by
<a class="reference internal" href="#swift.obj.diskfile.DiskFileReader" title="swift.obj.diskfile.DiskFileReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFileReader</span></code></a>.</p>
<p>For this implementation, the responsibility of closing the open file
is passed to the <a class="reference internal" href="#swift.obj.diskfile.DiskFileReader" title="swift.obj.diskfile.DiskFileReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFileReader</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keep_cache</strong> – caller’s preference for keeping data read in the
OS buffer cache</p></li>
<li><p><strong>_quarantine_hook</strong> – 1-arg callable called when obj quarantined;
the arg is the reason for quarantine.
Default is to ignore it.
Not needed by the REST layer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a <a class="reference internal" href="#swift.obj.diskfile.DiskFileReader" title="swift.obj.diskfile.DiskFileReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFileReader</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.reader_cls">
<span class="sig-name descname"><span class="pre">reader_cls</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.reader_cls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.timestamp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.timestamp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.validate_metadata">
<span class="sig-name descname"><span class="pre">validate_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.validate_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.write_metadata">
<span class="sig-name descname"><span class="pre">write_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.write_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a block of metadata to an object without requiring the caller to
create the object first. Supports fast-POST behavior semantics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metadata</strong> – dictionary of metadata to be associated with the
object</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><strong>DiskFileError</strong></a> – this implementation will raise the same
errors as the <cite>create()</cite> method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.writer">
<span class="sig-name descname"><span class="pre">writer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.writer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFile.writer_cls">
<span class="sig-name descname"><span class="pre">writer_cls</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFile.writer_cls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">BaseDiskFileManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Management class for devices, providing common place for shared parameters
and methods not provided by the DiskFile class (which primarily services
the object server REST API layer).</p>
<p>The <cite>get_diskfile()</cite> method is how this implementation creates a <cite>DiskFile</cite>
object.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This class is reference implementation specific and not part of the
pluggable on-disk backend API.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>TODO(portante): Not sure what the right name to recommend here, as
“manager” seemed generic enough, though suggestions are welcome.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf</strong> – caller provided configuration object</p></li>
<li><p><strong>logger</strong> – caller provided logger</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.check_policy">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">check_policy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.check_policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.cleanup_ondisk_files">
<span class="sig-name descname"><span class="pre">cleanup_ondisk_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hsh_path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.cleanup_ondisk_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean up on-disk files that are obsolete and gather the set of valid
on-disk files for an object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hsh_path</strong> – object hash path</p></li>
<li><p><strong>frag_index</strong> – if set, search for a specific fragment index .data
file, otherwise accept the first valid .data file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict that may contain: valid on disk files keyed by their
filename extension; a list of obsolete files stored under the
key ‘obsolete’; a list of files remaining in the directory,
reverse sorted, stored under the key ‘files’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.clear_auditor_status">
<span class="sig-name descname"><span class="pre">clear_auditor_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auditor_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ALL'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.clear_auditor_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.consolidate_hashes">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">consolidate_hashes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partition_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.consolidate_hashes" title="Permalink to this definition">¶</a></dt>
<dd><p>Take what’s in hashes.pkl and hashes.invalid, combine them, write the
result back to hashes.pkl, and clear out hashes.invalid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>partition_dir</strong> – absolute path to partition dir containing hashes.pkl
and hashes.invalid</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict, the suffix hashes (if any), the key ‘valid’ will be False
if hashes.pkl is corrupt, cannot be read or does not exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.construct_dev_path">
<span class="sig-name descname"><span class="pre">construct_dev_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.construct_dev_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct the path to a device without checking if it is mounted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>device</strong> – name of target device</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>full path to the device</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.diskfile_cls">
<span class="sig-name descname"><span class="pre">diskfile_cls</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.diskfile_cls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.get_dev_path">
<span class="sig-name descname"><span class="pre">get_dev_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mount_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.get_dev_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the path to a device, first checking to see if either it
is a proper mount point, or at least a directory depending on
the mount_check configuration option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – name of target device</p></li>
<li><p><strong>mount_check</strong> – whether or not to check mountedness of device.
Defaults to bool(self.mount_check).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>full path to the device, None if the path to the device is
not a proper mount point or directory.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.get_diskfile">
<span class="sig-name descname"><span class="pre">get_diskfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.get_diskfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a BaseDiskFile instance for an object based on the object’s
partition, path parts and policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – name of target device</p></li>
<li><p><strong>partition</strong> – partition on device in which the object lives</p></li>
<li><p><strong>account</strong> – account name for the object</p></li>
<li><p><strong>container</strong> – container name for the object</p></li>
<li><p><strong>obj</strong> – object name for the object</p></li>
<li><p><strong>policy</strong> – the StoragePolicy instance</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.get_diskfile_and_filenames_from_hash">
<span class="sig-name descname"><span class="pre">get_diskfile_and_filenames_from_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_hash</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.get_diskfile_and_filenames_from_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of (a DiskFile instance for an object at the given
object_hash, the basenames of the files in the object’s hash dir).
Just in case someone thinks of refactoring, be sure DiskFileDeleted is
<em>not</em> raised, but the DiskFile instance representing the tombstoned
object is returned instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – name of target device</p></li>
<li><p><strong>partition</strong> – partition on the device in which the object lives</p></li>
<li><p><strong>object_hash</strong> – the hash of an object path</p></li>
<li><p><strong>policy</strong> – the StoragePolicy instance</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileNotExist" title="swift.common.exceptions.DiskFileNotExist"><strong>DiskFileNotExist</strong></a> – if the object does not exist</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a tuple comprising (an instance of BaseDiskFile, a list of
file basenames)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.get_diskfile_from_audit_location">
<span class="sig-name descname"><span class="pre">get_diskfile_from_audit_location</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audit_location</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.get_diskfile_from_audit_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a BaseDiskFile instance for an object at the given
AuditLocation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>audit_location</strong> – object location to be audited</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.get_diskfile_from_hash">
<span class="sig-name descname"><span class="pre">get_diskfile_from_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_hash</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.get_diskfile_from_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a DiskFile instance for an object at the given object_hash.
Just in case someone thinks of refactoring, be sure DiskFileDeleted is
<em>not</em> raised, but the DiskFile instance representing the tombstoned
object is returned instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – name of target device</p></li>
<li><p><strong>partition</strong> – partition on the device in which the object lives</p></li>
<li><p><strong>object_hash</strong> – the hash of an object path</p></li>
<li><p><strong>policy</strong> – the StoragePolicy instance</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileNotExist" title="swift.common.exceptions.DiskFileNotExist"><strong>DiskFileNotExist</strong></a> – if the object does not exist</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an instance of BaseDiskFile</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.get_hashes">
<span class="sig-name descname"><span class="pre">get_hashes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffixes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_rehash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.get_hashes" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – name of target device</p></li>
<li><p><strong>partition</strong> – partition name</p></li>
<li><p><strong>suffixes</strong> – a list of suffix directories to be recalculated</p></li>
<li><p><strong>policy</strong> – the StoragePolicy instance</p></li>
<li><p><strong>skip_rehash</strong> – just mark the suffixes dirty; return None</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dictionary that maps suffix directories</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.get_ondisk_files">
<span class="sig-name descname"><span class="pre">get_ondisk_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datadir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.get_ondisk_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a simple list of files names, determine the files that constitute
a valid fileset i.e. a set of files that defines the state of an
object, and determine the files that are obsolete and could be deleted.
Note that some files may fall into neither category.</p>
<p>If a file is considered part of a valid fileset then its info dict will
be added to the results dict, keyed by &lt;extension&gt;_info. Any files that
are no longer required will have their info dicts added to a list
stored under the key ‘obsolete’.</p>
<p>The results dict will always contain entries with keys ‘ts_file’,
‘data_file’ and ‘meta_file’. Their values will be the fully qualified
path to a file of the corresponding type if there is such a file in the
valid fileset, or None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>files</strong> – a list of file names.</p></li>
<li><p><strong>datadir</strong> – directory name files are from; this is used to
construct file paths in the results, but the datadir is
not modified by this method.</p></li>
<li><p><strong>verify</strong> – if True verify that the ondisk file contract has not
been violated, otherwise do not verify.</p></li>
<li><p><strong>policy</strong> – storage policy used to store the files. Used to
validate fragment indexes for EC policies.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>a dict that will contain keys:</dt><dd><p>ts_file   -&gt; path to a .ts file or None
data_file -&gt; path to a .data file or None
meta_file -&gt; path to a .meta file or None
ctype_file -&gt; path to a .meta file or None</p>
</dd>
<dt>and may contain keys:</dt><dd><p>ts_info   -&gt; a file info dict for a .ts file
data_info -&gt; a file info dict for a .data file
meta_info -&gt; a file info dict for a .meta file
ctype_info -&gt; a file info dict for a .meta file which
contains the content-type value
unexpected -&gt; a list of file paths for unexpected
files
possible_reclaim -&gt; a list of file info dicts for possible
reclaimable files
obsolete  -&gt; a list of file info dicts for obsolete files</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.invalidate_hash">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">invalidate_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suffix_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.invalidate_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidates the hash for a suffix_dir in the partition’s hashes file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>suffix_dir</strong> – absolute path to suffix dir whose hash needs
invalidating</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.make_on_disk_filename">
<span class="sig-name descname"><span class="pre">make_on_disk_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctype_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.make_on_disk_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns filename for given timestamp.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> – the object timestamp, an instance of
<a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p></li>
<li><p><strong>ext</strong> – an optional string representing a file extension to be
appended to the returned file name</p></li>
<li><p><strong>ctype_timestamp</strong> – an optional content-type timestamp, an instance
of <a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a file name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.object_audit_location_generator">
<span class="sig-name descname"><span class="pre">object_audit_location_generator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_dirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auditor_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ALL'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.object_audit_location_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield an AuditLocation for all objects stored under device_dirs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>policy</strong> – the StoragePolicy instance</p></li>
<li><p><strong>device_dirs</strong> – directory of target device</p></li>
<li><p><strong>auditor_type</strong> – either ALL or ZBF</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.parse_on_disk_filename">
<span class="sig-name descname"><span class="pre">parse_on_disk_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.parse_on_disk_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse an on disk file name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the file name including extension</p></li>
<li><p><strong>policy</strong> – storage policy used to store the file</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>a dict, with keys for timestamp, ext and ctype_timestamp:</p>
<ul class="simple">
<li><p>timestamp is a <a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p></li>
<li><p>ctype_timestamp is a <a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> or
None for .meta files, otherwise None</p></li>
<li><p>ext is a string, the file extension including the leading dot or
the empty string if the filename has no extension.</p></li>
</ul>
<p>Subclasses may override this method to add further keys to the
returned dict.</p>
</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><strong>DiskFileError</strong></a> – if any part of the filename is not able to be
validated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.partition_lock">
<span class="sig-name descname"><span class="pre">partition_lock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.partition_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager that will lock on the partition given.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – device targeted by the lock request</p></li>
<li><p><strong>policy</strong> – policy targeted by the lock request</p></li>
<li><p><strong>partition</strong> – partition targeted by the lock request</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.PartitionLockTimeout" title="swift.common.exceptions.PartitionLockTimeout"><strong>PartitionLockTimeout</strong></a> – If the lock on the partition
cannot be granted within the configured timeout.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.pickle_async_update">
<span class="sig-name descname"><span class="pre">pickle_async_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.pickle_async_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data describing a container update notification to a pickle file
in the async_pending directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – name of target device</p></li>
<li><p><strong>account</strong> – account name for the object</p></li>
<li><p><strong>container</strong> – container name for the object</p></li>
<li><p><strong>obj</strong> – object name for the object</p></li>
<li><p><strong>data</strong> – update data to be written to pickle file</p></li>
<li><p><strong>timestamp</strong> – a Timestamp</p></li>
<li><p><strong>policy</strong> – the StoragePolicy instance</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.policy">
<span class="sig-name descname"><span class="pre">policy</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.quarantine_renamer">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">quarantine_renamer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corrupted_file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.quarantine_renamer" title="Permalink to this definition">¶</a></dt>
<dd><p>In the case that a file is corrupted, move it to a quarantined
area to allow replication to fix it.</p>
<dl class="field-list simple">
<dt class="field-odd">Params device_path<span class="colon">:</span></dt>
<dd class="field-odd"><p>The path to the device the corrupted file is on.</p>
</dd>
<dt class="field-even">Params corrupted_file_path<span class="colon">:</span></dt>
<dd class="field-even"><p>The path to the file you want quarantined.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>path (str) of directory the file was moved to</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>OSError</strong> – re-raises non errno.EEXIST / errno.ENOTEMPTY
exceptions from rename</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.replication_lock">
<span class="sig-name descname"><span class="pre">replication_lock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.replication_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager that will lock on the partition and, if configured
to do so, on the device given.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – name of target device</p></li>
<li><p><strong>policy</strong> – policy targeted by the replication request</p></li>
<li><p><strong>partition</strong> – partition targeted by the replication request</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.ReplicationLockTimeout" title="swift.common.exceptions.ReplicationLockTimeout"><strong>ReplicationLockTimeout</strong></a> – If the lock on the device
cannot be granted within the configured timeout.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.yield_hashes">
<span class="sig-name descname"><span class="pre">yield_hashes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffixes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.yield_hashes" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields tuples of (hash_only, timestamps) for object
information stored for the given device, partition, and
(optionally) suffixes. If suffixes is None, all stored
suffixes will be searched for object hashes. Note that if
suffixes is not None but empty, such as [], then nothing will
be yielded.</p>
<p>timestamps is a dict which may contain items mapping:</p>
<ul class="simple">
<li><p>ts_data -&gt; timestamp of data or tombstone file,</p></li>
<li><p>ts_meta -&gt; timestamp of meta file, if one exists</p></li>
<li><dl class="simple">
<dt>ts_ctype -&gt; timestamp of meta file containing most recent</dt><dd><p>content-type value, if one exists</p>
</dd>
</dl>
</li>
<li><p>durable -&gt; True if data file at ts_data is durable, False otherwise</p></li>
</ul>
<p>where timestamps are instances of
<a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – name of target device</p></li>
<li><p><strong>partition</strong> – partition name</p></li>
<li><p><strong>policy</strong> – the StoragePolicy instance</p></li>
<li><p><strong>suffixes</strong> – optional list of suffix directories to be searched</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileManager.yield_suffixes">
<span class="sig-name descname"><span class="pre">yield_suffixes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileManager.yield_suffixes" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields tuples of (full_path, suffix_only) for suffixes stored
on the given device and partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – name of target device</p></li>
<li><p><strong>partition</strong> – partition name</p></li>
<li><p><strong>policy</strong> – the StoragePolicy instance</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">BaseDiskFileReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">etag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disk_chunk_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_cache_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quarantine_hook</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_splice</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pipe_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diskfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Encapsulation of the WSGI read context for servicing GET REST API
requests. Serves as the context manager object for the
<a class="reference internal" href="#swift.obj.diskfile.DiskFile" title="swift.obj.diskfile.DiskFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFile</span></code></a> class’s
<code class="xref py py-func docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFile.reader()</span></code> method.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The quarantining behavior of this method is considered implementation
specific, and is not required of the API.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The arguments to the constructor are considered implementation
specific. The API does not define the constructor arguments.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fp</strong> – open file object pointer reference</p></li>
<li><p><strong>data_file</strong> – on-disk data file name for the object</p></li>
<li><p><strong>obj_size</strong> – verified on-disk size of the object</p></li>
<li><p><strong>etag</strong> – expected metadata etag value for entire file</p></li>
<li><p><strong>disk_chunk_size</strong> – size of reads from disk in bytes</p></li>
<li><p><strong>keep_cache_size</strong> – maximum object size that will be kept in cache</p></li>
<li><p><strong>device_path</strong> – on-disk device path, used when quarantining an obj</p></li>
<li><p><strong>logger</strong> – logger caller wants this object to use</p></li>
<li><p><strong>quarantine_hook</strong> – 1-arg callable called w/reason when quarantined</p></li>
<li><p><strong>use_splice</strong> – if true, use zero-copy splice() to send data</p></li>
<li><p><strong>pipe_size</strong> – size of pipe buffer used in zero-copy operations</p></li>
<li><p><strong>diskfile</strong> – the diskfile creating this DiskFileReader instance</p></li>
<li><p><strong>keep_cache</strong> – should resulting reads be kept in the buffer cache</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileReader.app_iter_range">
<span class="sig-name descname"><span class="pre">app_iter_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileReader.app_iter_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator over the data file for range (start, stop)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileReader.app_iter_ranges">
<span class="sig-name descname"><span class="pre">app_iter_ranges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ranges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileReader.app_iter_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator over the data file for a set of ranges</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileReader.can_zero_copy_send">
<span class="sig-name descname"><span class="pre">can_zero_copy_send</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileReader.can_zero_copy_send" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileReader.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileReader.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the open file handle if present.</p>
<p>For this specific implementation, this method will handle quarantining
the file if necessary.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileReader.manager">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">manager</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileReader.manager" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileReader.zero_copy_send">
<span class="sig-name descname"><span class="pre">zero_copy_send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wsockfd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileReader.zero_copy_send" title="Permalink to this definition">¶</a></dt>
<dd><p>Does some magic with splice() and tee() to move stuff from disk to
network without ever touching userspace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>wsockfd</strong> – file descriptor (integer) of the socket out which to
send data</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">BaseDiskFileWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datadir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes_per_sync</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diskfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next_part_power</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Encapsulation of the write context for servicing PUT REST API
requests. Serves as the context manager object for the
<a class="reference internal" href="#swift.obj.diskfile.DiskFile" title="swift.obj.diskfile.DiskFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFile</span></code></a> class’s
<code class="xref py py-func docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFile.create()</span></code> method.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is the responsibility of the
<code class="xref py py-func docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFile.create()</span></code> method context manager to
close the open file descriptor.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The arguments to the constructor are considered implementation
specific. The API does not define the constructor arguments.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – name of object from REST API</p></li>
<li><p><strong>datadir</strong> – on-disk directory object will end up in on
<a class="reference internal" href="#swift.obj.diskfile.DiskFileWriter.put" title="swift.obj.diskfile.DiskFileWriter.put"><code class="xref py py-func docutils literal notranslate"><span class="pre">swift.obj.diskfile.DiskFileWriter.put()</span></code></a></p></li>
<li><p><strong>fd</strong> – open file descriptor of temporary file to receive data</p></li>
<li><p><strong>tmppath</strong> – full path name of the opened file descriptor</p></li>
<li><p><strong>bytes_per_sync</strong> – number bytes written between sync calls</p></li>
<li><p><strong>diskfile</strong> – the diskfile creating this DiskFileWriter instance</p></li>
<li><p><strong>next_part_power</strong> – the next partition power to be used</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileWriter.chunks_finished">
<span class="sig-name descname"><span class="pre">chunks_finished</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileWriter.chunks_finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Expose internal stats about written chunks.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a tuple, (upload_size, etag)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileWriter.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileWriter.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileWriter.commit">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileWriter.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform any operations necessary to mark the object as durable. For
replication policy type this is a no-op.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> – object put timestamp, an instance of
<a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileWriter.logger">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileWriter.logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileWriter.manager">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">manager</span></span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileWriter.manager" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileWriter.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileWriter.open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileWriter.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileWriter.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize writing the file on disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metadata</strong> – dictionary of metadata to be associated with the
object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.BaseDiskFileWriter.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.BaseDiskFileWriter.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a chunk of data to disk. All invocations of this method must
come before invoking the :func:</p>
<p>For this implementation, the data is written into a temporary file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>chunk</strong> – the chunk of data to write as a string object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.DiskFile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">DiskFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mgr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_datadir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_splice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pipe_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">open_expired</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next_part_power</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.DiskFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile" title="swift.obj.diskfile.BaseDiskFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDiskFile</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.DiskFile.reader_cls">
<span class="sig-name descname"><span class="pre">reader_cls</span></span><a class="headerlink" href="#swift.obj.diskfile.DiskFile.reader_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#swift.obj.diskfile.DiskFileReader" title="swift.obj.diskfile.DiskFileReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileReader</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.DiskFile.writer_cls">
<span class="sig-name descname"><span class="pre">writer_cls</span></span><a class="headerlink" href="#swift.obj.diskfile.DiskFile.writer_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#swift.obj.diskfile.DiskFileWriter" title="swift.obj.diskfile.DiskFileWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileWriter</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.DiskFileManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">DiskFileManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.DiskFileManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager" title="swift.obj.diskfile.BaseDiskFileManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDiskFileManager</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.DiskFileManager.diskfile_cls">
<span class="sig-name descname"><span class="pre">diskfile_cls</span></span><a class="headerlink" href="#swift.obj.diskfile.DiskFileManager.diskfile_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#swift.obj.diskfile.DiskFile" title="swift.obj.diskfile.DiskFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFile</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.DiskFileManager.policy">
<span class="sig-name descname"><span class="pre">policy</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'replication'</span></em><a class="headerlink" href="#swift.obj.diskfile.DiskFileManager.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.DiskFileReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">DiskFileReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">etag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disk_chunk_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_cache_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quarantine_hook</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_splice</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pipe_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diskfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.DiskFileReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileReader" title="swift.obj.diskfile.BaseDiskFileReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDiskFileReader</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.DiskFileRouter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">DiskFileRouter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.DiskFileRouter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.DiskFileWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">DiskFileWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datadir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes_per_sync</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diskfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next_part_power</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.DiskFileWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter" title="swift.obj.diskfile.BaseDiskFileWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDiskFileWriter</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.DiskFileWriter.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.DiskFileWriter.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize writing the file on disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metadata</strong> – dictionary of metadata to be associated with the
object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">ECDiskFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile" title="swift.obj.diskfile.BaseDiskFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDiskFile</span></code></a></p>
<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFile.durable_timestamp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">durable_timestamp</span></span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFile.durable_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the timestamp of the newest durable file found in the object
directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A Timestamp instance, or None if no durable file was found.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileNotOpen" title="swift.common.exceptions.DiskFileNotOpen"><strong>DiskFileNotOpen</strong></a> – if the open() method has not been previously
called on this instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFile.fragments">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fragments</span></span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFile.fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides information about all fragments that were found in the object
directory, including fragments without a matching durable file, and
including any fragment chosen to construct the opened diskfile.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dict mapping &lt;Timestamp instance&gt; -&gt; &lt;list of frag indexes&gt;,
or None if the diskfile has not been opened or no fragments
were found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFile.purge">
<span class="sig-name descname"><span class="pre">purge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frag_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nondurable_purge_delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFile.purge" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a tombstone file matching the specified timestamp or
datafile matching the specified timestamp and fragment index
from the object directory.</p>
<p>This provides the EC reconstructor/ssync process with a way to
remove a tombstone or fragment from a handoff node after
reverting it to its primary node.</p>
<p>The hash will be invalidated, and if empty the hsh_path will
be removed immediately.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> – the object timestamp, an instance of
<a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p></li>
<li><p><strong>frag_index</strong> – fragment archive index, must be
a whole number or None.</p></li>
<li><p><strong>nondurable_purge_delay</strong> – only remove a non-durable data file if
it’s been on disk longer than this many seconds.</p></li>
<li><p><strong>meta_timestamp</strong> – if not None then remove any meta file with this
timestamp</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFile.reader_cls">
<span class="sig-name descname"><span class="pre">reader_cls</span></span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFile.reader_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#swift.obj.diskfile.ECDiskFileReader" title="swift.obj.diskfile.ECDiskFileReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">ECDiskFileReader</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFile.validate_metadata">
<span class="sig-name descname"><span class="pre">validate_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFile.validate_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFile.writer_cls">
<span class="sig-name descname"><span class="pre">writer_cls</span></span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFile.writer_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#swift.obj.diskfile.ECDiskFileWriter" title="swift.obj.diskfile.ECDiskFileWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ECDiskFileWriter</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFileManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">ECDiskFileManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFileManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager" title="swift.obj.diskfile.BaseDiskFileManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDiskFileManager</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFileManager.diskfile_cls">
<span class="sig-name descname"><span class="pre">diskfile_cls</span></span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFileManager.diskfile_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#swift.obj.diskfile.ECDiskFile" title="swift.obj.diskfile.ECDiskFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">ECDiskFile</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFileManager.make_on_disk_filename">
<span class="sig-name descname"><span class="pre">make_on_disk_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frag_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctype_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">durable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFileManager.make_on_disk_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the EC specific filename for given timestamp.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timestamp</strong> – the object timestamp, an instance of
<a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p></li>
<li><p><strong>ext</strong> – an optional string representing a file extension to be
appended to the returned file name</p></li>
<li><p><strong>frag_index</strong> – a fragment archive index, used with .data extension
only, must be a whole number.</p></li>
<li><p><strong>ctype_timestamp</strong> – an optional content-type timestamp, an instance
of <a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p></li>
<li><p><strong>durable</strong> – if True then include a durable marker in data filename.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a file name</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><strong>DiskFileError</strong></a> – if ext==’.data’ and the kwarg frag_index is not
a whole number</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFileManager.parse_on_disk_filename">
<span class="sig-name descname"><span class="pre">parse_on_disk_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFileManager.parse_on_disk_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns timestamp(s) and other info extracted from a policy specific
file name. For EC policy the data file name includes a fragment index
and possibly a durable marker, both of which must be stripped off
to retrieve the timestamp.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> – the file name including extension</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>a dict, with keys for timestamp, frag_index, durable, ext and</dt><dd><p>ctype_timestamp:</p>
</dd>
</dl>
<ul class="simple">
<li><p>timestamp is a <a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p></li>
<li><p>frag_index is an int or None</p></li>
<li><p>ctype_timestamp is a <a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> or
None for .meta files, otherwise None</p></li>
<li><p>ext is a string, the file extension including the leading dot or
the empty string if the filename has no extension</p></li>
<li><p>durable is a boolean that is True if the filename is a data file
that includes a durable marker</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><strong>DiskFileError</strong></a> – if any part of the filename is not able to be
validated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFileManager.policy">
<span class="sig-name descname"><span class="pre">policy</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'erasure_coding'</span></em><a class="headerlink" href="#swift.obj.diskfile.ECDiskFileManager.policy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFileManager.validate_fragment_index">
<span class="sig-name descname"><span class="pre">validate_fragment_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frag_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFileManager.validate_fragment_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Return int representation of frag_index, or raise a DiskFileError if
frag_index is not a whole number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frag_index</strong> – a fragment archive index</p></li>
<li><p><strong>policy</strong> – storage policy used to validate the index against</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFileReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">ECDiskFileReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">etag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disk_chunk_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_cache_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quarantine_hook</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_splice</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pipe_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diskfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFileReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileReader" title="swift.obj.diskfile.BaseDiskFileReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDiskFileReader</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFileWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">ECDiskFileWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datadir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes_per_sync</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diskfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next_part_power</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFileWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter" title="swift.obj.diskfile.BaseDiskFileWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDiskFileWriter</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFileWriter.commit">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFileWriter.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize put by renaming the object data file to include a durable
marker. We do this for EC policy because it requires a 2-phase put
commit confirmation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> – object put timestamp, an instance of
<a class="reference internal" href="misc.html#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><strong>DiskFileError</strong></a> – if the diskfile frag_index has not been set
(either during initialisation or a call to put())</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.diskfile.ECDiskFileWriter.put">
<span class="sig-name descname"><span class="pre">put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.ECDiskFileWriter.put" title="Permalink to this definition">¶</a></dt>
<dd><p>The only difference between this method and the replication policy
DiskFileWriter method is adding the frag index to the metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>metadata</strong> – dictionary of metadata to be associated with object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.clear_auditor_status">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">clear_auditor_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">devices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datadir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auditor_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ALL'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.clear_auditor_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.consolidate_hashes">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">consolidate_hashes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partition_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.consolidate_hashes" title="Permalink to this definition">¶</a></dt>
<dd><p>Take what’s in hashes.pkl and hashes.invalid, combine them, write the
result back to hashes.pkl, and clear out hashes.invalid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>partition_dir</strong> – absolute path to partition dir containing hashes.pkl
and hashes.invalid</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict, the suffix hashes (if any), the key ‘valid’ will be False
if hashes.pkl is corrupt, cannot be read or does not exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.extract_policy">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">extract_policy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.extract_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts the policy for an object (based on the name of the objects
directory) given the device-relative path to the object. Returns None in
the event that the path is malformed in some way.</p>
<p>The device-relative path is everything after the mount point; for example:</p>
<dl class="simple">
<dt>/srv/node/d42/objects-5/30/179/</dt><dd><p>485dc017205a81df3af616d917c90179/1401811134.873649.data</p>
</dd>
</dl>
<p>would have device-relative path:</p>
<p>objects-5/30/179/485dc017205a81df3af616d917c90179/1401811134.873649.data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>obj_path</strong> – device-relative path of an object, or the full path</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a <a class="reference internal" href="misc.html#swift.common.storage_policy.BaseStoragePolicy" title="swift.common.storage_policy.BaseStoragePolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStoragePolicy</span></code></a> or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.get_async_dir">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">get_async_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_or_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.get_async_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the async dir for the given policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>policy_or_index</strong> – <code class="docutils literal notranslate"><span class="pre">StoragePolicy</span></code> instance, or an index (string or
int); if None, the legacy Policy-0 is assumed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">async_pending</span></code> or <code class="docutils literal notranslate"><span class="pre">async_pending-&lt;N&gt;</span></code> as appropriate</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.get_auditor_status">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">get_auditor_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datadir_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auditor_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.get_auditor_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.get_data_dir">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">get_data_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_or_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.get_data_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the data dir for the given policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>policy_or_index</strong> – <code class="docutils literal notranslate"><span class="pre">StoragePolicy</span></code> instance, or an index (string or
int); if None, the legacy Policy-0 is assumed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">objects</span></code> or <code class="docutils literal notranslate"><span class="pre">objects-&lt;N&gt;</span></code> as appropriate</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.get_part_path">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">get_part_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dev_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.get_part_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the device path, policy, and partition, returns the full
path to the partition</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.get_tmp_dir">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">get_tmp_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_or_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.get_tmp_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the temp dir for the given policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>policy_or_index</strong> – <code class="docutils literal notranslate"><span class="pre">StoragePolicy</span></code> instance, or an index (string or
int); if None, the legacy Policy-0 is assumed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">tmp</span></code> or <code class="docutils literal notranslate"><span class="pre">tmp-&lt;N&gt;</span></code> as appropriate</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.invalidate_hash">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">invalidate_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suffix_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.invalidate_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidates the hash for a suffix_dir in the partition’s hashes file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>suffix_dir</strong> – absolute path to suffix dir whose hash needs
invalidating</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.object_audit_location_generator">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">object_audit_location_generator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">devices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datadir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mount_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_dirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auditor_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ALL'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.object_audit_location_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a devices path (e.g. “/srv/node”), yield an AuditLocation for all
objects stored under that directory for the given datadir (policy),
if device_dirs isn’t set.  If device_dirs is set, only yield AuditLocation
for the objects under the entries in device_dirs. The AuditLocation only
knows the path to the hash directory, not to the .data file therein
(if any). This is to avoid a double listdir(hash_dir); the DiskFile object
will always do one, so we don’t.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>devices</strong> – parent directory of the devices to be audited</p></li>
<li><p><strong>datadir</strong> – objects directory</p></li>
<li><p><strong>mount_check</strong> – flag to check if a mount check should be performed
on devices</p></li>
<li><p><strong>logger</strong> – a logger object</p></li>
<li><p><strong>device_dirs</strong> – a list of directories under devices to traverse</p></li>
<li><p><strong>auditor_type</strong> – either ALL or ZBF</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.quarantine_renamer">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">quarantine_renamer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">corrupted_file_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.quarantine_renamer" title="Permalink to this definition">¶</a></dt>
<dd><p>In the case that a file is corrupted, move it to a quarantined
area to allow replication to fix it.</p>
<dl class="field-list simple">
<dt class="field-odd">Params device_path<span class="colon">:</span></dt>
<dd class="field-odd"><p>The path to the device the corrupted file is on.</p>
</dd>
<dt class="field-even">Params corrupted_file_path<span class="colon">:</span></dt>
<dd class="field-even"><p>The path to the file you want quarantined.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>path (str) of directory the file was moved to</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>OSError</strong> – re-raises non errno.EEXIST / errno.ENOTEMPTY
exceptions from rename</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.read_hashes">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">read_hashes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partition_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.read_hashes" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the existing hashes.pkl</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a dict, the suffix hashes (if any), the key ‘valid’ will be False
if hashes.pkl is corrupt, cannot be read or does not exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.read_metadata">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">read_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_missing_checksum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.read_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to read the pickled metadata from an object file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fd</strong> – file descriptor or filename to load the metadata from</p></li>
<li><p><strong>add_missing_checksum</strong> – if set and checksum is missing, add it</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary of metadata</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.relink_paths">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">relink_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_target_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.relink_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Hard-links a file located in <code class="docutils literal notranslate"><span class="pre">target_path</span></code> using the second path
<code class="docutils literal notranslate"><span class="pre">new_target_path</span></code>. Creates intermediate directories if required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_path</strong> – current absolute filename</p></li>
<li><p><strong>new_target_path</strong> – new absolute filename for the hardlink</p></li>
<li><p><strong>ignore_missing</strong> – if True then no exception is raised if the link
could not be made because <code class="docutils literal notranslate"><span class="pre">target_path</span></code> did not exist, otherwise an
OSError will be raised.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>OSError if the hard link could not be created, unless the intended
hard link already exists or the <code class="docutils literal notranslate"><span class="pre">target_path</span></code> does not exist and
<code class="docutils literal notranslate"><span class="pre">must_exist</span></code> if False.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the link was created by the call to this method, False
otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.update_auditor_status">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">update_auditor_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datadir_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auditor_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.update_auditor_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.valid_suffix">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">valid_suffix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.valid_suffix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.write_hashes">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">write_hashes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partition_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hashes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.write_hashes" title="Permalink to this definition">¶</a></dt>
<dd><p>Write hashes to hashes.pkl</p>
<p>The updated key is added to hashes before it is written.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.diskfile.write_metadata">
<span class="sig-prename descclassname"><span class="pre">swift.obj.diskfile.</span></span><span class="sig-name descname"><span class="pre">write_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xattr_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">65536</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.diskfile.write_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to write pickled metadata for an object file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fd</strong> – file descriptor or filename to write the metadata</p></li>
<li><p><strong>metadata</strong> – metadata to write</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-swift.obj.replicator">
<span id="id3"></span><span id="object-replicator"></span><h2>Object Replicator<a class="headerlink" href="#module-swift.obj.replicator" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.replicator.</span></span><span class="sig-name descname"><span class="pre">ObjectReplicator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Daemon</span></code></p>
<p>Replicate objects.</p>
<p>Encapsulates most logic and data needed by the object replication process.
Each call to .replicate() performs one replication pass.  It’s up to the
caller to do this in a loop.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.aggregate_recon_update">
<span class="sig-name descname"><span class="pre">aggregate_recon_update</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.aggregate_recon_update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.build_replication_jobs">
<span class="sig-name descname"><span class="pre">build_replication_jobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ips</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_devices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_partitions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.build_replication_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for collect_jobs to build jobs for replication
using replication style storage policy</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.check_ring">
<span class="sig-name descname"><span class="pre">check_ring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_ring</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.check_ring" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see if the ring has been updated
:param object_ring: the ring to check</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean indicating whether or not the ring has changed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.collect_jobs">
<span class="sig-name descname"><span class="pre">collect_jobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">override_devices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_partitions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.collect_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sorted list of jobs (dictionaries) that specify the
partitions, nodes, etc to be rsynced.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>override_devices</strong> – if set, only jobs on these devices
will be returned</p></li>
<li><p><strong>override_partitions</strong> – if set, only jobs on these partitions
will be returned</p></li>
<li><p><strong>override_policies</strong> – if set, only jobs in these storage
policies will be returned</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.delete_handoff_objs">
<span class="sig-name descname"><span class="pre">delete_handoff_objs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_objs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.delete_handoff_objs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.delete_partition">
<span class="sig-name descname"><span class="pre">delete_partition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.delete_partition" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.get_local_devices">
<span class="sig-name descname"><span class="pre">get_local_devices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.get_local_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a set of all local devices in all replication-type storage
policies.</p>
<p>This is the device names, e.g. “sdq” or “d1234” or something, not
the full ring entries.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.get_worker_args">
<span class="sig-name descname"><span class="pre">get_worker_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">once</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.get_worker_args" title="Permalink to this definition">¶</a></dt>
<dd><p>For each worker yield a (possibly empty) dict of kwargs to pass along
to the daemon’s <code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code> method after fork.  The length of elements
returned from this method will determine the number of processes
created.</p>
<p>If the returned iterable is empty, the Strategy will fallback to
run-inline strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>once</strong> – False if the worker(s) will be daemonized, True if the
worker(s) will be run once</p></li>
<li><p><strong>kwargs</strong> – plumbed through via command line argparser</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an iterable of dicts, each element represents the kwargs to
be passed to a single worker’s <code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code> method after fork.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.heartbeat">
<span class="sig-name descname"><span class="pre">heartbeat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.heartbeat" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop that runs in the background during replication.  It periodically
logs progress.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.is_healthy">
<span class="sig-name descname"><span class="pre">is_healthy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.is_healthy" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether our set of local devices remains the same.</p>
<p>If devices have been added or removed, then we return False here so
that we can kill off any worker processes and then distribute the
new set of local devices across a new set of workers so that all
devices are, once again, being worked on.</p>
<p>This function may also cause recon stats to be updated.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>False if any local devices have been added or removed,
True otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.load_object_ring">
<span class="sig-name descname"><span class="pre">load_object_ring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.load_object_ring" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure the policy’s rings are loaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>policy</strong> – the StoragePolicy instance</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>appropriate ring object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.post_multiprocess_run">
<span class="sig-name descname"><span class="pre">post_multiprocess_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.post_multiprocess_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this to do something after running using multiple worker
processes. This method is called in the parent process.</p>
<p>This is probably only useful for run-once mode since there is no
“after running” in run-forever mode.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.replicate">
<span class="sig-name descname"><span class="pre">replicate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">override_devices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_partitions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.replicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a replication pass</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.rsync">
<span class="sig-name descname"><span class="pre">rsync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffixes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.rsync" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses rsync to implement the sync method. This was the first
sync method in Swift.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.run_forever">
<span class="sig-name descname"><span class="pre">run_forever</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">multiprocess_worker_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_devices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.run_forever" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this to run forever</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">multiprocess_worker_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">have_overrides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this to run the script once</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.ssync">
<span class="sig-name descname"><span class="pre">ssync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffixes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_check_objs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.ssync" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.stats_line">
<span class="sig-name descname"><span class="pre">stats_line</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.stats_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs various stats for the currently running replication pass.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.sync">
<span class="sig-name descname"><span class="pre">sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffixes</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronize local suffix directories from a partition with a remote
node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – the “dev” entry for the remote node to sync with</p></li>
<li><p><strong>job</strong> – information about the partition being synced</p></li>
<li><p><strong>suffixes</strong> – a list of suffixes which need to be pushed</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>boolean and dictionary, boolean indicating success or failure</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.total_stats">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">total_stats</span></span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.total_stats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.update" title="Permalink to this definition">¶</a></dt>
<dd><p>High-level method that replicates a single partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>job</strong> – a dict containing info about the partition to be replicated</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.update_deleted">
<span class="sig-name descname"><span class="pre">update_deleted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.update_deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>High-level method that replicates a single partition that doesn’t
belong on this node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>job</strong> – a dict containing info about the partition to be replicated</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.ObjectReplicator.update_recon">
<span class="sig-name descname"><span class="pre">update_recon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">total</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_devices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.ObjectReplicator.update_recon" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.replicator.Stats">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.replicator.</span></span><span class="sig-name descname"><span class="pre">Stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">attempted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hashmatch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rsync</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">success</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix_hash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix_sync</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failure_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.Stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.Stats.add_failure_stats">
<span class="sig-name descname"><span class="pre">add_failure_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">failures</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.Stats.add_failure_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Note the failure of one or more devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>failures</strong> – a list of (ip, device-name) pairs that failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.replicator.Stats.fields">
<span class="sig-name descname"><span class="pre">fields</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['attempted',</span> <span class="pre">'failure',</span> <span class="pre">'hashmatch',</span> <span class="pre">'remove',</span> <span class="pre">'rsync',</span> <span class="pre">'success',</span> <span class="pre">'suffix_count',</span> <span class="pre">'suffix_hash',</span> <span class="pre">'suffix_sync',</span> <span class="pre">'failure_nodes']</span></em><a class="headerlink" href="#swift.obj.replicator.Stats.fields" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.Stats.from_recon">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_recon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dct</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.Stats.from_recon" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.replicator.Stats.to_recon">
<span class="sig-name descname"><span class="pre">to_recon</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.replicator.Stats.to_recon" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="module-swift.obj.ssync_sender"></span><dl class="py class">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.Sender">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.ssync_sender.</span></span><span class="sig-name descname"><span class="pre">Sender</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">daemon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">job</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffixes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_check_objs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_non_durable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_objects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.Sender" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Sends SSYNC requests to the object server.</p>
<p>These requests are eventually handled by
<a class="reference internal" href="#module-swift.obj.ssync_receiver" title="swift.obj.ssync_receiver"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssync_receiver</span></code></a> and full documentation about the
process is there.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.Sender.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.Sender.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Establishes a connection and starts an SSYNC request
with the object server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.Sender.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.Sender.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes down the connection to the object server once done
with the SSYNC request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.Sender.missing_check">
<span class="sig-name descname"><span class="pre">missing_check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.Sender.missing_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the sender-side of the MISSING_CHECK step of a
SSYNC request.</p>
<p>Full documentation of this can be found at
<a class="reference internal" href="#swift.obj.ssync_receiver.Receiver.missing_check" title="swift.obj.ssync_receiver.Receiver.missing_check"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Receiver.missing_check()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.Sender.send_delete">
<span class="sig-name descname"><span class="pre">send_delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.Sender.send_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a DELETE subrequest with the given information.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.Sender.send_post">
<span class="sig-name descname"><span class="pre">send_post</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.Sender.send_post" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.Sender.send_put">
<span class="sig-name descname"><span class="pre">send_put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">durable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.Sender.send_put" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a PUT subrequest for the url_path using the source df
(DiskFile) and content_length.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.Sender.send_subrequest">
<span class="sig-name descname"><span class="pre">send_subrequest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.Sender.send_subrequest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.Sender.updates">
<span class="sig-name descname"><span class="pre">updates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">send_map</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.Sender.updates" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the sender-side of the UPDATES step of an SSYNC
request.</p>
<p>Full documentation of this can be found at
<a class="reference internal" href="#swift.obj.ssync_receiver.Receiver.updates" title="swift.obj.ssync_receiver.Receiver.updates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Receiver.updates()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.SsyncBufferedHTTPConnection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.ssync_sender.</span></span><span class="sig-name descname"><span class="pre">SsyncBufferedHTTPConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_address=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.SsyncBufferedHTTPConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="misc.html#swift.common.bufferedhttp.BufferedHTTPConnection" title="swift.common.bufferedhttp.BufferedHTTPConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferedHTTPConnection</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.SsyncBufferedHTTPConnection.response_class">
<span class="sig-name descname"><span class="pre">response_class</span></span><a class="headerlink" href="#swift.obj.ssync_sender.SsyncBufferedHTTPConnection.response_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#swift.obj.ssync_sender.SsyncBufferedHTTPResponse" title="swift.obj.ssync_sender.SsyncBufferedHTTPResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">SsyncBufferedHTTPResponse</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.SsyncBufferedHTTPResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.ssync_sender.</span></span><span class="sig-name descname"><span class="pre">SsyncBufferedHTTPResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.SsyncBufferedHTTPResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="misc.html#swift.common.bufferedhttp.BufferedHTTPResponse" title="swift.common.bufferedhttp.BufferedHTTPResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferedHTTPResponse</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.SsyncBufferedHTTPResponse.readline">
<span class="sig-name descname"><span class="pre">readline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1024</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.SsyncBufferedHTTPResponse.readline" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a line from the SSYNC response body.</p>
<p>httplib has no readline and will block on read(x) until x is
read, so we have to do the work ourselves. A bit of this is
taken from Python’s httplib itself.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.decode_wanted">
<span class="sig-prename descclassname"><span class="pre">swift.obj.ssync_sender.</span></span><span class="sig-name descname"><span class="pre">decode_wanted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.decode_wanted" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse missing_check line parts to determine which parts of local
diskfile were wanted by the receiver.</p>
<p>The encoder for parts is
<a class="reference internal" href="#swift.obj.ssync_receiver.encode_wanted" title="swift.obj.ssync_receiver.encode_wanted"><code class="xref py py-func docutils literal notranslate"><span class="pre">encode_wanted()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.ssync_sender.encode_missing">
<span class="sig-prename descclassname"><span class="pre">swift.obj.ssync_sender.</span></span><span class="sig-name descname"><span class="pre">encode_missing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_hash</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ts_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ts_meta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ts_ctype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_sender.encode_missing" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string representing the object hash, its data file timestamp,
the delta forwards to its metafile and content-type timestamps, if
non-zero, and its durability, in the form:
<code class="docutils literal notranslate"><span class="pre">&lt;hash&gt;</span> <span class="pre">&lt;ts_data&gt;</span> <span class="pre">[m:&lt;hex</span> <span class="pre">delta</span> <span class="pre">to</span> <span class="pre">ts_meta&gt;[,t:&lt;hex</span> <span class="pre">delta</span> <span class="pre">to</span> <span class="pre">ts_ctype&gt;]</span>
<span class="pre">[,durable:False]</span></code></p>
<p>The decoder for this line is
<a class="reference internal" href="#swift.obj.ssync_receiver.decode_missing" title="swift.obj.ssync_receiver.decode_missing"><code class="xref py py-func docutils literal notranslate"><span class="pre">decode_missing()</span></code></a></p>
</dd></dl>

<span class="target" id="module-swift.obj.ssync_receiver"></span><dl class="py class">
<dt class="sig sig-object py" id="swift.obj.ssync_receiver.Receiver">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.ssync_receiver.</span></span><span class="sig-name descname"><span class="pre">Receiver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_receiver.Receiver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles incoming SSYNC requests to the object server.</p>
<p>These requests come from the object-replicator daemon that uses
<a class="reference internal" href="#module-swift.obj.ssync_sender" title="swift.obj.ssync_sender"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssync_sender</span></code></a>.</p>
<p>The number of concurrent SSYNC requests is restricted by
use of a replication_semaphore and can be configured with the
object-server.conf [object-server] replication_concurrency
setting.</p>
<p>An SSYNC request is really just an HTTP conduit for
sender/receiver replication communication. The overall
SSYNC request should always succeed, but it will contain
multiple requests within its request and response bodies. This
“hack” is done so that replication concurrency can be managed.</p>
<p>The general process inside an SSYNC request is:</p>
<ol class="arabic simple">
<li><p>Initialize the request: Basic request validation, mount check,
acquire semaphore lock, etc..</p></li>
<li><p>Missing check: Sender sends the hashes and timestamps of
the object information it can send, receiver sends back
the hashes it wants (doesn’t have or has an older
timestamp).</p></li>
<li><p>Updates: Sender sends the object information requested.</p></li>
<li><p>Close down: Release semaphore lock, etc.</p></li>
</ol>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_receiver.Receiver.initialize_request">
<span class="sig-name descname"><span class="pre">initialize_request</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_receiver.Receiver.initialize_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic validation of request and mount check.</p>
<p>This function will be called before attempting to acquire a
replication semaphore lock, so contains only quick checks.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_receiver.Receiver.missing_check">
<span class="sig-name descname"><span class="pre">missing_check</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_receiver.Receiver.missing_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the receiver-side of the MISSING_CHECK step of a
SSYNC request.</p>
<p>Receives a list of hashes and timestamps of object
information the sender can provide and responds with a list
of hashes desired, either because they’re missing or have an
older timestamp locally.</p>
<p>The process is generally:</p>
<ol class="arabic">
<li><p>Sender sends <code class="docutils literal notranslate"><span class="pre">:MISSING_CHECK:</span> <span class="pre">START</span></code> and begins
sending <cite>hash timestamp</cite> lines.</p></li>
<li><p>Receiver gets <code class="docutils literal notranslate"><span class="pre">:MISSING_CHECK:</span> <span class="pre">START</span></code> and begins
reading the <cite>hash timestamp</cite> lines, collecting the
hashes of those it desires.</p></li>
<li><p>Sender sends <code class="docutils literal notranslate"><span class="pre">:MISSING_CHECK:</span> <span class="pre">END</span></code>.</p></li>
<li><p>Receiver gets <code class="docutils literal notranslate"><span class="pre">:MISSING_CHECK:</span> <span class="pre">END</span></code>, responds with
<code class="docutils literal notranslate"><span class="pre">:MISSING_CHECK:</span> <span class="pre">START</span></code>, followed by the list of
&lt;wanted_hash&gt; specifiers it collected as being wanted
(one per line), <code class="docutils literal notranslate"><span class="pre">:MISSING_CHECK:</span> <span class="pre">END</span></code>, and flushes any
buffers.</p>
<p>Each &lt;wanted_hash&gt; specifier has the form &lt;hash&gt;[ &lt;parts&gt;] where
&lt;parts&gt; is a string containing characters ‘d’ and/or ‘m’
indicating that only data or meta part of object respectively is
required to be sync’d.</p>
</li>
<li><p>Sender gets <code class="docutils literal notranslate"><span class="pre">:MISSING_CHECK:</span> <span class="pre">START</span></code> and reads the list
of hashes desired by the receiver until reading
<code class="docutils literal notranslate"><span class="pre">:MISSING_CHECK:</span> <span class="pre">END</span></code>.</p></li>
</ol>
<p>The collection and then response is so the sender doesn’t
have to read while it writes to ensure network buffers don’t
fill up and block everything.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.ssync_receiver.Receiver.updates">
<span class="sig-name descname"><span class="pre">updates</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_receiver.Receiver.updates" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the UPDATES step of an SSYNC request.</p>
<p>Receives a set of PUT and DELETE subrequests that will be
routed to the object server itself for processing. These
contain the information requested by the MISSING_CHECK step.</p>
<p>The PUT and DELETE subrequests are formatted pretty much
exactly like regular HTTP requests, excepting the HTTP
version on the first request line.</p>
<p>The process is generally:</p>
<ol class="arabic simple">
<li><p>Sender sends <code class="docutils literal notranslate"><span class="pre">:UPDATES:</span> <span class="pre">START</span></code> and begins sending the
PUT and DELETE subrequests.</p></li>
<li><p>Receiver gets <code class="docutils literal notranslate"><span class="pre">:UPDATES:</span> <span class="pre">START</span></code> and begins routing the
subrequests to the object server.</p></li>
<li><p>Sender sends <code class="docutils literal notranslate"><span class="pre">:UPDATES:</span> <span class="pre">END</span></code>.</p></li>
<li><p>Receiver gets <code class="docutils literal notranslate"><span class="pre">:UPDATES:</span> <span class="pre">END</span></code> and sends <code class="docutils literal notranslate"><span class="pre">:UPDATES:</span>
<span class="pre">START</span></code> and <code class="docutils literal notranslate"><span class="pre">:UPDATES:</span> <span class="pre">END</span></code> (assuming no errors).</p></li>
<li><p>Sender gets <code class="docutils literal notranslate"><span class="pre">:UPDATES:</span> <span class="pre">START</span></code> and <code class="docutils literal notranslate"><span class="pre">:UPDATES:</span> <span class="pre">END</span></code>.</p></li>
</ol>
<p>If too many subrequests fail, as configured by
replication_failure_threshold and replication_failure_ratio,
the receiver will hang up the request early so as to not
waste any more time.</p>
<p>At step 4, the receiver will send back an error if there were
any failures (that didn’t cause a hangup due to the above
thresholds) so the sender knows the whole was not entirely a
success. This is so the sender knows if it can remove an out
of place partition, for example.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.obj.ssync_receiver.SsyncClientDisconnected">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.ssync_receiver.</span></span><span class="sig-name descname"><span class="pre">SsyncClientDisconnected</span></span><a class="headerlink" href="#swift.obj.ssync_receiver.SsyncClientDisconnected" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.ssync_receiver.decode_missing">
<span class="sig-prename descclassname"><span class="pre">swift.obj.ssync_receiver.</span></span><span class="sig-name descname"><span class="pre">decode_missing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_receiver.decode_missing" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a string of the form generated by
<a class="reference internal" href="#swift.obj.ssync_sender.encode_missing" title="swift.obj.ssync_sender.encode_missing"><code class="xref py py-func docutils literal notranslate"><span class="pre">encode_missing()</span></code></a> and return a dict
with keys <code class="docutils literal notranslate"><span class="pre">object_hash</span></code>, <code class="docutils literal notranslate"><span class="pre">ts_data</span></code>, <code class="docutils literal notranslate"><span class="pre">ts_meta</span></code>, <code class="docutils literal notranslate"><span class="pre">ts_ctype</span></code>,
<code class="docutils literal notranslate"><span class="pre">durable</span></code>.</p>
<p>The encoder for this line is
<a class="reference internal" href="#swift.obj.ssync_sender.encode_missing" title="swift.obj.ssync_sender.encode_missing"><code class="xref py py-func docutils literal notranslate"><span class="pre">encode_missing()</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.ssync_receiver.encode_wanted">
<span class="sig-prename descclassname"><span class="pre">swift.obj.ssync_receiver.</span></span><span class="sig-name descname"><span class="pre">encode_wanted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">remote</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.ssync_receiver.encode_wanted" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare a remote and local results and generate a wanted line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remote</strong> – a dict, with ts_data and ts_meta keys in the form
returned by <a class="reference internal" href="#swift.obj.ssync_receiver.decode_missing" title="swift.obj.ssync_receiver.decode_missing"><code class="xref py py-func docutils literal notranslate"><span class="pre">decode_missing()</span></code></a></p></li>
<li><p><strong>local</strong> – a dict, possibly empty, with ts_data and ts_meta keys
in the form returned <code class="xref py py-meth docutils literal notranslate"><span class="pre">Receiver._check_local()</span></code></p></li>
</ul>
</dd>
</dl>
<p>The decoder for this line is
<a class="reference internal" href="#swift.obj.ssync_sender.decode_wanted" title="swift.obj.ssync_sender.decode_wanted"><code class="xref py py-func docutils literal notranslate"><span class="pre">decode_wanted()</span></code></a></p>
</dd></dl>

</section>
<section id="module-swift.obj.reconstructor">
<span id="id4"></span><span id="object-reconstructor"></span><h2>Object Reconstructor<a class="headerlink" href="#module-swift.obj.reconstructor" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.reconstructor.</span></span><span class="sig-name descname"><span class="pre">ObjectReconstructor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Daemon</span></code></p>
<p>Reconstruct objects using erasure code.  And also rebalance EC Fragment
Archive objects off handoff nodes.</p>
<p>Encapsulates most logic and data needed by the object reconstruction
process. Each call to .reconstruct() performs one pass.  It’s up to the
caller to do this in a loop.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.aggregate_recon_update">
<span class="sig-name descname"><span class="pre">aggregate_recon_update</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.aggregate_recon_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate per-disk rcache updates from child workers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.build_reconstruction_jobs">
<span class="sig-name descname"><span class="pre">build_reconstruction_jobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">part_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.build_reconstruction_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for collect_jobs to build jobs for reconstruction
using EC style storage policy</p>
<p>N.B. If this function ever returns an empty list of jobs the entire
partition will be deleted.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.check_ring">
<span class="sig-name descname"><span class="pre">check_ring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_ring</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.check_ring" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see if the ring has been updated</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>object_ring</strong> – the ring to check</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>boolean indicating whether or not the ring has changed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.collect_parts">
<span class="sig-name descname"><span class="pre">collect_parts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">override_devices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_partitions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.collect_parts" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper for getting partitions in the top level reconstructor</p>
<p>In handoffs_only mode primary partitions will not be included in the
returned (possibly empty) list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.delete_partition">
<span class="sig-name descname"><span class="pre">delete_partition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.delete_partition" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.delete_reverted_objs">
<span class="sig-name descname"><span class="pre">delete_reverted_objs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objects</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.delete_reverted_objs" title="Permalink to this definition">¶</a></dt>
<dd><p>For EC we can potentially revert only some of a partition
so we’ll delete reverted objects here. Note that we delete
the fragment index of the file we sent to the remote node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job</strong> – the job being processed</p></li>
<li><p><strong>objects</strong> – a dict of objects to be deleted, each entry maps
hash=&gt;timestamp</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.detect_lockups">
<span class="sig-name descname"><span class="pre">detect_lockups</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.detect_lockups" title="Permalink to this definition">¶</a></dt>
<dd><p>In testing, the pool.waitall() call very occasionally failed to return.
This is an attempt to make sure the reconstructor finishes its
reconstruction pass in some eventuality.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.final_recon_dump">
<span class="sig-name descname"><span class="pre">final_recon_dump</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">total</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_devices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.final_recon_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Add stats for this worker’s run to recon cache.</p>
<p>When in worker mode (per_disk_stats == True) this worker’s stats are
added per device instead of in the top level keys (aggregation is
serialized in the parent process).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>total</strong> – the runtime of cycle in minutes</p></li>
<li><p><strong>override_devices</strong> – (optional) list of device that are being
reconstructed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.get_local_devices">
<span class="sig-name descname"><span class="pre">get_local_devices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.get_local_devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a set of all local devices in all EC policies.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.get_policy2devices">
<span class="sig-name descname"><span class="pre">get_policy2devices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.get_policy2devices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.get_suffix_delta">
<span class="sig-name descname"><span class="pre">get_suffix_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_suff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_suff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.get_suffix_delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare the local suffix hashes with the remote suffix hashes
for the given local and remote fragment indexes.  Return those
suffixes which should be synced.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_suff</strong> – the local suffix hashes (from _get_hashes)</p></li>
<li><p><strong>local_index</strong> – the local fragment index for the job</p></li>
<li><p><strong>remote_suff</strong> – the remote suffix hashes (from remote
REPLICATE request)</p></li>
<li><p><strong>remote_index</strong> – the remote fragment index for the job</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a list of strings, the suffix dirs to sync</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.get_worker_args">
<span class="sig-name descname"><span class="pre">get_worker_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">once</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.get_worker_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Take the set of all local devices for this node from all the EC
policies rings, and distribute them evenly into the number of workers
to be spawned according to the configured worker count. If <cite>devices</cite> is
given in <cite>kwargs</cite> then distribute only those devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>once</strong> – False if the worker(s) will be daemonized, True if the
worker(s) will be run once</p></li>
<li><p><strong>kwargs</strong> – optional overrides from the command line</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.heartbeat">
<span class="sig-name descname"><span class="pre">heartbeat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.heartbeat" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop that runs in the background during reconstruction.  It
periodically logs progress.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.is_healthy">
<span class="sig-name descname"><span class="pre">is_healthy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.is_healthy" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether rings have changed, and maybe do a recon update.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>False if any ec ring has changed</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.kill_coros">
<span class="sig-name descname"><span class="pre">kill_coros</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.kill_coros" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function that kills all coroutines currently running.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.load_object_ring">
<span class="sig-name descname"><span class="pre">load_object_ring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.load_object_ring" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure the policy’s rings are loaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>policy</strong> – the StoragePolicy instance</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>appropriate ring object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.make_rebuilt_fragment_iter">
<span class="sig-name descname"><span class="pre">make_rebuilt_fragment_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">responses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frag_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.make_rebuilt_fragment_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a set of connections from backend object servers into a generator
that yields up the rebuilt fragment archive for frag_index.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.post_multiprocess_run">
<span class="sig-name descname"><span class="pre">post_multiprocess_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.post_multiprocess_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this to do something after running using multiple worker
processes. This method is called in the parent process.</p>
<p>This is probably only useful for run-once mode since there is no
“after running” in run-forever mode.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.process_job">
<span class="sig-name descname"><span class="pre">process_job</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.process_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Sync the local partition with the remote node(s) according to
the parameters of the job.  For primary nodes, the SYNC job type
will define both left and right hand sync_to nodes to ssync with
as defined by this primary nodes index in the node list based on
the fragment index found in the partition.  For non-primary
nodes (either handoff revert, or rebalance) the REVERT job will
define a single node in sync_to which is the proper/new home for
the fragment index.</p>
<p>N.B. ring rebalancing can be time consuming and handoff nodes’
fragment indexes do not have a stable order, it’s possible to
have more than one REVERT job for a partition, and in some rare
failure conditions there may even also be a SYNC job for the
same partition - but each one will be processed separately
because each job will define a separate list of node(s) to
‘sync_to’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>job</strong> – the job dict, with the keys defined in <code class="docutils literal notranslate"><span class="pre">_get_job_info</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.reconstruct">
<span class="sig-name descname"><span class="pre">reconstruct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.reconstruct" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a reconstruction pass</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.reconstruct_fa">
<span class="sig-name descname"><span class="pre">reconstruct_fa</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.reconstruct_fa" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconstructs a fragment archive - this method is called from ssync
after a remote node responds that is missing this object - the local
diskfile is opened to provide metadata - but to reconstruct the
missing fragment archive we must connect to multiple object servers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job</strong> – job from ssync_sender.</p></li>
<li><p><strong>node</strong> – node to which we’re rebuilding.</p></li>
<li><p><strong>df</strong> – an instance of <a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile" title="swift.obj.diskfile.BaseDiskFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDiskFile</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a DiskFile like class for use by ssync.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileQuarantined" title="swift.common.exceptions.DiskFileQuarantined"><strong>DiskFileQuarantined</strong></a> – if the fragment archive cannot be
reconstructed and has as a result been quarantined.</p></li>
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><strong>DiskFileError</strong></a> – if the fragment archive cannot be reconstructed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.run_forever">
<span class="sig-name descname"><span class="pre">run_forever</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">multiprocess_worker_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.run_forever" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this to run forever</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">multiprocess_worker_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this to run the script once</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ObjectReconstructor.stats_line">
<span class="sig-name descname"><span class="pre">stats_line</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.ObjectReconstructor.stats_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs various stats for the currently running reconstruction pass.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.reconstructor.RebuildingECDiskFileStream">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.reconstructor.</span></span><span class="sig-name descname"><span class="pre">RebuildingECDiskFileStream</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datafile_metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frag_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rebuilt_fragment_iter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.RebuildingECDiskFileStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class wraps the reconstructed fragment archive data and
metadata in the DiskFile interface for ssync.</p>
<dl class="py property">
<dt class="sig sig-object py" id="swift.obj.reconstructor.RebuildingECDiskFileStream.content_length">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content_length</span></span><a class="headerlink" href="#swift.obj.reconstructor.RebuildingECDiskFileStream.content_length" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.RebuildingECDiskFileStream.get_datafile_metadata">
<span class="sig-name descname"><span class="pre">get_datafile_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.RebuildingECDiskFileStream.get_datafile_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.RebuildingECDiskFileStream.get_metadata">
<span class="sig-name descname"><span class="pre">get_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.RebuildingECDiskFileStream.get_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.reconstructor.RebuildingECDiskFileStream.reader">
<span class="sig-name descname"><span class="pre">reader</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.reconstructor.RebuildingECDiskFileStream.reader" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.reconstructor.ResponseBucket">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.reconstructor.</span></span><span class="sig-name descname"><span class="pre">ResponseBucket</span></span><a class="headerlink" href="#swift.obj.reconstructor.ResponseBucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Encapsulates fragment GET response data related to a single timestamp.</p>
</dd></dl>

</section>
<section id="module-swift.obj.server">
<span id="id5"></span><span id="object-server"></span><h2>Object Server<a class="headerlink" href="#module-swift.obj.server" title="Permalink to this heading">¶</a></h2>
<p>Object Server for Swift</p>
<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.server.EventletPlungerString">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.server.</span></span><span class="sig-name descname"><span class="pre">EventletPlungerString</span></span><a class="headerlink" href="#swift.obj.server.EventletPlungerString" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></p>
<p>Eventlet won’t send headers until it’s accumulated at least
eventlet.wsgi.MINIMUM_CHUNK_SIZE bytes or the app iter is exhausted.
If we want to send the response body behind Eventlet’s back, perhaps
with some zero-copy wizardry, then we have to unclog the plumbing in
eventlet.wsgi to force the headers out, so we use an
EventletPlungerString to empty out all of Eventlet’s buffers.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.server.</span></span><span class="sig-name descname"><span class="pre">ObjectController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStorageServer</span></code></p>
<p>Implements the WSGI application for the Swift Object Server.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.DELETE">
<span class="sig-name descname"><span class="pre">DELETE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.DELETE" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle HTTP DELETE requests for the Swift Object Server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.GET">
<span class="sig-name descname"><span class="pre">GET</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.GET" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle HTTP GET requests for the Swift Object Server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.HEAD">
<span class="sig-name descname"><span class="pre">HEAD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.HEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle HTTP HEAD requests for the Swift Object Server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.POST">
<span class="sig-name descname"><span class="pre">POST</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.POST" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle HTTP POST requests for the Swift Object Server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.PUT">
<span class="sig-name descname"><span class="pre">PUT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.PUT" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle HTTP PUT requests for the Swift Object Server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.REPLICATE">
<span class="sig-name descname"><span class="pre">REPLICATE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.REPLICATE" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle REPLICATE requests for the Swift Object Server.  This is used
by the object replicator to get hashes for directories.</p>
<p>Note that the name REPLICATE is preserved for historical reasons as
this verb really just returns the hashes information for the specified
parameters and is used, for example, by both replication and EC.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.SSYNC">
<span class="sig-name descname"><span class="pre">SSYNC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.SSYNC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.async_update">
<span class="sig-name descname"><span class="pre">async_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contdevice</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers_out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objdevice</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger_thread_locals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.async_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends or saves an async update.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op</strong> – operation performed (ex: ‘PUT’, or ‘DELETE’)</p></li>
<li><p><strong>account</strong> – account name for the object</p></li>
<li><p><strong>container</strong> – container name for the object</p></li>
<li><p><strong>obj</strong> – object name</p></li>
<li><p><strong>host</strong> – host that the container is on</p></li>
<li><p><strong>partition</strong> – partition that the container is on</p></li>
<li><p><strong>contdevice</strong> – device name that the container is on</p></li>
<li><p><strong>headers_out</strong> – dictionary of headers to send in the container
request</p></li>
<li><p><strong>objdevice</strong> – device name that the object is in</p></li>
<li><p><strong>policy</strong> – the associated BaseStoragePolicy instance</p></li>
<li><p><strong>logger_thread_locals</strong> – The thread local values to be set on the
self.logger to retain transaction
logging information.</p></li>
<li><p><strong>container_path</strong> – optional path in the form <cite>&lt;account/container&gt;</cite>
to which the update should be sent. If given this path will be used
instead of constructing a path from the <code class="docutils literal notranslate"><span class="pre">account</span></code> and
<code class="docutils literal notranslate"><span class="pre">container</span></code> params.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.container_update">
<span class="sig-name descname"><span class="pre">container_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers_out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objdevice</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.container_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the container when objects are updated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op</strong> – operation performed (ex: ‘PUT’, or ‘DELETE’)</p></li>
<li><p><strong>account</strong> – account name for the object</p></li>
<li><p><strong>container</strong> – container name for the object</p></li>
<li><p><strong>obj</strong> – object name</p></li>
<li><p><strong>request</strong> – the original request object driving the update</p></li>
<li><p><strong>headers_out</strong> – dictionary of headers to send in the container
request(s)</p></li>
<li><p><strong>objdevice</strong> – device name that the object is in</p></li>
<li><p><strong>policy</strong> – the BaseStoragePolicy instance</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.delete_at_update">
<span class="sig-name descname"><span class="pre">delete_at_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delete_at</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objdevice</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.delete_at_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the expiring objects container when objects are updated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op</strong> – operation performed (ex: ‘PUT’, or ‘DELETE’)</p></li>
<li><p><strong>delete_at</strong> – scheduled delete in UNIX seconds, int</p></li>
<li><p><strong>account</strong> – account name for the object</p></li>
<li><p><strong>container</strong> – container name for the object</p></li>
<li><p><strong>obj</strong> – object name</p></li>
<li><p><strong>request</strong> – the original request driving the update</p></li>
<li><p><strong>objdevice</strong> – device name that the object is in</p></li>
<li><p><strong>policy</strong> – the BaseStoragePolicy instance (used for tmp dir)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.get_diskfile">
<span class="sig-name descname"><span class="pre">get_diskfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.get_diskfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method for instantiating a DiskFile object supporting a given
REST API.</p>
<p>An implementation of the object server that wants to use a different
DiskFile class would simply over-ride this method to provide that
behavior.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.server_type">
<span class="sig-name descname"><span class="pre">server_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'object-server'</span></em><a class="headerlink" href="#swift.obj.server.ObjectController.server_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.server.ObjectController.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.ObjectController.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation specific setup. This method is called at the very end
by the constructor to allow a specific implementation to modify
existing attributes or add its own attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conf</strong> – WSGI configuration parameter</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.server.app_factory">
<span class="sig-prename descclassname"><span class="pre">swift.obj.server.</span></span><span class="sig-name descname"><span class="pre">app_factory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_conf</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">local_conf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.app_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>paste.deploy app factory for creating WSGI object server apps</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.server.drain">
<span class="sig-prename descclassname"><span class="pre">swift.obj.server.</span></span><span class="sig-name descname"><span class="pre">drain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_like</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.drain" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and discard any bytes from file_like.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_like</strong> – file-like object to read from</p></li>
<li><p><strong>read_size</strong> – how big a chunk to read at a time</p></li>
<li><p><strong>timeout</strong> – how long to wait for a read (use None for no timeout)</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.exceptions.ChunkReadTimeout" title="swift.common.exceptions.ChunkReadTimeout"><strong>ChunkReadTimeout</strong></a> – if no chunk was read in time</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.server.get_obj_name_and_placement">
<span class="sig-prename descclassname"><span class="pre">swift.obj.server.</span></span><span class="sig-name descname"><span class="pre">get_obj_name_and_placement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.get_obj_name_and_placement" title="Permalink to this definition">¶</a></dt>
<dd><p>Split and validate path for an object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> – a swob request</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple of path parts and storage policy</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.server.global_conf_callback">
<span class="sig-prename descclassname"><span class="pre">swift.obj.server.</span></span><span class="sig-name descname"><span class="pre">global_conf_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">preloaded_app_conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_conf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.global_conf_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback for swift.common.wsgi.run_wsgi during the global_conf
creation so that we can add our replication_semaphore, used to
limit the number of concurrent SSYNC_REQUESTS across all
workers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>preloaded_app_conf</strong> – The preloaded conf for the WSGI app.
This conf instance will go away, so
just read from it, don’t write.</p></li>
<li><p><strong>global_conf</strong> – The global conf that will eventually be
passed to the app_factory function later.
This conf is created before the worker
subprocesses are forked, so can be useful to
set up semaphores, shared memory, etc.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.server.iter_mime_headers_and_bodies">
<span class="sig-prename descclassname"><span class="pre">swift.obj.server.</span></span><span class="sig-name descname"><span class="pre">iter_mime_headers_and_bodies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wsgi_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mime_boundary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_chunk_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.server.iter_mime_headers_and_bodies" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-swift.obj.updater">
<span id="id6"></span><span id="object-updater"></span><h2>Object Updater<a class="headerlink" href="#module-swift.obj.updater" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.updater.BucketizedUpdateSkippingLimiter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.updater.</span></span><span class="sig-name descname"><span class="pre">BucketizedUpdateSkippingLimiter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update_iterable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_buckets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_elements_per_group_per_second</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_deferred_elements</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drain_until</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.BucketizedUpdateSkippingLimiter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrap an iterator to rate-limit updates on a per-bucket basis, where updates
are mapped to buckets by hashing their destination path. If an update is
rate-limited then it is placed on a deferral queue and may be sent later if
the wrapped iterator is exhausted before the <code class="docutils literal notranslate"><span class="pre">drain_until</span></code> time is
reached.</p>
<p>The deferral queue has constrained size and once the queue is full updates
are evicted using a first-in-first-out policy. This policy is used because
updates on the queue may have been made obsolete by newer updates written
to disk, and this is more likely for updates that have been on the queue
longest.</p>
<p>The iterator increments stats as follows:</p>
<ul class="simple">
<li><p>The <cite>deferrals</cite> stat is incremented for each update that is
rate-limited. Note that a individual update is rate-limited at most
once.</p></li>
<li><p>The <cite>skips</cite> stat is incremented for each rate-limited update that is
not eventually yielded. This includes updates that are evicted from the
deferral queue and all updates that remain in the deferral queue when
<code class="docutils literal notranslate"><span class="pre">drain_until</span></code> time is reached and the iterator terminates.</p></li>
<li><p>The <cite>drains</cite> stat is incremented for each rate-limited update that is
eventually yielded.</p></li>
</ul>
<p>Consequently, when this iterator terminates, the sum of <cite>skips</cite> and
<cite>drains</cite> is equal to the number of <cite>deferrals</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update_iterable</strong> – an async_pending update iterable</p></li>
<li><p><strong>logger</strong> – a logger instance</p></li>
<li><p><strong>stats</strong> – a SweepStats instance</p></li>
<li><p><strong>num_buckets</strong> – number of buckets to divide container hashes into, the
more buckets total the less containers to a bucket
(once a busy container slows down a bucket the whole
bucket starts deferring)</p></li>
<li><p><strong>max_elements_per_group_per_second</strong> – tunable, when deferring kicks in</p></li>
<li><p><strong>max_deferred_elements</strong> – maximum number of deferred elements before
skipping starts. Each bucket may defer updates, but once the total
number of deferred updates summed across all buckets reaches this
value then all buckets will skip subsequent updates.</p></li>
<li><p><strong>drain_until</strong> – time at which any remaining deferred elements must be
skipped and the iterator stops. Once the wrapped iterator has been
exhausted, this iterator will drain deferred elements from its buckets
until either all buckets have drained or this time is reached.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.updater.BucketizedUpdateSkippingLimiter.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.BucketizedUpdateSkippingLimiter.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.updater.ObjectUpdater">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.updater.</span></span><span class="sig-name descname"><span class="pre">ObjectUpdater</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.ObjectUpdater" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Daemon</span></code></p>
<p>Update object information in container listings.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.updater.ObjectUpdater.get_container_ring">
<span class="sig-name descname"><span class="pre">get_container_ring</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.ObjectUpdater.get_container_ring" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the container ring.  Load it, if it hasn’t been yet.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.updater.ObjectUpdater.object_sweep">
<span class="sig-name descname"><span class="pre">object_sweep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.ObjectUpdater.object_sweep" title="Permalink to this definition">¶</a></dt>
<dd><p>If there are async pendings on the device, walk each one and update.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>device</strong> – path to device</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.updater.ObjectUpdater.object_update">
<span class="sig-name descname"><span class="pre">object_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers_out</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.ObjectUpdater.object_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the object update to the container</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the container ring</p></li>
<li><p><strong>part</strong> – partition that holds the container</p></li>
<li><p><strong>op</strong> – operation performed (ex: ‘PUT’ or ‘DELETE’)</p></li>
<li><p><strong>obj</strong> – object name being updated</p></li>
<li><p><strong>headers_out</strong> – headers to send with the update</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple of (<code class="docutils literal notranslate"><span class="pre">success</span></code>, <code class="docutils literal notranslate"><span class="pre">node_id</span></code>, <code class="docutils literal notranslate"><span class="pre">redirect</span></code>)
where <code class="docutils literal notranslate"><span class="pre">success</span></code> is True if the update succeeded, <code class="docutils literal notranslate"><span class="pre">node_id</span></code> is
the_id of the node updated and <code class="docutils literal notranslate"><span class="pre">redirect</span></code> is either None or a
tuple of (a path, a timestamp string).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.updater.ObjectUpdater.process_object_update">
<span class="sig-name descname"><span class="pre">process_object_update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.ObjectUpdater.process_object_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the object information to be updated and update.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update_path</strong> – path to pickled object update file</p></li>
<li><p><strong>device</strong> – path to device</p></li>
<li><p><strong>policy</strong> – storage policy of object update</p></li>
<li><p><strong>update</strong> – the un-pickled update data</p></li>
<li><p><strong>kwargs</strong> – un-used keys from update_ctx</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.updater.ObjectUpdater.run_forever">
<span class="sig-name descname"><span class="pre">run_forever</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.ObjectUpdater.run_forever" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the updater continuously.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.updater.ObjectUpdater.run_once">
<span class="sig-name descname"><span class="pre">run_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.ObjectUpdater.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the updater once.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.updater.RateLimiterBucket">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.updater.</span></span><span class="sig-name descname"><span class="pre">RateLimiterBucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_updates_per_second</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.RateLimiterBucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">EventletRateLimiter</span></code></p>
<p>Extends EventletRateLimiter to also maintain a deque of items that have
been deferred due to rate-limiting, and to provide a comparator for sorting
instanced by readiness.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.obj.updater.SweepStats">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.obj.updater.</span></span><span class="sig-name descname"><span class="pre">SweepStats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failures</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quarantines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">successes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unlinks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">redirects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skips</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deferrals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drains</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.SweepStats" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Stats bucket for an update sweep</p>
<p>A measure of the rate at which updates are being rate-limited is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">deferrals</span> <span class="o">/</span> <span class="p">(</span><span class="n">deferrals</span> <span class="o">+</span> <span class="n">successes</span> <span class="o">+</span> <span class="n">failures</span> <span class="o">-</span> <span class="n">drains</span><span class="p">)</span>
</pre></div>
</div>
<p>A measure of the rate at which updates are not being sent during a sweep
is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">skips</span> <span class="o">/</span> <span class="p">(</span><span class="n">skips</span> <span class="o">+</span> <span class="n">successes</span> <span class="o">+</span> <span class="n">failures</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.updater.SweepStats.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.SweepStats.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.updater.SweepStats.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.SweepStats.reset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.obj.updater.SweepStats.since">
<span class="sig-name descname"><span class="pre">since</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.SweepStats.since" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.updater.random">
<span class="sig-prename descclassname"><span class="pre">swift.obj.updater.</span></span><span class="sig-name descname"><span class="pre">random</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">interval</span> <span class="pre">[0,</span> <span class="pre">1).</span></span></span><a class="headerlink" href="#swift.obj.updater.random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.obj.updater.split_update_path">
<span class="sig-prename descclassname"><span class="pre">swift.obj.updater.</span></span><span class="sig-name descname"><span class="pre">split_update_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.obj.updater.split_update_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Split the account and container parts out of the async update data.</p>
<p>N.B. updates to shards set the container_path key while the account and
container keys are always the root.</p>
</dd></dl>

</section>
</section>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="db.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Account DB and Container DB"></i></a>
          
          
            <a href="misc.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Misc"></i></a>
          
          <a id="pdfLink2" href="" target="_blank" title="Download the manuals as PDF"><i class="fa fa-file-pdf-o" data-toggle="tooltip" data-placement="top" title="Download PDF"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">this page last updated: 2017-07-26 12:53:46</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="https://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the
                 document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="OpenStack Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/id/">Bahasa Indonesia (Indonesian)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/it/">Italiano (Italian)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/tr_TR/">Türkçe (Türkiye)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Swift 0.1.0.dev10161</h4></a>
      <ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/object_api_v1_overview.html">Object Storage API overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_architecture.html">Swift Architectural Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_ring.html">The Rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_policies.html">Storage Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_reaper.html">The Account Reaper</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_auth.html">The Auth System</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_acl.html">Access Control Lists (ACLs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_replication.html">Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="ratelimit.html">Rate Limiting</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_large_objects.html">Large Object Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_global_cluster.html">Global Clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_container_sync.html">Container to Container Synchronization</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_expiring_objects.html">Expiring Object Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="cors.html">CORS</a></li>
<li class="toctree-l1"><a class="reference internal" href="crossdomain.html">Cross-domain Policy File</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_erasure_code.html">Erasure Code Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_encryption.html">Object Encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_backing_store.html">Using Swift as Backing Store for Service Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_container_sharding.html">Container Sharding</a></li>
<li class="toctree-l1"><a class="reference internal" href="ring_background.html">Building a Consistent Hashing Ring</a></li>
<li class="toctree-l1"><a class="reference internal" href="ring_partpower.html">Modifying Ring Partition Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="associated_projects.html">Associated Projects</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html">Contributing to OpenStack Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#swift-design-principles">Swift Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#recommended-workflow">Recommended workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#notes-on-testing">Notes on Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#ideas">Ideas</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#community">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/review_guidelines.html">Review Guidelines</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="development_guidelines.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_saio.html">SAIO (Swift All In One)</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_contribution_swift.html">First Contribution to Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="policies_saio.html">Adding Storage Policies to an Existing SAIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_auth.html">Auth Server and Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_middleware.html">Middleware and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_ondisk_backends.html">Pluggable On-Disk Back-end APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_watchers.html">Auditor Watchers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="deployment_guide.html">Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_deployment_guide.html">Apache Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin_guide.html">Administrator’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="replication_network.html">Dedicated replication network</a></li>
<li class="toctree-l1"><a class="reference internal" href="logs.html">Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ops_runbook/index.html">Swift Ops Runbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin/index.html">OpenStack Swift Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="install/index.html">Object Storage Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="config/index.html">Configuration Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/object_api_v1_overview.html">Object Storage API overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/discoverability.html">Discoverability</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/container_quotas.html">Container quotas</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/object_versioning.html">Object versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/large_objects.html">Large objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/temporary_url_middleware.html">Temporary URL middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/form_post_middleware.html">Form POST middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/use_content-encoding_metadata.html">Use Content-Encoding metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/use_the_content-disposition_metadata.html">Use the Content-Disposition metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/pseudo-hierarchical-folders-directories.html">Pseudo-hierarchical folders and directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/pagination.html">Page through large lists of containers or objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/serialized-response-formats.html">Serialized response formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/static-website.html">Create static website</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/object-expiration.html">Object expiration</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/bulk-delete.html">Bulk delete</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="s3_compat.html">S3/Swift REST API Comparison Matrix</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ring.html">Partitioned Consistent Hash Ring</a></li>
<li class="toctree-l1"><a class="reference internal" href="proxy.html">Proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="account.html">Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="container.html">Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="db.html">Account DB and Container DB</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Object</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.obj.auditor">Object Auditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.obj.diskfile">Object Backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.obj.replicator">Object Replicator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.obj.reconstructor">Object Reconstructor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.obj.server">Object Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.obj.updater">Object Updater</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="audit_watchers.html">Object Audit Watchers</a></li>
</ul>

    </div>

  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="local-table-of-contents">
      <h4 class="docs-sidebar-section-title">Page Contents</h4>
      <ul>
<li><a class="reference internal" href="#">Object</a><ul>
<li><a class="reference internal" href="#module-swift.obj.auditor">Object Auditor</a><ul>
<li><a class="reference internal" href="#swift.obj.auditor.AuditorWorker"><code class="docutils literal notranslate"><span class="pre">AuditorWorker</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.auditor.AuditorWorker.audit_all_objects"><code class="docutils literal notranslate"><span class="pre">AuditorWorker.audit_all_objects()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.AuditorWorker.create_recon_nested_dict"><code class="docutils literal notranslate"><span class="pre">AuditorWorker.create_recon_nested_dict()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.AuditorWorker.failsafe_object_audit"><code class="docutils literal notranslate"><span class="pre">AuditorWorker.failsafe_object_audit()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.AuditorWorker.object_audit"><code class="docutils literal notranslate"><span class="pre">AuditorWorker.object_audit()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.AuditorWorker.record_stats"><code class="docutils literal notranslate"><span class="pre">AuditorWorker.record_stats()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.auditor.ObjectAuditor"><code class="docutils literal notranslate"><span class="pre">ObjectAuditor</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.auditor.ObjectAuditor.audit_loop"><code class="docutils literal notranslate"><span class="pre">ObjectAuditor.audit_loop()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.ObjectAuditor.clear_recon_cache"><code class="docutils literal notranslate"><span class="pre">ObjectAuditor.clear_recon_cache()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.ObjectAuditor.fork_child"><code class="docutils literal notranslate"><span class="pre">ObjectAuditor.fork_child()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.ObjectAuditor.run_audit"><code class="docutils literal notranslate"><span class="pre">ObjectAuditor.run_audit()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.ObjectAuditor.run_forever"><code class="docutils literal notranslate"><span class="pre">ObjectAuditor.run_forever()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.ObjectAuditor.run_once"><code class="docutils literal notranslate"><span class="pre">ObjectAuditor.run_once()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.auditor.WatcherWrapper"><code class="docutils literal notranslate"><span class="pre">WatcherWrapper</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.auditor.WatcherWrapper.end"><code class="docutils literal notranslate"><span class="pre">WatcherWrapper.end()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.WatcherWrapper.see_object"><code class="docutils literal notranslate"><span class="pre">WatcherWrapper.see_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.auditor.WatcherWrapper.start"><code class="docutils literal notranslate"><span class="pre">WatcherWrapper.start()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.obj.diskfile">Object Backend</a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.AuditLocation"><code class="docutils literal notranslate"><span class="pre">AuditLocation</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.account"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.account</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.container"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.container</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.content_length"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.content_length</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.content_type"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.content_type</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.content_type_timestamp"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.content_type_timestamp</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.create"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.create()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.data_timestamp"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.data_timestamp</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.delete"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.delete()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.durable_timestamp"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.durable_timestamp</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.fragments"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.fragments</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.from_hash_dir"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.from_hash_dir()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.get_datafile_metadata"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.get_datafile_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.get_metadata"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.get_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.get_metafile_metadata"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.get_metafile_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.manager"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.manager</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.obj"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.obj</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.open"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.open()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.read_metadata"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.read_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.reader"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.reader()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.reader_cls"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.reader_cls</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.timestamp"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.timestamp</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.validate_metadata"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.validate_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.write_metadata"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.write_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.writer"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.writer()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFile.writer_cls"><code class="docutils literal notranslate"><span class="pre">BaseDiskFile.writer_cls</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.check_policy"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.check_policy()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.cleanup_ondisk_files"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.cleanup_ondisk_files()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.clear_auditor_status"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.clear_auditor_status()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.consolidate_hashes"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.consolidate_hashes()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.construct_dev_path"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.construct_dev_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.diskfile_cls"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.diskfile_cls</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.get_dev_path"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.get_dev_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.get_diskfile"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.get_diskfile()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.get_diskfile_and_filenames_from_hash"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.get_diskfile_and_filenames_from_hash()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.get_diskfile_from_audit_location"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.get_diskfile_from_audit_location()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.get_diskfile_from_hash"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.get_diskfile_from_hash()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.get_hashes"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.get_hashes()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.get_ondisk_files"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.get_ondisk_files()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.invalidate_hash"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.invalidate_hash()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.make_on_disk_filename"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.make_on_disk_filename()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.object_audit_location_generator"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.object_audit_location_generator()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.parse_on_disk_filename"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.parse_on_disk_filename()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.partition_lock"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.partition_lock()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.pickle_async_update"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.pickle_async_update()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.policy"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.policy</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.quarantine_renamer"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.quarantine_renamer()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.replication_lock"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.replication_lock()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.yield_hashes"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.yield_hashes()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileManager.yield_suffixes"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileManager.yield_suffixes()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileReader"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileReader</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileReader.app_iter_range"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileReader.app_iter_range()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileReader.app_iter_ranges"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileReader.app_iter_ranges()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileReader.can_zero_copy_send"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileReader.can_zero_copy_send()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileReader.close"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileReader.close()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileReader.manager"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileReader.manager</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileReader.zero_copy_send"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileReader.zero_copy_send()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileWriter</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter.chunks_finished"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileWriter.chunks_finished()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter.close"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileWriter.close()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter.commit"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileWriter.commit()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter.logger"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileWriter.logger</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter.manager"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileWriter.manager</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter.open"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileWriter.open()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter.put"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileWriter.put()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.BaseDiskFileWriter.write"><code class="docutils literal notranslate"><span class="pre">BaseDiskFileWriter.write()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.diskfile.DiskFile"><code class="docutils literal notranslate"><span class="pre">DiskFile</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.DiskFile.reader_cls"><code class="docutils literal notranslate"><span class="pre">DiskFile.reader_cls</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.DiskFile.writer_cls"><code class="docutils literal notranslate"><span class="pre">DiskFile.writer_cls</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.diskfile.DiskFileManager"><code class="docutils literal notranslate"><span class="pre">DiskFileManager</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.DiskFileManager.diskfile_cls"><code class="docutils literal notranslate"><span class="pre">DiskFileManager.diskfile_cls</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.DiskFileManager.policy"><code class="docutils literal notranslate"><span class="pre">DiskFileManager.policy</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.diskfile.DiskFileReader"><code class="docutils literal notranslate"><span class="pre">DiskFileReader</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.DiskFileRouter"><code class="docutils literal notranslate"><span class="pre">DiskFileRouter</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.DiskFileWriter"><code class="docutils literal notranslate"><span class="pre">DiskFileWriter</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.DiskFileWriter.put"><code class="docutils literal notranslate"><span class="pre">DiskFileWriter.put()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFile"><code class="docutils literal notranslate"><span class="pre">ECDiskFile</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFile.durable_timestamp"><code class="docutils literal notranslate"><span class="pre">ECDiskFile.durable_timestamp</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFile.fragments"><code class="docutils literal notranslate"><span class="pre">ECDiskFile.fragments</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFile.purge"><code class="docutils literal notranslate"><span class="pre">ECDiskFile.purge()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFile.reader_cls"><code class="docutils literal notranslate"><span class="pre">ECDiskFile.reader_cls</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFile.validate_metadata"><code class="docutils literal notranslate"><span class="pre">ECDiskFile.validate_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFile.writer_cls"><code class="docutils literal notranslate"><span class="pre">ECDiskFile.writer_cls</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFileManager"><code class="docutils literal notranslate"><span class="pre">ECDiskFileManager</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFileManager.diskfile_cls"><code class="docutils literal notranslate"><span class="pre">ECDiskFileManager.diskfile_cls</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFileManager.make_on_disk_filename"><code class="docutils literal notranslate"><span class="pre">ECDiskFileManager.make_on_disk_filename()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFileManager.parse_on_disk_filename"><code class="docutils literal notranslate"><span class="pre">ECDiskFileManager.parse_on_disk_filename()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFileManager.policy"><code class="docutils literal notranslate"><span class="pre">ECDiskFileManager.policy</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFileManager.validate_fragment_index"><code class="docutils literal notranslate"><span class="pre">ECDiskFileManager.validate_fragment_index()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFileReader"><code class="docutils literal notranslate"><span class="pre">ECDiskFileReader</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFileWriter"><code class="docutils literal notranslate"><span class="pre">ECDiskFileWriter</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFileWriter.commit"><code class="docutils literal notranslate"><span class="pre">ECDiskFileWriter.commit()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.ECDiskFileWriter.put"><code class="docutils literal notranslate"><span class="pre">ECDiskFileWriter.put()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.diskfile.clear_auditor_status"><code class="docutils literal notranslate"><span class="pre">clear_auditor_status()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.consolidate_hashes"><code class="docutils literal notranslate"><span class="pre">consolidate_hashes()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.extract_policy"><code class="docutils literal notranslate"><span class="pre">extract_policy()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.get_async_dir"><code class="docutils literal notranslate"><span class="pre">get_async_dir()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.get_auditor_status"><code class="docutils literal notranslate"><span class="pre">get_auditor_status()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.get_data_dir"><code class="docutils literal notranslate"><span class="pre">get_data_dir()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.get_part_path"><code class="docutils literal notranslate"><span class="pre">get_part_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.get_tmp_dir"><code class="docutils literal notranslate"><span class="pre">get_tmp_dir()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.invalidate_hash"><code class="docutils literal notranslate"><span class="pre">invalidate_hash()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.object_audit_location_generator"><code class="docutils literal notranslate"><span class="pre">object_audit_location_generator()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.quarantine_renamer"><code class="docutils literal notranslate"><span class="pre">quarantine_renamer()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.read_hashes"><code class="docutils literal notranslate"><span class="pre">read_hashes()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.read_metadata"><code class="docutils literal notranslate"><span class="pre">read_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.relink_paths"><code class="docutils literal notranslate"><span class="pre">relink_paths()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.update_auditor_status"><code class="docutils literal notranslate"><span class="pre">update_auditor_status()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.valid_suffix"><code class="docutils literal notranslate"><span class="pre">valid_suffix()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.write_hashes"><code class="docutils literal notranslate"><span class="pre">write_hashes()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.diskfile.write_metadata"><code class="docutils literal notranslate"><span class="pre">write_metadata()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.obj.replicator">Object Replicator</a><ul>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.aggregate_recon_update"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.aggregate_recon_update()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.build_replication_jobs"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.build_replication_jobs()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.check_ring"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.check_ring()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.collect_jobs"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.collect_jobs()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.delete_handoff_objs"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.delete_handoff_objs()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.delete_partition"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.delete_partition()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.get_local_devices"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.get_local_devices()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.get_worker_args"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.get_worker_args()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.heartbeat"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.heartbeat()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.is_healthy"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.is_healthy()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.load_object_ring"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.load_object_ring()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.post_multiprocess_run"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.post_multiprocess_run()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.replicate"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.replicate()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.rsync"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.rsync()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.run_forever"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.run_forever()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.run_once"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.run_once()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.ssync"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.ssync()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.stats_line"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.stats_line()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.sync"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.sync()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.total_stats"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.total_stats</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.update"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.update()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.update_deleted"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.update_deleted()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.ObjectReplicator.update_recon"><code class="docutils literal notranslate"><span class="pre">ObjectReplicator.update_recon()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.replicator.Stats"><code class="docutils literal notranslate"><span class="pre">Stats</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.replicator.Stats.add_failure_stats"><code class="docutils literal notranslate"><span class="pre">Stats.add_failure_stats()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.Stats.fields"><code class="docutils literal notranslate"><span class="pre">Stats.fields</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.Stats.from_recon"><code class="docutils literal notranslate"><span class="pre">Stats.from_recon()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.replicator.Stats.to_recon"><code class="docutils literal notranslate"><span class="pre">Stats.to_recon()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.Sender"><code class="docutils literal notranslate"><span class="pre">Sender</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.ssync_sender.Sender.connect"><code class="docutils literal notranslate"><span class="pre">Sender.connect()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.Sender.disconnect"><code class="docutils literal notranslate"><span class="pre">Sender.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.Sender.missing_check"><code class="docutils literal notranslate"><span class="pre">Sender.missing_check()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.Sender.send_delete"><code class="docutils literal notranslate"><span class="pre">Sender.send_delete()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.Sender.send_post"><code class="docutils literal notranslate"><span class="pre">Sender.send_post()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.Sender.send_put"><code class="docutils literal notranslate"><span class="pre">Sender.send_put()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.Sender.send_subrequest"><code class="docutils literal notranslate"><span class="pre">Sender.send_subrequest()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.Sender.updates"><code class="docutils literal notranslate"><span class="pre">Sender.updates()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.SsyncBufferedHTTPConnection"><code class="docutils literal notranslate"><span class="pre">SsyncBufferedHTTPConnection</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.ssync_sender.SsyncBufferedHTTPConnection.response_class"><code class="docutils literal notranslate"><span class="pre">SsyncBufferedHTTPConnection.response_class</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.SsyncBufferedHTTPResponse"><code class="docutils literal notranslate"><span class="pre">SsyncBufferedHTTPResponse</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.ssync_sender.SsyncBufferedHTTPResponse.readline"><code class="docutils literal notranslate"><span class="pre">SsyncBufferedHTTPResponse.readline()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.decode_wanted"><code class="docutils literal notranslate"><span class="pre">decode_wanted()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_sender.encode_missing"><code class="docutils literal notranslate"><span class="pre">encode_missing()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_receiver.Receiver"><code class="docutils literal notranslate"><span class="pre">Receiver</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.ssync_receiver.Receiver.initialize_request"><code class="docutils literal notranslate"><span class="pre">Receiver.initialize_request()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_receiver.Receiver.missing_check"><code class="docutils literal notranslate"><span class="pre">Receiver.missing_check()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_receiver.Receiver.updates"><code class="docutils literal notranslate"><span class="pre">Receiver.updates()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.ssync_receiver.SsyncClientDisconnected"><code class="docutils literal notranslate"><span class="pre">SsyncClientDisconnected</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_receiver.decode_missing"><code class="docutils literal notranslate"><span class="pre">decode_missing()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.ssync_receiver.encode_wanted"><code class="docutils literal notranslate"><span class="pre">encode_wanted()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.obj.reconstructor">Object Reconstructor</a><ul>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.aggregate_recon_update"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.aggregate_recon_update()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.build_reconstruction_jobs"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.build_reconstruction_jobs()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.check_ring"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.check_ring()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.collect_parts"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.collect_parts()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.delete_partition"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.delete_partition()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.delete_reverted_objs"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.delete_reverted_objs()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.detect_lockups"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.detect_lockups()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.final_recon_dump"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.final_recon_dump()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.get_local_devices"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.get_local_devices()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.get_policy2devices"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.get_policy2devices()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.get_suffix_delta"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.get_suffix_delta()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.get_worker_args"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.get_worker_args()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.heartbeat"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.heartbeat()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.is_healthy"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.is_healthy()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.kill_coros"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.kill_coros()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.load_object_ring"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.load_object_ring()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.make_rebuilt_fragment_iter"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.make_rebuilt_fragment_iter()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.post_multiprocess_run"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.post_multiprocess_run()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.process_job"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.process_job()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.reconstruct"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.reconstruct()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.reconstruct_fa"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.reconstruct_fa()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.run_forever"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.run_forever()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.run_once"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.run_once()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ObjectReconstructor.stats_line"><code class="docutils literal notranslate"><span class="pre">ObjectReconstructor.stats_line()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.reconstructor.RebuildingECDiskFileStream"><code class="docutils literal notranslate"><span class="pre">RebuildingECDiskFileStream</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.reconstructor.RebuildingECDiskFileStream.content_length"><code class="docutils literal notranslate"><span class="pre">RebuildingECDiskFileStream.content_length</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.RebuildingECDiskFileStream.get_datafile_metadata"><code class="docutils literal notranslate"><span class="pre">RebuildingECDiskFileStream.get_datafile_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.RebuildingECDiskFileStream.get_metadata"><code class="docutils literal notranslate"><span class="pre">RebuildingECDiskFileStream.get_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.reconstructor.RebuildingECDiskFileStream.reader"><code class="docutils literal notranslate"><span class="pre">RebuildingECDiskFileStream.reader()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.reconstructor.ResponseBucket"><code class="docutils literal notranslate"><span class="pre">ResponseBucket</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.obj.server">Object Server</a><ul>
<li><a class="reference internal" href="#swift.obj.server.EventletPlungerString"><code class="docutils literal notranslate"><span class="pre">EventletPlungerString</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController"><code class="docutils literal notranslate"><span class="pre">ObjectController</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.DELETE"><code class="docutils literal notranslate"><span class="pre">ObjectController.DELETE()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.GET"><code class="docutils literal notranslate"><span class="pre">ObjectController.GET()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.HEAD"><code class="docutils literal notranslate"><span class="pre">ObjectController.HEAD()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.POST"><code class="docutils literal notranslate"><span class="pre">ObjectController.POST()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.PUT"><code class="docutils literal notranslate"><span class="pre">ObjectController.PUT()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.REPLICATE"><code class="docutils literal notranslate"><span class="pre">ObjectController.REPLICATE()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.SSYNC"><code class="docutils literal notranslate"><span class="pre">ObjectController.SSYNC()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.async_update"><code class="docutils literal notranslate"><span class="pre">ObjectController.async_update()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.container_update"><code class="docutils literal notranslate"><span class="pre">ObjectController.container_update()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.delete_at_update"><code class="docutils literal notranslate"><span class="pre">ObjectController.delete_at_update()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.get_diskfile"><code class="docutils literal notranslate"><span class="pre">ObjectController.get_diskfile()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.server_type"><code class="docutils literal notranslate"><span class="pre">ObjectController.server_type</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.ObjectController.setup"><code class="docutils literal notranslate"><span class="pre">ObjectController.setup()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.server.app_factory"><code class="docutils literal notranslate"><span class="pre">app_factory()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.drain"><code class="docutils literal notranslate"><span class="pre">drain()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.get_obj_name_and_placement"><code class="docutils literal notranslate"><span class="pre">get_obj_name_and_placement()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.global_conf_callback"><code class="docutils literal notranslate"><span class="pre">global_conf_callback()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.server.iter_mime_headers_and_bodies"><code class="docutils literal notranslate"><span class="pre">iter_mime_headers_and_bodies()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.obj.updater">Object Updater</a><ul>
<li><a class="reference internal" href="#swift.obj.updater.BucketizedUpdateSkippingLimiter"><code class="docutils literal notranslate"><span class="pre">BucketizedUpdateSkippingLimiter</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.updater.BucketizedUpdateSkippingLimiter.next"><code class="docutils literal notranslate"><span class="pre">BucketizedUpdateSkippingLimiter.next()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.updater.ObjectUpdater"><code class="docutils literal notranslate"><span class="pre">ObjectUpdater</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.updater.ObjectUpdater.get_container_ring"><code class="docutils literal notranslate"><span class="pre">ObjectUpdater.get_container_ring()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.updater.ObjectUpdater.object_sweep"><code class="docutils literal notranslate"><span class="pre">ObjectUpdater.object_sweep()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.updater.ObjectUpdater.object_update"><code class="docutils literal notranslate"><span class="pre">ObjectUpdater.object_update()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.updater.ObjectUpdater.process_object_update"><code class="docutils literal notranslate"><span class="pre">ObjectUpdater.process_object_update()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.updater.ObjectUpdater.run_forever"><code class="docutils literal notranslate"><span class="pre">ObjectUpdater.run_forever()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.updater.ObjectUpdater.run_once"><code class="docutils literal notranslate"><span class="pre">ObjectUpdater.run_once()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.updater.RateLimiterBucket"><code class="docutils literal notranslate"><span class="pre">RateLimiterBucket</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.updater.SweepStats"><code class="docutils literal notranslate"><span class="pre">SweepStats</span></code></a><ul>
<li><a class="reference internal" href="#swift.obj.updater.SweepStats.copy"><code class="docutils literal notranslate"><span class="pre">SweepStats.copy()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.updater.SweepStats.reset"><code class="docutils literal notranslate"><span class="pre">SweepStats.reset()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.updater.SweepStats.since"><code class="docutils literal notranslate"><span class="pre">SweepStats.since()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.obj.updater.random"><code class="docutils literal notranslate"><span class="pre">random()</span></code></a></li>
<li><a class="reference internal" href="#swift.obj.updater.split_update_path"><code class="docutils literal notranslate"><span class="pre">split_update_path()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
  </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="https://openstack.org/projects/">Projects</a></li>
          <li><a href="https://www.openstack.org/software/security/">OpenStack Security</a></li>
          <li><a href="https://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="https://openstack.org/blog/">Blog</a></li>g
          <li><a href="https://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="https://openstack.org/community/">User Groups</a></li>
          <li><a href="https://openstack.org/community/events/">Events</a></li>
          <li><a href="https://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="https://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="https://docs.openstack.org/contributors">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="https://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="https://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="https://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="https://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="https://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="https://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="https://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-3.2.1.min.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.min.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- standard sphinx include libraries, which allow search highlighting -->
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="_static/searchtools.js"></script>
<script type="text/javascript" src="_static/language_data.js"></script>

<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.1.0.dev10161',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      LINK_SUFFIX: '.html',
      SOURCELINK_SUFFIX: '.txt',
      HAS_SOURCE:  true
    };
</script>

<!-- Javascript for page -->
<script language="JavaScript">
  /* Build a description of this page including SHA, source location on git
   * repo, build time and the project's launchpad bug tag. Set the HREF of the
   * bug buttons
   */
    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
    /* "giturl" is the URL of the source file on Git and is auto-generated by
     * openstackdocstheme.
     *
     * "pagename" is a standard sphinx parameter containing the name of
     * the source file, without extension.
     */

    var sourceFile = "object" + ".rst";
    gitURL = "Source: https://opendev.org/openstack/swift/src/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 97f10284ddd54c8f5f21c6d23d1dbd330a252cfb";
    var repositoryName = "openstack/swift";
    var bugProject = "swift";
    var bugTitle = "Object in Swift";
    var fieldTags = "";
    var useStoryboard = "";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.1.0.dev10161 on 2017-07-26 12:53:46";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags, repositoryName, useStoryboard);
    var currentSourceFile = "object";
    var pdfFileName = "doc-swift.pdf";
    pdfLink(currentSourceFile, pdfFileName);
</script>


  </body>
</html>