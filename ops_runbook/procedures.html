
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Software configuration procedures &#8212; Swift 0.1.0.dev10162 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/basic.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="canonical" href="/openstack-swift/ops_runbook/procedures.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Server maintenance" href="maintenance.html" />
    <link rel="prev" title="Identifying issues and resolutions" href="diagnose.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.min.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">

<!-- Search CSS -->
<link href="../_static/css/search.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/pygments.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


  </head><body>

<!-- SOURCE_FILE: https://opendev.org/openstack/swift/src/doc/source/ops_runbook/procedures.rst -->

<script>
    (function (window, document) {
        var loader = function () {
            var script = document.createElement("script"), tag = document.getElementsByTagName("script")[0];
            script.src = "https://search.openstack.org/widget/embed.min.js?t="+Date.now();
            tag.parentNode.insertBefore(script, tag);
        };
        window.addEventListener ? window.addEventListener("load", loader, false) : window.attachEvent("onload", loader);
    })(window, document);
</script>

<nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="https://www.openstack.org/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
    <div class="openstack-search-bar" data-baseUrl="search.openstack.org" data-context="docs-openstack"></div>
</div>
      <ul class="nav navbar-nav navbar-main show">
        <li class="search-container-mobile">
    <div class="openstack-search-bar" data-baseUrl="search.openstack.org" data-context="docs-openstack"></div>
</li>
        <li> <!--Software -->
          <a href="https://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/openstack-components">OpenStack Components</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/sdks">SDKs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/deployment-tools">Deployment Tools</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/assets/software/projectmap/openstack-map.pdf" target="_blank">OpenStack Map</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
          </ul>
        </li>
        <li> <!-- Use Cases -->
          <a href="https://www.openstack.org/use-cases/" class="drop" id="dropdownMenuUsers">Use Cases <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/">Users in Production</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/bare-metal/">Ironic Bare Metal</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/edge-computing/">Edge Computing</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/telecoms-and-nfv/">Telecom & NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/science/">Science and HPC</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/containers/">Containers</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/enterprise/">Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li> <!-- Events -->
          <a href="https://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">Open Infrastructure Summits</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/ptg/">Project Teams Gathering</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/opendev-2020/">OpenDev</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/community-events/">Community Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/openstackdays">OpenStack & OpenInfra Days</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
          </ul>
        </li>
        <li><!-- Community -->
          <a href="https://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/tech-committee">OpenStack Technical Committee</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/coa/">Get Certified (COA)</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketing/">Marketing Resources</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/news/">Community News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/supporting-organizations/">OpenInfra Foundation Supporting Organizations</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev">Open Infrastructure Foundation (OpenInfra Foundation)</a></li>
          </ul>
        </li>
        <li><!-- Marketplace -->
          <a href="https://www.openstack.orgmarketplace/" class="drop" id="dropdownMenuLearn">Marketplace <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/distros/">Distros & Appliances</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/public-clouds/">Public Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/hosted-private-clouds/">Hosted Private Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/remotely-managed-private-clouds/">Remotely Managed Private Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/consulting/">Consulting & Integrators</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/drivers/">Drivers</a></li>
          </ul>
        </li>
        <li><!-- Blog -->
          <a href="https://www.openstack.org/blog/">Blog</a>
        </li>
        <li><!-- Docs -->
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
        <li> <!-- Join -->
            <li class="join-nav-section">
              <a href="https://openinfra.dev/join/" id="dropdownMenuJoin">Join <i class="fa fa-caret-down"></i></a>
              <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuJoin" style="display: none;">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev/join/">Sign up for Foundation Membership</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev/join/">Sponsor the Foundation</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev">More about the Foundation</a></li>
              </ul>
            </li>
            <li>
              <a href="https://www.openstack.org/Security/login/?BackURL=/home/" class="sign-in-btn">Log In</a>
            </li>
        </li>
      </ul>
    </div>
  </div>
  <!-- /.container -->
</nav>

    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row docs-title">
  <div class="col-lg-8">
      <h1>Software configuration procedures</h1>
    
  </div>
  <div class="docs-actions">
    
    <a href="diagnose.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Identifying issues and resolutions"></i></a>
    
    
    <a href="maintenance.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Server maintenance"></i></a>
    
    <a id="pdfLink1" href="" target="_blank" title="Download the manuals as PDF"><i class="fa fa-file-pdf-o" data-toggle="tooltip" data-placement="top" title="Download PDF"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
    
  </div>
</div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-body" role="main">

  <section id="software-configuration-procedures">
<h1>Software configuration procedures<a class="headerlink" href="#software-configuration-procedures" title="Permalink to this heading">¶</a></h1>
<section id="fix-broken-gpt-table-broken-disk-partition">
<span id="fix-broken-gpt-table"></span><h2>Fix broken GPT table (broken disk partition)<a class="headerlink" href="#fix-broken-gpt-table-broken-disk-partition" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>If a GPT table is broken, a message like the following should be
observed when the command…</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>parted<span class="w"> </span>-l
</pre></div>
</div>
</li>
<li><p>… is run.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">...</span>
<span class="go">Error: The backup GPT table is corrupt, but the primary appears OK, so that will</span>
<span class="go">be used.</span>
<span class="go">OK/Cancel?</span>
</pre></div>
</div>
</li>
</ul>
<ol class="arabic">
<li><p>To fix this, firstly install the <code class="docutils literal notranslate"><span class="pre">gdisk</span></code> program to fix this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>aptitude<span class="w"> </span>install<span class="w"> </span>gdisk
</pre></div>
</div>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">gdisk</span></code> for the particular drive with the damaged partition:</p>
</li>
<li><p>On the command prompt, type <code class="docutils literal notranslate"><span class="pre">r</span></code> (recovery and transformation
options), followed by <code class="docutils literal notranslate"><span class="pre">d</span></code> (use main GPT header) , <code class="docutils literal notranslate"><span class="pre">v</span></code> (verify disk)
and finally <code class="docutils literal notranslate"><span class="pre">w</span></code> (write table to disk and exit). Will also need to
enter <code class="docutils literal notranslate"><span class="pre">Y</span></code> when prompted in order to confirm actions.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Command (? for help): r</span>

<span class="go">Recovery/transformation command (? for help): d</span>

<span class="go">Recovery/transformation command (? for help): v</span>

<span class="go">Caution: The CRC for the backup partition table is invalid. This table may</span>
<span class="go">be corrupt. This program will automatically create a new backup partition</span>
<span class="go">table when you save your partitions.</span>

<span class="go">Caution: Partition 1 doesn&#39;t begin on a 8-sector boundary. This may</span>
<span class="go">result in degraded performance on some modern (2009 and later) hard disks.</span>

<span class="go">Caution: Partition 2 doesn&#39;t begin on a 8-sector boundary. This may</span>
<span class="go">result in degraded performance on some modern (2009 and later) hard disks.</span>

<span class="go">Caution: Partition 3 doesn&#39;t begin on a 8-sector boundary. This may</span>
<span class="go">result in degraded performance on some modern (2009 and later) hard disks.</span>

<span class="go">Identified 1 problems!</span>

<span class="go">Recovery/transformation command (? for help): w</span>

<span class="go">Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING</span>
<span class="go">PARTITIONS!!</span>

<span class="go">Do you want to proceed, possibly destroying your data? (Y/N): Y</span>

<span class="go">OK; writing new GUID partition table (GPT).</span>
<span class="go">The operation has completed successfully.</span>
</pre></div>
</div>
</li>
<li><p>Running the command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>parted<span class="w"> </span>/dev/sd#
</pre></div>
</div>
</li>
<li><p>Should now show that the partition is recovered and healthy again.</p></li>
<li><p>Finally, uninstall <code class="docutils literal notranslate"><span class="pre">gdisk</span></code> from the node:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>aptitude<span class="w"> </span>remove<span class="w"> </span>gdisk
</pre></div>
</div>
</li>
</ol>
</section>
<section id="procedure-fix-broken-xfs-filesystem">
<span id="fix-broken-xfs-filesystem"></span><h2>Procedure: Fix broken XFS filesystem<a class="headerlink" href="#procedure-fix-broken-xfs-filesystem" title="Permalink to this heading">¶</a></h2>
<ol class="arabic">
<li><p>A filesystem may be corrupt or broken if the following output is
observed when checking its label:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>xfs_admin<span class="w"> </span>-l<span class="w"> </span>/dev/sd#
<span class="go">cache_node_purge: refcount was 1, not zero (node=0x25d5ee0)</span>
<span class="go">xfs_admin: cannot read root inode (117)</span>
<span class="go">cache_node_purge: refcount was 1, not zero (node=0x25d92b0)</span>
<span class="go">xfs_admin: cannot read realtime bitmap inode (117)</span>
<span class="go">bad sb magic # 0 in AG 1</span>
<span class="go">failed to read label in AG 1</span>
</pre></div>
</div>
</li>
<li><p>Run the following commands to remove the broken/corrupt filesystem and replace.
(This example uses the filesystem <code class="docutils literal notranslate"><span class="pre">/dev/sdb2</span></code>) Firstly need to replace the partition:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>parted
<span class="go">GNU Parted 2.3</span>
<span class="go">Using /dev/sda</span>
<span class="go">Welcome to GNU Parted! Type &#39;help&#39; to view a list of commands.</span>
<span class="gp gp-VirtualEnv">(parted)</span> <span class="go">select /dev/sdb</span>
<span class="go">Using /dev/sdb</span>
<span class="gp gp-VirtualEnv">(parted)</span> <span class="go">p</span>
<span class="go">Model: HP LOGICAL VOLUME (scsi)</span>
<span class="go">Disk /dev/sdb: 2000GB</span>
<span class="go">Sector size (logical/physical): 512B/512B</span>
<span class="go">Partition Table: gpt</span>

<span class="go">Number  Start   End     Size    File system  Name   Flags</span>
<span class="go">1      17.4kB  1024MB  1024MB  ext3                 boot</span>
<span class="go">2      1024MB  1751GB  1750GB  xfs          sw-aw2az1-object045-disk1</span>
<span class="go">3      1751GB  2000GB  249GB                        lvm</span>

<span class="gp gp-VirtualEnv">(parted)</span> <span class="go">rm 2</span>
<span class="gp gp-VirtualEnv">(parted)</span> <span class="go">mkpart primary 2 -1</span>
<span class="go">Warning: You requested a partition from 2000kB to 2000GB.</span>
<span class="go">The closest location we can manage is 1024MB to 1751GB.</span>
<span class="go">Is this still acceptable to you?</span>
<span class="go">Yes/No? Yes</span>
<span class="go">Warning: The resulting partition is not properly aligned for best performance.</span>
<span class="go">Ignore/Cancel? Ignore</span>
<span class="gp gp-VirtualEnv">(parted)</span> <span class="go">p</span>
<span class="go">Model: HP LOGICAL VOLUME (scsi)</span>
<span class="go">Disk /dev/sdb: 2000GB</span>
<span class="go">Sector size (logical/physical): 512B/512B</span>
<span class="go">Partition Table: gpt</span>

<span class="go">Number  Start   End     Size    File system  Name     Flags</span>
<span class="go">1      17.4kB  1024MB  1024MB  ext3                  boot</span>
<span class="go">2      1024MB  1751GB  1750GB  xfs          primary</span>
<span class="go">3      1751GB  2000GB  249GB                         lvm</span>

<span class="gp gp-VirtualEnv">(parted)</span> <span class="go">quit</span>
</pre></div>
</div>
</li>
<li><p>Next step is to scrub the filesystem and format:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/sdb2<span class="w"> </span><span class="nv">bs</span><span class="o">=</span><span class="k">$((</span><span class="m">1024</span><span class="o">*</span><span class="m">1024</span><span class="k">))</span><span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">1</span>
<span class="go">1+0 records in</span>
<span class="go">1+0 records out</span>
<span class="go">1048576 bytes (1.0 MB) copied, 0.00480617 s, 218 MB/s</span>
<span class="gp">$ </span>sudo<span class="w"> </span>/sbin/mkfs.xfs<span class="w"> </span>-f<span class="w"> </span>-i<span class="w"> </span><span class="nv">size</span><span class="o">=</span><span class="m">1024</span><span class="w"> </span>/dev/sdb2
<span class="go">meta-data=/dev/sdb2              isize=1024   agcount=4, agsize=106811524 blks</span>
<span class="go">         =                       sectsz=512   attr=2, projid32bit=0</span>
<span class="go">data     =                       bsize=4096   blocks=427246093, imaxpct=5</span>
<span class="go">         =                       sunit=0      swidth=0 blks</span>
<span class="go">naming   =version 2              bsize=4096   ascii-ci=0</span>
<span class="go">log      =internal log           bsize=4096   blocks=208616, version=2</span>
<span class="go">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span>
<span class="go">realtime =none                   extsz=4096   blocks=0, rtextents=0</span>
</pre></div>
</div>
</li>
<li><p>You should now label and mount your filesystem.</p></li>
<li><p>Can now check to see if the filesystem is mounted using the command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mount
</pre></div>
</div>
</li>
</ol>
</section>
<section id="procedure-checking-if-an-account-is-okay">
<span id="checking-if-account-ok"></span><h2>Procedure: Checking if an account is okay<a class="headerlink" href="#procedure-checking-if-an-account-is-okay" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">swift-direct</span></code> is only available in the HPE Helion Public Cloud.
Use <code class="docutils literal notranslate"><span class="pre">swiftly</span></code> as an alternate (or use <code class="docutils literal notranslate"><span class="pre">swift-get-nodes</span></code> as explained
here).</p>
</div>
<p>You must know the tenant/project ID. You can check if the account is okay as follows from a proxy.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>-u<span class="w"> </span>swift<span class="w">  </span>/opt/hp/swift/bin/swift-direct<span class="w"> </span>show<span class="w"> </span>AUTH_&lt;project-id&gt;
</pre></div>
</div>
<p>The response will either be similar to a swift list of the account
containers, or an error indicating that the resource could not be found.</p>
<p>Alternatively, you can use <code class="docutils literal notranslate"><span class="pre">swift-get-nodes</span></code> to find the account database
files. Run the following on a proxy:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>swift-get-nodes<span class="w"> </span>/etc/swift/account.ring.gz<span class="w">  </span>AUTH_&lt;project-id&gt;
</pre></div>
</div>
<p>The response will print curl/ssh commands that will list the replicated
account databases. Use the indicated <code class="docutils literal notranslate"><span class="pre">curl</span></code> or <code class="docutils literal notranslate"><span class="pre">ssh</span></code> commands to check
the status and existence of the account.</p>
</section>
<section id="procedure-getting-swift-account-stats">
<h2>Procedure: Getting  swift account stats<a class="headerlink" href="#procedure-getting-swift-account-stats" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">swift-direct</span></code> is specific to the HPE Helion Public Cloud. Go look at
<code class="docutils literal notranslate"><span class="pre">swifty</span></code> for an alternate or use <code class="docutils literal notranslate"><span class="pre">swift-get-nodes</span></code> as explained
in <a class="reference internal" href="#checking-if-account-ok"><span class="std std-ref">Procedure: Checking if an account is okay</span></a>.</p>
</div>
<p>This procedure describes how you determine the swift usage for a given
swift account, that is the number of containers, number of objects and
total bytes used. To do this you will need the project ID.</p>
<p>Log onto one of the swift proxy servers.</p>
<p>Use swift-direct to show this accounts usage:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>-u<span class="w"> </span>swift<span class="w"> </span>/opt/hp/swift/bin/swift-direct<span class="w"> </span>show<span class="w"> </span>AUTH_&lt;project-id&gt;
<span class="go">Status: 200</span>
<span class="go">      Content-Length: 0</span>
<span class="go">      Accept-Ranges: bytes</span>
<span class="go">      X-Timestamp: 1379698586.88364</span>
<span class="go">      X-Account-Bytes-Used: 67440225625994</span>
<span class="go">      X-Account-Container-Count: 1</span>
<span class="go">      Content-Type: text/plain; charset=utf-8</span>
<span class="go">      X-Account-Object-Count: 8436776</span>
<span class="go">      Status: 200</span>
<span class="go">      name: my_container  count: 8436776  bytes: 67440225625994</span>
</pre></div>
</div>
<p>This account has 1 container. That container has 8436776 objects. The
total bytes used is 67440225625994.</p>
</section>
<section id="procedure-revive-a-deleted-account">
<h2>Procedure: Revive a deleted account<a class="headerlink" href="#procedure-revive-a-deleted-account" title="Permalink to this heading">¶</a></h2>
<p>Swift accounts are normally not recreated. If a tenant/project is deleted,
the account can then be deleted. If the user wishes to use Swift again,
the normal process is to create a new tenant/project – and hence a
new Swift account.</p>
<p>However, if the Swift account is deleted, but the tenant/project is not
deleted from Keystone, the user can no longer access the account. This
is because the account is marked deleted in Swift. You can revive
the account as described in this process.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The containers and objects in the “old” account cannot be listed
anymore. In addition, if the Account Reaper process has not
finished reaping the containers and objects in the “old” account, these
are effectively orphaned and it is virtually impossible to find and delete
them to free up disk space.</p>
</div>
<p>The solution is to delete the account database files and
re-create the account as follows:</p>
<ol class="arabic">
<li><p>You must know the tenant/project ID. The account name is AUTH_&lt;project-id&gt;.
In this example, the tenant/project is <code class="docutils literal notranslate"><span class="pre">4ebe3039674d4864a11fe0864ae4d905</span></code>
so the Swift account name is <code class="docutils literal notranslate"><span class="pre">AUTH_4ebe3039674d4864a11fe0864ae4d905</span></code>.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">swift-get-nodes</span></code> to locate the account’s database files (on three
servers). The output has been truncated so we can focus on the import pieces
of data:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>swift-get-nodes<span class="w"> </span>/etc/swift/account.ring.gz<span class="w"> </span>AUTH_4ebe3039674d4864a11fe0864ae4d905
<span class="go">...</span>
<span class="go">curl -I -XHEAD &quot;http://192.168.245.5:6202/disk1/3934/AUTH_4ebe3039674d4864a11fe0864ae4d905&quot;</span>
<span class="go">curl -I -XHEAD &quot;http://192.168.245.3:6202/disk0/3934/AUTH_4ebe3039674d4864a11fe0864ae4d905&quot;</span>
<span class="go">curl -I -XHEAD &quot;http://192.168.245.4:6202/disk1/3934/AUTH_4ebe3039674d4864a11fe0864ae4d905&quot;</span>
<span class="go">...</span>
<span class="go">Use your own device location of servers:</span>
<span class="go">such as &quot;export DEVICE=/srv/node&quot;</span>
<span class="go">ssh 192.168.245.5 &quot;ls -lah ${DEVICE:-/srv/node*}/disk1/accounts/3934/052/f5ecf8b40de3e1b0adb0dbe576874052&quot;</span>
<span class="go">ssh 192.168.245.3 &quot;ls -lah ${DEVICE:-/srv/node*}/disk0/accounts/3934/052/f5ecf8b40de3e1b0adb0dbe576874052&quot;</span>
<span class="go">ssh 192.168.245.4 &quot;ls -lah ${DEVICE:-/srv/node*}/disk1/accounts/3934/052/f5ecf8b40de3e1b0adb0dbe576874052&quot;</span>
<span class="go">...</span>
<span class="go">note: `/srv/node*` is used as default value of `devices`, the real value is set in the config file on each storage node.</span>
</pre></div>
</div>
</li>
<li><p>Before proceeding check that the account is really deleted by using curl. Execute the
commands printed by <code class="docutils literal notranslate"><span class="pre">swift-get-nodes</span></code>. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>curl<span class="w"> </span>-I<span class="w"> </span>-XHEAD<span class="w"> </span><span class="s2">&quot;http://192.168.245.5:6202/disk1/3934/AUTH_4ebe3039674d4864a11fe0864ae4d905&quot;</span>
<span class="go">HTTP/1.1 404 Not Found</span>
<span class="go">Content-Length: 0</span>
<span class="go">Content-Type: text/html; charset=utf-8</span>
</pre></div>
</div>
<p>Repeat for the other two servers (192.168.245.3 and 192.168.245.4).
A <code class="docutils literal notranslate"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></code> indicates that the account is deleted (or never existed).</p>
<p>If you get a <code class="docutils literal notranslate"><span class="pre">204</span> <span class="pre">No</span> <span class="pre">Content</span></code> response, do <strong>not</strong> proceed.</p>
</li>
<li><p>Use the ssh commands printed by <code class="docutils literal notranslate"><span class="pre">swift-get-nodes</span></code> to check if database
files exist. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$  </span>ssh<span class="w"> </span><span class="m">192</span>.168.245.5<span class="w"> </span><span class="s2">&quot;ls -lah </span><span class="si">${</span><span class="nv">DEVICE</span><span class="k">:-</span><span class="p">/srv/node*</span><span class="si">}</span><span class="s2">/disk1/accounts/3934/052/f5ecf8b40de3e1b0adb0dbe576874052&quot;</span>
<span class="go">total 20K</span>
<span class="go">drwxr-xr-x 2 swift swift 110 Mar  9 10:22 .</span>
<span class="go">drwxr-xr-x 3 swift swift  45 Mar  9 10:18 ..</span>
<span class="go">-rw------- 1 swift swift 17K Mar  9 10:22 f5ecf8b40de3e1b0adb0dbe576874052.db</span>
<span class="go">-rw-r--r-- 1 swift swift   0 Mar  9 10:22 f5ecf8b40de3e1b0adb0dbe576874052.db.pending</span>
<span class="go">-rwxr-xr-x 1 swift swift   0 Mar  9 10:18 .lock</span>
</pre></div>
</div>
<p>Repeat for the other two servers (192.168.245.3 and 192.168.245.4).</p>
<p>If no files exist, no further action is needed.</p>
</li>
<li><p>Stop Swift processes on all nodes listed by <code class="docutils literal notranslate"><span class="pre">swift-get-nodes</span></code>
(In this example, that is 192.168.245.3, 192.168.245.4 and 192.168.245.5).</p></li>
<li><p>We recommend you make backup copies of the database files.</p></li>
<li><p>Delete the database files. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ssh<span class="w"> </span><span class="m">192</span>.168.245.5
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>/srv/node/disk1/accounts/3934/052/f5ecf8b40de3e1b0adb0dbe576874052
<span class="gp">$ </span>sudo<span class="w"> </span>rm<span class="w"> </span>*
</pre></div>
</div>
<p>Repeat for the other two servers (192.168.245.3 and 192.168.245.4).</p>
</li>
<li><p>Restart Swift on all three servers</p></li>
</ol>
<p>At this stage, the account is fully deleted. If you enable the auto-create option, the
next time the user attempts to access the account, the account will be created.
You may also use swiftly to recreate the account.</p>
</section>
<section id="procedure-temporarily-stop-load-balancers-from-directing-traffic-to-a-proxy-server">
<h2>Procedure: Temporarily stop load balancers from directing traffic to a proxy server<a class="headerlink" href="#procedure-temporarily-stop-load-balancers-from-directing-traffic-to-a-proxy-server" title="Permalink to this heading">¶</a></h2>
<p>You can stop the load balancers sending requests to a proxy server as
follows. This can be useful when a proxy is misbehaving but you need
Swift running to help diagnose the problem. By removing from the load
balancers, customer’s are not impacted by the misbehaving proxy.</p>
<ol class="arabic">
<li><p>Ensure that in /etc/swift/proxy-server.conf the <code class="docutils literal notranslate"><span class="pre">disable_path</span></code> variable is set to
<code class="docutils literal notranslate"><span class="pre">/etc/swift/disabled-by-file</span></code>.</p></li>
<li><p>Log onto the proxy node.</p></li>
<li><p>Shut down Swift as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>swift-init<span class="w"> </span>proxy<span class="w"> </span>shutdown
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Shutdown, not stop.</p>
</div>
</li>
<li><p>Create the <code class="docutils literal notranslate"><span class="pre">/etc/swift/disabled-by-file</span></code> file. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>touch<span class="w"> </span>/etc/swift/disabled-by-file
</pre></div>
</div>
</li>
<li><p>Optional, restart Swift:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>swift-init<span class="w"> </span>proxy<span class="w"> </span>start
</pre></div>
</div>
</li>
</ol>
<p>It works because the healthcheck middleware looks for /etc/swift/disabled-by-file.
If it exists, the middleware will return 503/error instead of 200/OK. This means the load balancer
should stop sending traffic to the proxy.</p>
</section>
<section id="procedure-ad-hoc-disk-performance-test">
<h2>Procedure: Ad-Hoc disk performance test<a class="headerlink" href="#procedure-ad-hoc-disk-performance-test" title="Permalink to this heading">¶</a></h2>
<p>You can get an idea whether a disk drive is performing as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>dd<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">256</span><span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">conv</span><span class="o">=</span>fdatasync<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/srv/node/disk11/remember-to-delete-this-later
</pre></div>
</div>
<p>You can expect ~600MB/sec. If you get a low number, repeat many times as
Swift itself may also read or write to the disk, hence giving a lower
number.</p>
</section>
</section>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="diagnose.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Identifying issues and resolutions"></i></a>
          
          
            <a href="maintenance.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Server maintenance"></i></a>
          
          <a id="pdfLink2" href="" target="_blank" title="Download the manuals as PDF"><i class="fa fa-file-pdf-o" data-toggle="tooltip" data-placement="top" title="Download PDF"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">this page last updated: 2022-08-02 11:51:24</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="https://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the
                 document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="OpenStack Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/id/">Bahasa Indonesia (Indonesian)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/it/">Italiano (Italian)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/tr_TR/">Türkçe (Türkiye)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>Swift 0.1.0.dev10162</h4></a>
      <ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/object_api_v1_overview.html">Object Storage API overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_architecture.html">Swift Architectural Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_ring.html">The Rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_policies.html">Storage Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_reaper.html">The Account Reaper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_auth.html">The Auth System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_acl.html">Access Control Lists (ACLs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_replication.html">Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ratelimit.html">Rate Limiting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_large_objects.html">Large Object Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_global_cluster.html">Global Clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_container_sync.html">Container to Container Synchronization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_expiring_objects.html">Expiring Object Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cors.html">CORS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crossdomain.html">Cross-domain Policy File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_erasure_code.html">Erasure Code Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_encryption.html">Object Encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_backing_store.html">Using Swift as Backing Store for Service Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview_container_sharding.html">Container Sharding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ring_background.html">Building a Consistent Hashing Ring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ring_partpower.html">Modifying Ring Partition Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="../associated_projects.html">Associated Projects</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributor/contributing.html">Contributing to OpenStack Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributor/contributing.html#swift-design-principles">Swift Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributor/contributing.html#recommended-workflow">Recommended workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributor/contributing.html#notes-on-testing">Notes on Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributor/contributing.html#ideas">Ideas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributor/contributing.html#community">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributor/review_guidelines.html">Review Guidelines</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development_guidelines.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development_saio.html">SAIO (Swift All In One)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first_contribution_swift.html">First Contribution to Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../policies_saio.html">Adding Storage Policies to an Existing SAIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development_auth.html">Auth Server and Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development_middleware.html">Middleware and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development_ondisk_backends.html">Pluggable On-Disk Back-end APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development_watchers.html">Auditor Watchers</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../deployment_guide.html">Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apache_deployment_guide.html">Apache Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin_guide.html">Administrator’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../replication_network.html">Dedicated replication network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logs.html">Logs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Swift Ops Runbook</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="diagnose.html">Identifying issues and resolutions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Software configuration procedures</a></li>
<li class="toctree-l2"><a class="reference internal" href="maintenance.html">Server maintenance</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting tips</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">OpenStack Swift Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Object Storage Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">Configuration Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/object_api_v1_overview.html">Object Storage API overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/discoverability.html">Discoverability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/container_quotas.html">Container quotas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/object_versioning.html">Object versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/large_objects.html">Large objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/temporary_url_middleware.html">Temporary URL middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/form_post_middleware.html">Form POST middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/use_content-encoding_metadata.html">Use Content-Encoding metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/use_the_content-disposition_metadata.html">Use the Content-Disposition metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/pseudo-hierarchical-folders-directories.html">Pseudo-hierarchical folders and directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/pagination.html">Page through large lists of containers or objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/serialized-response-formats.html">Serialized response formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/static-website.html">Create static website</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/object-expiration.html">Object expiration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/bulk-delete.html">Bulk delete</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../s3_compat.html">S3/Swift REST API Comparison Matrix</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ring.html">Partitioned Consistent Hash Ring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proxy.html">Proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../account.html">Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="../container.html">Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../db.html">Account DB and Container DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object.html">Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc.html">Misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../audit_watchers.html">Object Audit Watchers</a></li>
</ul>

    </div>

  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="local-table-of-contents">
      <h4 class="docs-sidebar-section-title">Page Contents</h4>
      <ul>
<li><a class="reference internal" href="#">Software configuration procedures</a><ul>
<li><a class="reference internal" href="#fix-broken-gpt-table-broken-disk-partition">Fix broken GPT table (broken disk partition)</a></li>
<li><a class="reference internal" href="#procedure-fix-broken-xfs-filesystem">Procedure: Fix broken XFS filesystem</a></li>
<li><a class="reference internal" href="#procedure-checking-if-an-account-is-okay">Procedure: Checking if an account is okay</a></li>
<li><a class="reference internal" href="#procedure-getting-swift-account-stats">Procedure: Getting  swift account stats</a></li>
<li><a class="reference internal" href="#procedure-revive-a-deleted-account">Procedure: Revive a deleted account</a></li>
<li><a class="reference internal" href="#procedure-temporarily-stop-load-balancers-from-directing-traffic-to-a-proxy-server">Procedure: Temporarily stop load balancers from directing traffic to a proxy server</a></li>
<li><a class="reference internal" href="#procedure-ad-hoc-disk-performance-test">Procedure: Ad-Hoc disk performance test</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="https://openstack.org/projects/">Projects</a></li>
          <li><a href="https://www.openstack.org/software/security/">OpenStack Security</a></li>
          <li><a href="https://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="https://openstack.org/blog/">Blog</a></li>g
          <li><a href="https://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="https://openstack.org/community/">User Groups</a></li>
          <li><a href="https://openstack.org/community/events/">Events</a></li>
          <li><a href="https://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="https://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="https://docs.openstack.org/contributors">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="https://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="https://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="https://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="https://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="https://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="https://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="https://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-3.2.1.min.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.min.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- standard sphinx include libraries, which allow search highlighting -->
<script type="text/javascript" src="../_static/underscore.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
<script type="text/javascript" src="../_static/searchtools.js"></script>
<script type="text/javascript" src="../_static/language_data.js"></script>

<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.1.0.dev10162',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      LINK_SUFFIX: '.html',
      SOURCELINK_SUFFIX: '.txt',
      HAS_SOURCE:  true
    };
</script>

<!-- Javascript for page -->
<script language="JavaScript">
  /* Build a description of this page including SHA, source location on git
   * repo, build time and the project's launchpad bug tag. Set the HREF of the
   * bug buttons
   */
    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
    /* "giturl" is the URL of the source file on Git and is auto-generated by
     * openstackdocstheme.
     *
     * "pagename" is a standard sphinx parameter containing the name of
     * the source file, without extension.
     */

    var sourceFile = "ops_runbook/procedures" + ".rst";
    gitURL = "Source: https://opendev.org/openstack/swift/src/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: a7004f079a695309fcf8adab383f12c91fb86576";
    var repositoryName = "openstack/swift";
    var bugProject = "swift";
    var bugTitle = "Software configuration procedures in Swift";
    var fieldTags = "";
    var useStoryboard = "";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.1.0.dev10162 on 2022-08-02 11:51:24";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags, repositoryName, useStoryboard);
    var currentSourceFile = "ops_runbook/procedures";
    var pdfFileName = "doc-swift.pdf";
    pdfLink(currentSourceFile, pdfFileName);
</script>


  </body>
</html>