
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Misc &#8212; Swift 0.1.0.dev10162 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/basic.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="canonical" href="/openstack-swift/misc.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Middleware" href="middleware.html" />
    <link rel="prev" title="Object" href="object.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.min.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">

<!-- Search CSS -->
<link href="_static/css/search.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/pygments.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


  </head><body>

<!-- SOURCE_FILE: https://opendev.org/openstack/swift/src/doc/source/misc.rst -->

<script>
    (function (window, document) {
        var loader = function () {
            var script = document.createElement("script"), tag = document.getElementsByTagName("script")[0];
            script.src = "https://search.openstack.org/widget/embed.min.js?t="+Date.now();
            tag.parentNode.insertBefore(script, tag);
        };
        window.addEventListener ? window.addEventListener("load", loader, false) : window.attachEvent("onload", loader);
    })(window, document);
</script>

<nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="https://www.openstack.org/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
    <div class="openstack-search-bar" data-baseUrl="search.openstack.org" data-context="docs-openstack"></div>
</div>
      <ul class="nav navbar-nav navbar-main show">
        <li class="search-container-mobile">
    <div class="openstack-search-bar" data-baseUrl="search.openstack.org" data-context="docs-openstack"></div>
</li>
        <li> <!--Software -->
          <a href="https://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/openstack-components">OpenStack Components</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/sdks">SDKs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/deployment-tools">Deployment Tools</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/assets/software/projectmap/openstack-map.pdf" target="_blank">OpenStack Map</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
          </ul>
        </li>
        <li> <!-- Use Cases -->
          <a href="https://www.openstack.org/use-cases/" class="drop" id="dropdownMenuUsers">Use Cases <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/">Users in Production</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/bare-metal/">Ironic Bare Metal</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/edge-computing/">Edge Computing</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/telecoms-and-nfv/">Telecom & NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/science/">Science and HPC</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/containers/">Containers</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/enterprise/">Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li> <!-- Events -->
          <a href="https://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">Open Infrastructure Summits</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/ptg/">Project Teams Gathering</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/opendev-2020/">OpenDev</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/community-events/">Community Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/openstackdays">OpenStack & OpenInfra Days</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
          </ul>
        </li>
        <li><!-- Community -->
          <a href="https://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/tech-committee">OpenStack Technical Committee</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/coa/">Get Certified (COA)</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketing/">Marketing Resources</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/news/">Community News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/supporting-organizations/">OpenInfra Foundation Supporting Organizations</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev">Open Infrastructure Foundation (OpenInfra Foundation)</a></li>
          </ul>
        </li>
        <li><!-- Marketplace -->
          <a href="https://www.openstack.orgmarketplace/" class="drop" id="dropdownMenuLearn">Marketplace <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/distros/">Distros & Appliances</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/public-clouds/">Public Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/hosted-private-clouds/">Hosted Private Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/remotely-managed-private-clouds/">Remotely Managed Private Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/consulting/">Consulting & Integrators</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/drivers/">Drivers</a></li>
          </ul>
        </li>
        <li><!-- Blog -->
          <a href="https://www.openstack.org/blog/">Blog</a>
        </li>
        <li><!-- Docs -->
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
        <li> <!-- Join -->
            <li class="join-nav-section">
              <a href="https://openinfra.dev/join/" id="dropdownMenuJoin">Join <i class="fa fa-caret-down"></i></a>
              <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuJoin" style="display: none;">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev/join/">Sign up for Foundation Membership</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev/join/">Sponsor the Foundation</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev">More about the Foundation</a></li>
              </ul>
            </li>
            <li>
              <a href="https://www.openstack.org/Security/login/?BackURL=/home/" class="sign-in-btn">Log In</a>
            </li>
        </li>
      </ul>
    </div>
  </div>
  <!-- /.container -->
</nav>

    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row docs-title">
  <div class="col-lg-8">
      <h1>Misc</h1>
    
  </div>
  <div class="docs-actions">
    
    <a href="object.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Object"></i></a>
    
    
    <a href="middleware.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Middleware"></i></a>
    
    <a id="pdfLink1" href="" target="_blank" title="Download the manuals as PDF"><i class="fa fa-file-pdf-o" data-toggle="tooltip" data-placement="top" title="Download PDF"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
    
  </div>
</div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-body" role="main">

  <section id="misc">
<span id="id1"></span><h1>Misc<a class="headerlink" href="#misc" title="Permalink to this heading">¶</a></h1>
<section id="acls">
<span id="id2"></span><h2>ACLs<a class="headerlink" href="#acls" title="Permalink to this heading">¶</a></h2>
<span class="target" id="module-swift.common.middleware.acl"></span><dl class="py function">
<dt class="sig sig-object py" id="swift.common.middleware.acl.acls_from_account_info">
<span class="sig-prename descclassname"><span class="pre">swift.common.middleware.acl.</span></span><span class="sig-name descname"><span class="pre">acls_from_account_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.middleware.acl.acls_from_account_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the account ACLs from the given account_info, and return the ACLs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>info</strong> – a dict of the form returned by get_account_info</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None (no ACL system metadata is set), or a dict of the form::
{‘admin’: […], ‘read-write’: […], ‘read-only’: […]}</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – on a syntactically invalid header</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.middleware.acl.clean_acl">
<span class="sig-prename descclassname"><span class="pre">swift.common.middleware.acl.</span></span><span class="sig-name descname"><span class="pre">clean_acl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.middleware.acl.clean_acl" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a cleaned ACL header value, validating that it meets the formatting
requirements for standard Swift ACL strings.</p>
<p>The ACL format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">item</span><span class="p">[,</span><span class="n">item</span><span class="o">...</span><span class="p">]]</span>
</pre></div>
</div>
<p>Each item can be a group name to give access to or a referrer designation
to grant or deny based on the HTTP Referer header.</p>
<p>The referrer designation format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">r</span><span class="p">:[</span><span class="o">-</span><span class="p">]</span><span class="n">value</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.r</span></code> can also be <code class="docutils literal notranslate"><span class="pre">.ref</span></code>, <code class="docutils literal notranslate"><span class="pre">.referer</span></code>, or <code class="docutils literal notranslate"><span class="pre">.referrer</span></code>; though it
will be shortened to just <code class="docutils literal notranslate"><span class="pre">.r</span></code> for decreased character count usage.</p>
<p>The value can be <code class="docutils literal notranslate"><span class="pre">*</span></code> to specify any referrer host is allowed access, a
specific host name like <code class="docutils literal notranslate"><span class="pre">www.example.com</span></code>, or if it has a leading period
<code class="docutils literal notranslate"><span class="pre">.</span></code> or leading <code class="docutils literal notranslate"><span class="pre">*.</span></code> it is a domain name specification, like
<code class="docutils literal notranslate"><span class="pre">.example.com</span></code> or <code class="docutils literal notranslate"><span class="pre">*.example.com</span></code>. The leading minus sign <code class="docutils literal notranslate"><span class="pre">-</span></code>
indicates referrer hosts that should be denied access.</p>
<p>Referrer access is applied in the order they are specified. For example,
.r:.example.com,.r:-thief.example.com would allow all hosts ending with
.example.com except for the specific host thief.example.com.</p>
<p>Example valid ACLs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">r</span><span class="p">:</span><span class="o">*</span>
<span class="o">.</span><span class="n">r</span><span class="p">:</span><span class="o">*</span><span class="p">,</span><span class="o">.</span><span class="n">r</span><span class="p">:</span><span class="o">-.</span><span class="n">thief</span><span class="o">.</span><span class="n">com</span>
<span class="o">.</span><span class="n">r</span><span class="p">:</span><span class="o">*</span><span class="p">,</span><span class="o">.</span><span class="n">r</span><span class="p">:</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="o">.</span><span class="n">r</span><span class="p">:</span><span class="o">-</span><span class="n">thief</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="o">.</span><span class="n">r</span><span class="p">:</span><span class="o">*</span><span class="p">,</span><span class="o">.</span><span class="n">r</span><span class="p">:</span><span class="o">-.</span><span class="n">thief</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">bobs_account</span><span class="p">,</span><span class="n">sues_account</span><span class="p">:</span><span class="n">sue</span>
<span class="n">bobs_account</span><span class="p">,</span><span class="n">sues_account</span><span class="p">:</span><span class="n">sue</span>
</pre></div>
</div>
<p>Example invalid ACLs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">r</span><span class="p">:</span>
<span class="o">.</span><span class="n">r</span><span class="p">:</span><span class="o">-</span>
</pre></div>
</div>
<p>By default, allowing read access via .r will not allow listing objects in
the container – just retrieving objects from the container. To turn on
listings, use the .rlistings directive.</p>
<p>Also, .r designations aren’t allowed in headers whose names include the
word ‘write’.</p>
<p>ACLs that are “messy” will be cleaned up. Examples:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Original</p></td>
<td><p>Cleaned</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bob,</span> <span class="pre">sue</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bob,sue</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bob</span> <span class="pre">,</span> <span class="pre">sue</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bob,sue</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bob,,,sue</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bob,sue</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">.referrer</span> <span class="pre">:</span> <span class="pre">*</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">.r:*</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.ref:*.example.com</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">.r:.example.com</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">.r:*,</span> <span class="pre">.rlistings</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">.r:*,.rlistings</span></code></p></td>
</tr>
</tbody>
</table>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the header being cleaned, such as X-Container-Read
or X-Container-Write.</p></li>
<li><p><strong>value</strong> – The value of the header being cleaned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The value, cleaned of extraneous formatting.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the value does not meet the ACL formatting
requirements; the error message will indicate why.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.middleware.acl.format_acl">
<span class="sig-prename descclassname"><span class="pre">swift.common.middleware.acl.</span></span><span class="sig-name descname"><span class="pre">format_acl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.middleware.acl.format_acl" title="Permalink to this definition">¶</a></dt>
<dd><p>Compatibility wrapper to help migrate ACL syntax from version 1 to 2.
Delegates to the appropriate version-specific format_acl method, defaulting
to version 1 for backward compatibility.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> – keyword args appropriate for the selected ACL syntax version
(see <a class="reference internal" href="#swift.common.middleware.acl.format_acl_v1" title="swift.common.middleware.acl.format_acl_v1"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_acl_v1()</span></code></a> or <a class="reference internal" href="#swift.common.middleware.acl.format_acl_v2" title="swift.common.middleware.acl.format_acl_v2"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_acl_v2()</span></code></a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.middleware.acl.format_acl_v1">
<span class="sig-prename descclassname"><span class="pre">swift.common.middleware.acl.</span></span><span class="sig-name descname"><span class="pre">format_acl_v1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">referrers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.middleware.acl.format_acl_v1" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a standard Swift ACL string for the given inputs.</p>
<p>Caller is responsible for ensuring that :referrers: parameter is only given
if the ACL is being generated for X-Container-Read.  (X-Container-Write
and the account ACL headers don’t support referrers.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>groups</strong> – a list of groups (and/or members in most auth systems) to
grant access</p></li>
<li><p><strong>referrers</strong> – a list of referrer designations (without the leading .r:)</p></li>
<li><p><strong>header_name</strong> – (optional) header name of the ACL we’re preparing, for
clean_acl; if None, returned ACL won’t be cleaned</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a Swift ACL string for use in X-Container-{Read,Write},
X-Account-Access-Control, etc.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.middleware.acl.format_acl_v2">
<span class="sig-prename descclassname"><span class="pre">swift.common.middleware.acl.</span></span><span class="sig-name descname"><span class="pre">format_acl_v2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">acl_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.middleware.acl.format_acl_v2" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a version-2 Swift ACL JSON string.</p>
<dl class="simple">
<dt>HTTP headers for Version 2 ACLs have the following form:</dt><dd><p>Header-Name: {“arbitrary”:”json”,”encoded”:”string”}</p>
</dd>
</dl>
<p>JSON will be forced ASCII (containing six-char uNNNN sequences rather
than UTF-8; UTF-8 is valid JSON but clients vary in their support for
UTF-8 headers), and without extraneous whitespace.</p>
<p>Advantages over V1: forward compatibility (new keys don’t cause parsing
exceptions); Unicode support; no reserved words (you can have a user
named .rlistings if you want).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>acl_dict</strong> – dict of arbitrary data to put in the ACL; see specific
auth systems such as tempauth for supported values</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a JSON string which encodes the ACL</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.middleware.acl.parse_acl">
<span class="sig-prename descclassname"><span class="pre">swift.common.middleware.acl.</span></span><span class="sig-name descname"><span class="pre">parse_acl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.middleware.acl.parse_acl" title="Permalink to this definition">¶</a></dt>
<dd><p>Compatibility wrapper to help migrate ACL syntax from version 1 to 2.
Delegates to the appropriate version-specific parse_acl method, attempting
to determine the version from the types of args/kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – positional args for the selected ACL syntax version</p></li>
<li><p><strong>kwargs</strong> – keyword args for the selected ACL syntax version
(see <a class="reference internal" href="#swift.common.middleware.acl.parse_acl_v1" title="swift.common.middleware.acl.parse_acl_v1"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_acl_v1()</span></code></a> or <a class="reference internal" href="#swift.common.middleware.acl.parse_acl_v2" title="swift.common.middleware.acl.parse_acl_v2"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_acl_v2()</span></code></a>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the return value of <a class="reference internal" href="#swift.common.middleware.acl.parse_acl_v1" title="swift.common.middleware.acl.parse_acl_v1"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_acl_v1()</span></code></a> or <a class="reference internal" href="#swift.common.middleware.acl.parse_acl_v2" title="swift.common.middleware.acl.parse_acl_v2"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_acl_v2()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.middleware.acl.parse_acl_v1">
<span class="sig-prename descclassname"><span class="pre">swift.common.middleware.acl.</span></span><span class="sig-name descname"><span class="pre">parse_acl_v1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">acl_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.middleware.acl.parse_acl_v1" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a standard Swift ACL string into a referrers list and groups list.</p>
<p>See <a class="reference internal" href="#swift.common.middleware.acl.clean_acl" title="swift.common.middleware.acl.clean_acl"><code class="xref py py-func docutils literal notranslate"><span class="pre">clean_acl()</span></code></a> for documentation of the standard Swift ACL format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>acl_string</strong> – The standard Swift ACL string to parse.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple of (referrers, groups) where referrers is a list of
referrer designations (without the leading .r:) and groups is a
list of groups to allow access.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.middleware.acl.parse_acl_v2">
<span class="sig-prename descclassname"><span class="pre">swift.common.middleware.acl.</span></span><span class="sig-name descname"><span class="pre">parse_acl_v2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.middleware.acl.parse_acl_v2" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a version-2 Swift ACL string and returns a dict of ACL info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> – string containing the ACL data in JSON format</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dict (possibly empty) containing ACL info, e.g.:
{“groups”: […], “referrers”: […]}</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None if data is None, is not valid JSON or does not parse
as a dict</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>empty dictionary if data is an empty string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.middleware.acl.referrer_allowed">
<span class="sig-prename descclassname"><span class="pre">swift.common.middleware.acl.</span></span><span class="sig-name descname"><span class="pre">referrer_allowed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">referrer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">referrer_acl</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.middleware.acl.referrer_allowed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the referrer should be allowed based on the referrer_acl
list (as returned by <a class="reference internal" href="#swift.common.middleware.acl.parse_acl" title="swift.common.middleware.acl.parse_acl"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_acl()</span></code></a>).</p>
<p>See <a class="reference internal" href="#swift.common.middleware.acl.clean_acl" title="swift.common.middleware.acl.clean_acl"><code class="xref py py-func docutils literal notranslate"><span class="pre">clean_acl()</span></code></a> for documentation of the standard Swift ACL format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>referrer</strong> – The value of the HTTP Referer header.</p></li>
<li><p><strong>referrer_acl</strong> – The list of referrer designations as returned by
<a class="reference internal" href="#swift.common.middleware.acl.parse_acl" title="swift.common.middleware.acl.parse_acl"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_acl()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the referrer should be allowed; False if not.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-swift.common.bufferedhttp">
<span id="id3"></span><span id="buffered-http"></span><h2>Buffered HTTP<a class="headerlink" href="#module-swift.common.bufferedhttp" title="Permalink to this heading">¶</a></h2>
<p>Monkey Patch httplib.HTTPResponse to buffer reads of headers. This can improve
performance when making large numbers of small HTTP requests.  This module
also provides helper functions to make HTTP connections using
BufferedHTTPResponse.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you use this, be sure that the libraries you are using do not access
the socket directly (xmlrpclib, I’m looking at you :/), and instead
make all calls through httplib.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPConnection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.bufferedhttp.</span></span><span class="sig-name descname"><span class="pre">BufferedHTTPConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout=&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_address=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPConnection</span></code></p>
<p>HTTPConnection class that uses BufferedHTTPResponse</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPConnection.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPConnection.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to the host and port specified in __init__.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPConnection.getresponse">
<span class="sig-name descname"><span class="pre">getresponse</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPConnection.getresponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the response from the server.</p>
<p>If the HTTPConnection is in the correct state, returns an
instance of HTTPResponse or of whatever object is returned by
the response_class variable.</p>
<p>If a request has not been sent or if a previous response has
not be handled, ResponseNotReady is raised.  If the HTTP
response indicates that the connection should be closed, then
it will be closed before the response is returned.  When the
connection is closed, the underlying socket is closed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPConnection.putheader">
<span class="sig-name descname"><span class="pre">putheader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPConnection.putheader" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a request header line to the server.</p>
<p>For example: h.putheader(‘Accept’, ‘text/html’)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPConnection.putrequest">
<span class="sig-name descname"><span class="pre">putrequest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_accept_encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPConnection.putrequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a request to the server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> – specifies an HTTP request method, e.g. ‘GET’.</p></li>
<li><p><strong>url</strong> – specifies the object being requested, e.g. ‘/index.html’.</p></li>
<li><p><strong>skip_host</strong> – if True does not add automatically a ‘Host:’ header</p></li>
<li><p><strong>skip_accept_encoding</strong> – if True does not add automatically an
‘Accept-Encoding:’ header</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPConnection.response_class">
<span class="sig-name descname"><span class="pre">response_class</span></span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPConnection.response_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPResponse" title="swift.common.bufferedhttp.BufferedHTTPResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferedHTTPResponse</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.bufferedhttp.</span></span><span class="sig-name descname"><span class="pre">BufferedHTTPResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debuglevel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPResponse</span></code></p>
<p>HTTPResponse class that buffers reading of headers</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPResponse.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPResponse.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush and close the IO object.</p>
<p>This method has no effect if the file is already closed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPResponse.nuke_from_orbit">
<span class="sig-name descname"><span class="pre">nuke_from_orbit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPResponse.nuke_from_orbit" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate the socket with extreme prejudice.</p>
<p>Closes the underlying socket regardless of whether or not anyone else
has references to it. Use this when you are certain that nobody else
you care about has a reference to this socket.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPResponse.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">amt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPResponse.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and return up to n bytes.</p>
<p>If the argument is omitted, None, or negative, reads and
returns all data until EOF.</p>
<p>If the argument is positive, and the underlying raw stream is
not ‘interactive’, multiple raw reads may be issued to satisfy
the byte count (unless EOF is reached first).  But for
interactive raw streams (as well as sockets and pipes), at most
one raw read will be issued, and a short result does not imply
that EOF is imminent.</p>
<p>Returns an empty bytes object on EOF.</p>
<p>Returns None if the underlying raw stream was open in non-blocking
mode and no data is available at the moment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.BufferedHTTPResponse.readline">
<span class="sig-name descname"><span class="pre">readline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1024</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.BufferedHTTPResponse.readline" title="Permalink to this definition">¶</a></dt>
<dd><p>Read and return a line from the stream.</p>
<p>If size is specified, at most size bytes will be read.</p>
<p>The line terminator is always b’n’ for binary files; for text
files, the newlines argument to open can be used to select the line
terminator(s) recognized.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.http_connect">
<span class="sig-prename descclassname"><span class="pre">swift.common.bufferedhttp.</span></span><span class="sig-name descname"><span class="pre">http_connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipaddr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.http_connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to create an HTTPConnection object. If ssl is set True,
HTTPSConnection will be used. However, if ssl=False, BufferedHTTPConnection
will be used, which is buffered for backend Swift services.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ipaddr</strong> – IPv4 address to connect to</p></li>
<li><p><strong>port</strong> – port to connect to</p></li>
<li><p><strong>device</strong> – device of the node to query</p></li>
<li><p><strong>partition</strong> – partition on the device</p></li>
<li><p><strong>method</strong> – HTTP method to request (‘GET’, ‘PUT’, ‘POST’, etc.)</p></li>
<li><p><strong>path</strong> – request path</p></li>
<li><p><strong>headers</strong> – dictionary of headers</p></li>
<li><p><strong>query_string</strong> – request query string</p></li>
<li><p><strong>ssl</strong> – set True if SSL should be used (default: False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>HTTPConnection object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.bufferedhttp.http_connect_raw">
<span class="sig-prename descclassname"><span class="pre">swift.common.bufferedhttp.</span></span><span class="sig-name descname"><span class="pre">http_connect_raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipaddr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.bufferedhttp.http_connect_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to create an HTTPConnection object. If ssl is set True,
HTTPSConnection will be used. However, if ssl=False, BufferedHTTPConnection
will be used, which is buffered for backend Swift services.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ipaddr</strong> – IPv4 address to connect to</p></li>
<li><p><strong>port</strong> – port to connect to</p></li>
<li><p><strong>method</strong> – HTTP method to request (‘GET’, ‘PUT’, ‘POST’, etc.)</p></li>
<li><p><strong>path</strong> – request path</p></li>
<li><p><strong>headers</strong> – dictionary of headers</p></li>
<li><p><strong>query_string</strong> – request query string</p></li>
<li><p><strong>ssl</strong> – set True if SSL should be used (default: False)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>HTTPConnection object</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="constraints">
<span id="id4"></span><h2>Constraints<a class="headerlink" href="#constraints" title="Permalink to this heading">¶</a></h2>
<span class="target" id="module-swift.common.constraints"></span><dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_account_format">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_account_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Account'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_account_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the header contains valid account or container name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – HTTP request object</p></li>
<li><p><strong>name</strong> – header value to validate</p></li>
<li><p><strong>target_type</strong> – which header is being validated (Account or Container)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A properly encoded account name or container name</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>HTTPPreconditionFailed</strong> – if account header
is not well formatted.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_container_format">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_container_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Container'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_container_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the header contains valid account or container name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – HTTP request object</p></li>
<li><p><strong>name</strong> – header value to validate</p></li>
<li><p><strong>target_type</strong> – which header is being validated (Account or Container)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A properly encoded account name or container name</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>HTTPPreconditionFailed</strong> – if account header
is not well formatted.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_delete_headers">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_delete_headers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_delete_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that ‘x-delete-after’ and ‘x-delete-at’ headers have valid values.
Values should be positive integers and correspond to a time greater than
the request timestamp.</p>
<p>If the ‘x-delete-after’ header is found then its value is used to compute
an ‘x-delete-at’ value which takes precedence over any existing
‘x-delete-at’ header.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> – the swob request object</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p>HTTPBadRequest in case of invalid values</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the swob request object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_dir">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drive</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that the path to the device is a directory and is a lesser
constraint that is enforced when a full mount_check isn’t possible
with, for instance, a VM using loopback or partitions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root</strong> – base path where the dir is</p></li>
<li><p><strong>drive</strong> – drive name to be checked</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>full path to the device</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if drive fails to validate</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_drive">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_drive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drive</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mount_check</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_drive" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the path given by root and drive is a valid existing directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root</strong> – base path where the devices are mounted</p></li>
<li><p><strong>drive</strong> – drive name to be checked</p></li>
<li><p><strong>mount_check</strong> – additionally require path is mounted</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>full path to the device</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if drive fails to validate</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_float">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_float</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_float" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for checking if a string can be converted to a float.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>string</strong> – string to be verified as a float</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the string can be converted to a float, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_metadata">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Check metadata sent in the request headers.  This should only check
that the metadata in the request given is valid.  Checks against
account/container overall metadata should be forwarded on to its
respective server to be checked.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – request object</p></li>
<li><p><strong>target_type</strong> – str: one of: object, container, or account: indicates
which type the target storage for the metadata is</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>HTTPBadRequest with bad metadata otherwise None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_mount">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_mount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drive</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_mount" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that the path to the device is a mount point and mounted.  This
allows us to fast fail on drives that have been unmounted because of
issues, and also prevents us for accidentally filling up the root
partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root</strong> – base path where the devices are mounted</p></li>
<li><p><strong>drive</strong> – drive name to be checked</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>full path to the device</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if drive fails to validate</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_name_format">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_name_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_name_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the header contains valid account or container name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – HTTP request object</p></li>
<li><p><strong>name</strong> – header value to validate</p></li>
<li><p><strong>target_type</strong> – which header is being validated (Account or Container)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A properly encoded account name or container name</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>HTTPPreconditionFailed</strong> – if account header
is not well formatted.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_object_creation">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_object_creation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_object_creation" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to ensure that everything is alright about an object to be created.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – HTTP request object</p></li>
<li><p><strong>object_name</strong> – name of object to be created</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>HTTPRequestEntityTooLarge – the object is too large</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>HTTPLengthRequired – missing content-length header and not
a chunked request</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>HTTPBadRequest – missing or bad content-type header, or
bad metadata</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>HTTPNotImplemented – unsupported transfer-encoding header value</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.check_utf8">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">check_utf8</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">internal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.check_utf8" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate if a string is valid UTF-8 str or unicode and that it
does not contain any reserved characters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> – string to be validated</p></li>
<li><p><strong>internal</strong> – boolean, allows reserved characters if True</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the string is valid utf-8 str or unicode and
contains no null characters, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.reload_constraints">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">reload_constraints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.reload_constraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse SWIFT_CONF_FILE and reset module level global constraint attrs,
populating OVERRIDE_CONSTRAINTS AND EFFECTIVE_CONSTRAINTS along the way.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.valid_api_version">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">valid_api_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.valid_api_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the requested version is valid.</p>
<p>Currently Swift only supports “v1” and “v1.0”.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.constraints.valid_timestamp">
<span class="sig-prename descclassname"><span class="pre">swift.common.constraints.</span></span><span class="sig-name descname"><span class="pre">valid_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.constraints.valid_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to extract a timestamp from requests that require one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> – the swob request object</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a valid Timestamp instance</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>HTTPBadRequest</strong> – on missing or invalid X-Timestamp</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-swift.common.container_sync_realms">
<span id="container-sync-realms"></span><h2>Container Sync Realms<a class="headerlink" href="#module-swift.common.container_sync_realms" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="swift.common.container_sync_realms.ContainerSyncRealms">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.container_sync_realms.</span></span><span class="sig-name descname"><span class="pre">ContainerSyncRealms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.container_sync_realms.ContainerSyncRealms" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Loads and parses the container-sync-realms.conf, occasionally
checking the file’s mtime to see if it needs to be reloaded.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.container_sync_realms.ContainerSyncRealms.clusters">
<span class="sig-name descname"><span class="pre">clusters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">realm</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.container_sync_realms.ContainerSyncRealms.clusters" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of clusters for the realm.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.container_sync_realms.ContainerSyncRealms.endpoint">
<span class="sig-name descname"><span class="pre">endpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">realm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.container_sync_realms.ContainerSyncRealms.endpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the endpoint for the cluster in the realm.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.container_sync_realms.ContainerSyncRealms.get_sig">
<span class="sig-name descname"><span class="pre">get_sig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nonce</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">realm_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.container_sync_realms.ContainerSyncRealms.get_sig" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the hexdigest string of the HMAC-SHA1 (RFC 2104) for
the information given.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request_method</strong> – HTTP method of the request.</p></li>
<li><p><strong>path</strong> – The path to the resource (url-encoded).</p></li>
<li><p><strong>x_timestamp</strong> – The X-Timestamp header value for the request.</p></li>
<li><p><strong>nonce</strong> – A unique value for the request.</p></li>
<li><p><strong>realm_key</strong> – Shared secret at the cluster operator level.</p></li>
<li><p><strong>user_key</strong> – Shared secret at the user’s container level.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>hexdigest str of the HMAC-SHA1 for the request.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.container_sync_realms.ContainerSyncRealms.key">
<span class="sig-name descname"><span class="pre">key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">realm</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.container_sync_realms.ContainerSyncRealms.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the key for the realm.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.container_sync_realms.ContainerSyncRealms.key2">
<span class="sig-name descname"><span class="pre">key2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">realm</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.container_sync_realms.ContainerSyncRealms.key2" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the key2 for the realm.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.container_sync_realms.ContainerSyncRealms.realms">
<span class="sig-name descname"><span class="pre">realms</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.container_sync_realms.ContainerSyncRealms.realms" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of realms.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.container_sync_realms.ContainerSyncRealms.reload">
<span class="sig-name descname"><span class="pre">reload</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.container_sync_realms.ContainerSyncRealms.reload" title="Permalink to this definition">¶</a></dt>
<dd><p>Forces a reload of the conf file.</p>
</dd></dl>

</dd></dl>

</section>
<section id="digest">
<span id="id5"></span><h2>Digest<a class="headerlink" href="#digest" title="Permalink to this heading">¶</a></h2>
<span class="target" id="module-swift.common.digest"></span><dl class="py function">
<dt class="sig sig-object py" id="swift.common.digest.extract_digest_and_algorithm">
<span class="sig-prename descclassname"><span class="pre">swift.common.digest.</span></span><span class="sig-name descname"><span class="pre">extract_digest_and_algorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.digest.extract_digest_and_algorithm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of (digest_algorithm, hex_encoded_digest)
from a client-provided string of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">hex</span><span class="o">-</span><span class="n">encoded</span> <span class="n">digest</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">algorithm</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">base64</span><span class="o">-</span><span class="n">encoded</span> <span class="n">digest</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Note that hex-encoded strings must use one of sha1, sha256, or sha512.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>ValueError on parse failures</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.digest.get_allowed_digests">
<span class="sig-prename descclassname"><span class="pre">swift.common.digest.</span></span><span class="sig-name descname"><span class="pre">get_allowed_digests</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_digests</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.digest.get_allowed_digests" title="Permalink to this definition">¶</a></dt>
<dd><p>Pulls out ‘allowed_digests’ from the supplied conf. Then compares them with
the list of supported and deprecated digests and returns whatever remain.</p>
<p>When something is unsupported or deprecated it’ll log a warning.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf_digests</strong> – iterable of allowed digests. If empty, defaults to
DEFAULT_ALLOWED_DIGESTS.</p></li>
<li><p><strong>logger</strong> – optional logger; if provided, use it issue deprecation
warnings</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A set of allowed digests that are supported and a set of
deprecated digests.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>ValueError, if there are no digests left to return.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.digest.get_hmac">
<span class="sig-prename descclassname"><span class="pre">swift.common.digest.</span></span><span class="sig-name descname"><span class="pre">get_hmac</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expires</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">digest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sha1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.digest.get_hmac" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the hexdigest string of the HMAC (see RFC 2104) for
the request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request_method</strong> – Request method to allow.</p></li>
<li><p><strong>path</strong> – The path to the resource to allow access to.</p></li>
<li><p><strong>expires</strong> – Unix timestamp as an int for when the URL
expires.</p></li>
<li><p><strong>key</strong> – HMAC shared secret.</p></li>
<li><p><strong>digest</strong> – constructor or the string name for the digest to use in
calculating the HMAC
Defaults to SHA1</p></li>
<li><p><strong>ip_range</strong> – The ip range from which the resource is allowed
to be accessed. We need to put the ip_range as the
first argument to hmac to avoid manipulation of the path
due to newlines being valid in paths
e.g. /v1/a/c/on127.0.0.1</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>hexdigest str of the HMAC for the request using the specified
digest algorithm.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-swift.common.direct_client">
<span id="id6"></span><span id="direct-client"></span><h2>Direct Client<a class="headerlink" href="#module-swift.common.direct_client" title="Permalink to this heading">¶</a></h2>
<p>Internal client library for making calls directly to the servers rather than
through the proxy.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.direct_client.DirectClientException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">DirectClientException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.DirectClientException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClientException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.direct_client.DirectClientReconException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">DirectClientReconException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.DirectClientReconException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClientException</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_delete_account">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_delete_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_delete_account" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_delete_container">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_delete_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_delete_container" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete container directly from the container server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the container is on</p></li>
<li><p><strong>account</strong> – account name</p></li>
<li><p><strong>container</strong> – container name</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
<li><p><strong>headers</strong> – dict to be passed into HTTPConnection headers</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><strong>ClientException</strong></a> – HTTP DELETE request failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_delete_container_object">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_delete_container_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_delete_container_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_delete_object">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_delete_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_delete_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete object directly from the object server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the container is on</p></li>
<li><p><strong>account</strong> – account name</p></li>
<li><p><strong>container</strong> – container name</p></li>
<li><p><strong>obj</strong> – object name</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><strong>ClientException</strong></a> – HTTP DELETE request failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_get_account">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_get_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_get_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Get listings directly from the account server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the account is on</p></li>
<li><p><strong>account</strong> – account name</p></li>
<li><p><strong>marker</strong> – marker query</p></li>
<li><p><strong>limit</strong> – query limit</p></li>
<li><p><strong>prefix</strong> – prefix query</p></li>
<li><p><strong>delimiter</strong> – delimiter for the query</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
<li><p><strong>end_marker</strong> – end_marker query</p></li>
<li><p><strong>reverse</strong> – reverse the returned listing</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple of (response headers, a list of containers) The response
headers will HeaderKeyDict.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_get_container">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_get_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delimiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reverse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_get_container" title="Permalink to this definition">¶</a></dt>
<dd><p>Get container listings directly from the container server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the container is on</p></li>
<li><p><strong>account</strong> – account name</p></li>
<li><p><strong>container</strong> – container name</p></li>
<li><p><strong>marker</strong> – marker query</p></li>
<li><p><strong>limit</strong> – query limit</p></li>
<li><p><strong>prefix</strong> – prefix query</p></li>
<li><p><strong>delimiter</strong> – delimiter for the query</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
<li><p><strong>end_marker</strong> – end_marker query</p></li>
<li><p><strong>reverse</strong> – reverse the returned listing</p></li>
<li><p><strong>headers</strong> – headers to be included in the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple of (response headers, a list of objects) The response
headers will be a HeaderKeyDict.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_get_object">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_get_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp_chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_get_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Get object directly from the object server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the container is on</p></li>
<li><p><strong>account</strong> – account name</p></li>
<li><p><strong>container</strong> – container name</p></li>
<li><p><strong>obj</strong> – object name</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
<li><p><strong>resp_chunk_size</strong> – if defined, chunk size of data to read.</p></li>
<li><p><strong>headers</strong> – dict to be passed into HTTPConnection headers</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple of (response headers, the object’s contents) The response
headers will be a HeaderKeyDict.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><strong>ClientException</strong></a> – HTTP GET request failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_get_recon">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_get_recon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recon_command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_get_recon" title="Permalink to this definition">¶</a></dt>
<dd><p>Get recon json directly from the storage server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>recon_command</strong> – recon string (post /recon/)</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
<li><p><strong>headers</strong> – dict to be passed into HTTPConnection headers</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>deserialized json response</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.direct_client.DirectClientReconException" title="swift.common.direct_client.DirectClientReconException"><strong>DirectClientReconException</strong></a> – HTTP GET request failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_get_suffix_hashes">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_get_suffix_hashes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffixes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_get_suffix_hashes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get suffix hashes directly from the object server.</p>
<p>Note that unlike other <code class="docutils literal notranslate"><span class="pre">direct_client</span></code> functions, this one defaults
to using the replication network to make requests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the container is on</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
<li><p><strong>headers</strong> – dict to be passed into HTTPConnection headers</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dict of suffix hashes</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><strong>ClientException</strong></a> – HTTP REPLICATE request failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_head_container">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_head_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_head_container" title="Permalink to this definition">¶</a></dt>
<dd><p>Request container information directly from the container server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the container is on</p></li>
<li><p><strong>account</strong> – account name</p></li>
<li><p><strong>container</strong> – container name</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict containing the response’s headers in a HeaderKeyDict</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><strong>ClientException</strong></a> – HTTP HEAD request failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_head_object">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_head_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_head_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Request object information directly from the object server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the container is on</p></li>
<li><p><strong>account</strong> – account name</p></li>
<li><p><strong>container</strong> – container name</p></li>
<li><p><strong>obj</strong> – object name</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
<li><p><strong>headers</strong> – dict to be passed into HTTPConnection headers</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict containing the response’s headers in a HeaderKeyDict</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><strong>ClientException</strong></a> – HTTP HEAD request failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_post_object">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_post_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_post_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Direct update to object metadata on object server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the container is on</p></li>
<li><p><strong>account</strong> – account name</p></li>
<li><p><strong>container</strong> – container name</p></li>
<li><p><strong>name</strong> – object name</p></li>
<li><p><strong>headers</strong> – headers to store as metadata</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><strong>ClientException</strong></a> – HTTP POST request failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_put_container">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_put_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">65535</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_put_container" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a PUT request to a container server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the container is on</p></li>
<li><p><strong>account</strong> – account name</p></li>
<li><p><strong>container</strong> – container name</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
<li><p><strong>headers</strong> – additional headers to include in the request</p></li>
<li><p><strong>contents</strong> – an iterable or string to send in request body (optional)</p></li>
<li><p><strong>content_length</strong> – value to send as content-length header (optional)</p></li>
<li><p><strong>chunk_size</strong> – chunk size of data to send (optional)</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><strong>ClientException</strong></a> – HTTP PUT request failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_put_container_object">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_put_container_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_put_container_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.direct_put_object">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">direct_put_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">etag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">65535</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.direct_put_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Put object directly from the object server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – node dictionary from the ring</p></li>
<li><p><strong>part</strong> – partition the container is on</p></li>
<li><p><strong>account</strong> – account name</p></li>
<li><p><strong>container</strong> – container name</p></li>
<li><p><strong>name</strong> – object name</p></li>
<li><p><strong>contents</strong> – an iterable or string to read object data from</p></li>
<li><p><strong>content_length</strong> – value to send as content-length header</p></li>
<li><p><strong>etag</strong> – etag of contents</p></li>
<li><p><strong>content_type</strong> – value to send as content-type header</p></li>
<li><p><strong>headers</strong> – additional headers to include in the request</p></li>
<li><p><strong>conn_timeout</strong> – timeout in seconds for establishing the connection</p></li>
<li><p><strong>response_timeout</strong> – timeout in seconds for getting the response</p></li>
<li><p><strong>chunk_size</strong> – if defined, chunk size of data to send.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>etag from the server response</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><strong>ClientException</strong></a> – HTTP PUT request failed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.gen_headers">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">gen_headers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hdrs_in</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_ts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.gen_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the headers ready for a request. All requests should have a User-Agent
string, but if one is passed in don’t over-write it. Not all requests will
need an X-Timestamp, but if one is passed in do not over-write it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>headers</strong> – dict or None, base for HTTP headers</p></li>
<li><p><strong>add_ts</strong> – boolean, should be True for any “unsafe” HTTP request</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>HeaderKeyDict based on headers and ready for the request</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.direct_client.retry">
<span class="sig-prename descclassname"><span class="pre">swift.common.direct_client.</span></span><span class="sig-name descname"><span class="pre">retry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.direct_client.retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to retry a given function a number of times.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – callable to be called</p></li>
<li><p><strong>retries</strong> – number of retries</p></li>
<li><p><strong>error_log</strong> – logger for errors</p></li>
<li><p><strong>args</strong> – arguments to send to func</p></li>
<li><p><strong>kwargs</strong> – keyward arguments to send to func (if retries or
error_log are sent, they will be deleted from kwargs
before sending on to func)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>result of func</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.exceptions.ClientException" title="swift.common.exceptions.ClientException"><strong>ClientException</strong></a> – all retries failed</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="exceptions">
<span id="id7"></span><h2>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this heading">¶</a></h2>
<span class="target" id="module-swift.common.exceptions"></span><dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.APIVersionError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">APIVersionError</span></span><a class="headerlink" href="#swift.common.exceptions.APIVersionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ChunkReadError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ChunkReadError</span></span><a class="headerlink" href="#swift.common.exceptions.ChunkReadError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ChunkReadTimeout">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ChunkReadTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.ChunkReadTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Timeout</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ChunkWriteTimeout">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ChunkWriteTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.ChunkWriteTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Timeout</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ClientException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ClientException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_scheme</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_reason</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_response_content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">http_headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.ClientException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ConnectionTimeout">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ConnectionTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.ConnectionTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Timeout</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DatabaseAuditorException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DatabaseAuditorException</span></span><a class="headerlink" href="#swift.common.exceptions.DatabaseAuditorException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DeviceUnavailable">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DeviceUnavailable</span></span><a class="headerlink" href="#swift.common.exceptions.DeviceUnavailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileBadMetadataChecksum">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileBadMetadataChecksum</span></span><a class="headerlink" href="#swift.common.exceptions.DiskFileBadMetadataChecksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileCollision">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileCollision</span></span><a class="headerlink" href="#swift.common.exceptions.DiskFileCollision" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileDeleted">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileDeleted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.DiskFileDeleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DiskFileNotExist" title="swift.common.exceptions.DiskFileNotExist"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileNotExist</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileDeviceUnavailable">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileDeviceUnavailable</span></span><a class="headerlink" href="#swift.common.exceptions.DiskFileDeviceUnavailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileError</span></span><a class="headerlink" href="#swift.common.exceptions.DiskFileError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileExpired">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileExpired</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.DiskFileExpired" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DiskFileDeleted" title="swift.common.exceptions.DiskFileDeleted"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileDeleted</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileNoSpace">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileNoSpace</span></span><a class="headerlink" href="#swift.common.exceptions.DiskFileNoSpace" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileNotExist">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileNotExist</span></span><a class="headerlink" href="#swift.common.exceptions.DiskFileNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileNotOpen">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileNotOpen</span></span><a class="headerlink" href="#swift.common.exceptions.DiskFileNotOpen" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileQuarantined">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileQuarantined</span></span><a class="headerlink" href="#swift.common.exceptions.DiskFileQuarantined" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DiskFileXattrNotSupported">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DiskFileXattrNotSupported</span></span><a class="headerlink" href="#swift.common.exceptions.DiskFileXattrNotSupported" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DiskFileError" title="swift.common.exceptions.DiskFileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DiskFileError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DriveNotMounted">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DriveNotMounted</span></span><a class="headerlink" href="#swift.common.exceptions.DriveNotMounted" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.DuplicateDeviceError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">DuplicateDeviceError</span></span><a class="headerlink" href="#swift.common.exceptions.DuplicateDeviceError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.RingBuilderError" title="swift.common.exceptions.RingBuilderError"><code class="xref py py-class docutils literal notranslate"><span class="pre">RingBuilderError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.EmptyRingError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">EmptyRingError</span></span><a class="headerlink" href="#swift.common.exceptions.EmptyRingError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.RingBuilderError" title="swift.common.exceptions.RingBuilderError"><code class="xref py py-class docutils literal notranslate"><span class="pre">RingBuilderError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.EncryptionException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">EncryptionException</span></span><a class="headerlink" href="#swift.common.exceptions.EncryptionException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.FileNotFoundError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">FileNotFoundError</span></span><a class="headerlink" href="#swift.common.exceptions.FileNotFoundError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.FooterNotSupported">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">FooterNotSupported</span></span><a class="headerlink" href="#swift.common.exceptions.FooterNotSupported" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.InsufficientStorage">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">InsufficientStorage</span></span><a class="headerlink" href="#swift.common.exceptions.InsufficientStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.InvalidAccountInfo">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">InvalidAccountInfo</span></span><a class="headerlink" href="#swift.common.exceptions.InvalidAccountInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.DatabaseAuditorException" title="swift.common.exceptions.DatabaseAuditorException"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseAuditorException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.InvalidPidFileException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">InvalidPidFileException</span></span><a class="headerlink" href="#swift.common.exceptions.InvalidPidFileException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.InvalidTimestamp">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">InvalidTimestamp</span></span><a class="headerlink" href="#swift.common.exceptions.InvalidTimestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.LinkIterError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">LinkIterError</span></span><a class="headerlink" href="#swift.common.exceptions.LinkIterError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ListingIterError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ListingIterError</span></span><a class="headerlink" href="#swift.common.exceptions.ListingIterError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ListingIterNotAuthorized">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ListingIterNotAuthorized</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aresp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.ListingIterNotAuthorized" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.ListingIterError" title="swift.common.exceptions.ListingIterError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListingIterError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ListingIterNotFound">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ListingIterNotFound</span></span><a class="headerlink" href="#swift.common.exceptions.ListingIterNotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.ListingIterError" title="swift.common.exceptions.ListingIterError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ListingIterError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.LockTimeout">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">LockTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.LockTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.MessageTimeout" title="swift.common.exceptions.MessageTimeout"><code class="xref py py-class docutils literal notranslate"><span class="pre">MessageTimeout</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.MessageTimeout">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">MessageTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.MessageTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Timeout</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.MimeInvalid">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">MimeInvalid</span></span><a class="headerlink" href="#swift.common.exceptions.MimeInvalid" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.MultiphasePUTNotSupported">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">MultiphasePUTNotSupported</span></span><a class="headerlink" href="#swift.common.exceptions.MultiphasePUTNotSupported" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.PartitionLockTimeout">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">PartitionLockTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.PartitionLockTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.LockTimeout" title="swift.common.exceptions.LockTimeout"><code class="xref py py-class docutils literal notranslate"><span class="pre">LockTimeout</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.PathNotDir">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">PathNotDir</span></span><a class="headerlink" href="#swift.common.exceptions.PathNotDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">OSError</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.PermissionError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">PermissionError</span></span><a class="headerlink" href="#swift.common.exceptions.PermissionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.PutterConnectError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">PutterConnectError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.PutterConnectError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.QuarantineRequest">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">QuarantineRequest</span></span><a class="headerlink" href="#swift.common.exceptions.QuarantineRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.RangeAlreadyComplete">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">RangeAlreadyComplete</span></span><a class="headerlink" href="#swift.common.exceptions.RangeAlreadyComplete" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ReplicationException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ReplicationException</span></span><a class="headerlink" href="#swift.common.exceptions.ReplicationException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ReplicationLockTimeout">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ReplicationLockTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.ReplicationLockTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.LockTimeout" title="swift.common.exceptions.LockTimeout"><code class="xref py py-class docutils literal notranslate"><span class="pre">LockTimeout</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ResponseTimeout">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ResponseTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.exceptions.ResponseTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Timeout</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.RingBuilderError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">RingBuilderError</span></span><a class="headerlink" href="#swift.common.exceptions.RingBuilderError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.RingLoadError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">RingLoadError</span></span><a class="headerlink" href="#swift.common.exceptions.RingLoadError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.RingValidationError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">RingValidationError</span></span><a class="headerlink" href="#swift.common.exceptions.RingValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.RingBuilderError" title="swift.common.exceptions.RingBuilderError"><code class="xref py py-class docutils literal notranslate"><span class="pre">RingBuilderError</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.SegmentError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">SegmentError</span></span><a class="headerlink" href="#swift.common.exceptions.SegmentError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.ShortReadError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">ShortReadError</span></span><a class="headerlink" href="#swift.common.exceptions.ShortReadError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.SuffixSyncError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">SuffixSyncError</span></span><a class="headerlink" href="#swift.common.exceptions.SuffixSyncError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.SwiftException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">SwiftException</span></span><a class="headerlink" href="#swift.common.exceptions.SwiftException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.UnPicklingError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">UnPicklingError</span></span><a class="headerlink" href="#swift.common.exceptions.UnPicklingError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.SwiftException" title="swift.common.exceptions.SwiftException"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftException</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.exceptions.UnknownSecretIdError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.exceptions.</span></span><span class="sig-name descname"><span class="pre">UnknownSecretIdError</span></span><a class="headerlink" href="#swift.common.exceptions.UnknownSecretIdError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.exceptions.EncryptionException" title="swift.common.exceptions.EncryptionException"><code class="xref py py-class docutils literal notranslate"><span class="pre">EncryptionException</span></code></a></p>
</dd></dl>

</section>
<section id="module-swift.common.internal_client">
<span id="id8"></span><span id="internal-client"></span><h2>Internal Client<a class="headerlink" href="#module-swift.common.internal_client" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="swift.common.internal_client.CompressingFileReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.internal_client.</span></span><span class="sig-name descname"><span class="pre">CompressingFileReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compresslevel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4096</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.CompressingFileReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for file object to compress object while reading.</p>
<p>Can be used to wrap file objects passed to InternalClient.upload_object().</p>
<p>Used in testing of InternalClient.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_obj</strong> – File object to wrap.</p></li>
<li><p><strong>compresslevel</strong> – Compression level, defaults to 9.</p></li>
<li><p><strong>chunk_size</strong> – Size of chunks read when iterating using object,
defaults to 4096.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.CompressingFileReader.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.CompressingFileReader.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.CompressingFileReader.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.CompressingFileReader.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a chunk from the file object.</p>
<p>Params are passed directly to the underlying file object’s read().</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Compressed chunk from file object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.CompressingFileReader.seek">
<span class="sig-name descname"><span class="pre">seek</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.CompressingFileReader.seek" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.CompressingFileReader.set_initial_state">
<span class="sig-name descname"><span class="pre">set_initial_state</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.CompressingFileReader.set_initial_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the object to the state needed for the first read.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.internal_client.</span></span><span class="sig-name descname"><span class="pre">InternalClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_agent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request_tries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_modify_pipeline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_replication_network</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_conf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An internal client that uses a swift proxy app to make requests to Swift.</p>
<p>This client will exponentially slow down for retries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf_path</strong> – Full path to proxy config.</p></li>
<li><p><strong>user_agent</strong> – User agent to be sent to requests to Swift.</p></li>
<li><p><strong>request_tries</strong> – Number of tries before InternalClient.make_request()
gives up.</p></li>
<li><p><strong>global_conf</strong> – a dict of options to update the loaded proxy config.
Options in <code class="docutils literal notranslate"><span class="pre">global_conf</span></code> will override those in <code class="docutils literal notranslate"><span class="pre">conf_path</span></code> except
where the <code class="docutils literal notranslate"><span class="pre">conf_path</span></code> option is preceded by <code class="docutils literal notranslate"><span class="pre">set</span></code>.</p></li>
<li><p><strong>app</strong> – Optionally provide a WSGI app for the internal client to use.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.container_exists">
<span class="sig-name descname"><span class="pre">container_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.container_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to see if a container exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The container’s account.</p></li>
<li><p><strong>container</strong> – Container to check.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if container exists, false otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.create_account">
<span class="sig-name descname"><span class="pre">create_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.create_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>account</strong> – Account to create.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.create_container">
<span class="sig-name descname"><span class="pre">create_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.create_container" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates container.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The container’s account.</p></li>
<li><p><strong>container</strong> – Container to create.</p></li>
<li><p><strong>headers</strong> – Defaults to empty dict.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2,).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.delete_account">
<span class="sig-name descname"><span class="pre">delete_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,</span> <span class="pre">404)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.delete_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes an account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – Account to delete.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2, HTTP_NOT_FOUND).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.delete_container">
<span class="sig-name descname"><span class="pre">delete_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,</span> <span class="pre">404)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.delete_container" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes a container.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The container’s account.</p></li>
<li><p><strong>container</strong> – Container to delete.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2, HTTP_NOT_FOUND).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.delete_object">
<span class="sig-name descname"><span class="pre">delete_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,</span> <span class="pre">404)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.delete_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes an object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The object’s account.</p></li>
<li><p><strong>container</strong> – The object’s container.</p></li>
<li><p><strong>obj</strong> – The object.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2, HTTP_NOT_FOUND).</p></li>
<li><p><strong>headers</strong> – extra headers to send with request</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.get_account_info">
<span class="sig-name descname"><span class="pre">get_account_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,</span> <span class="pre">404)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.get_account_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns (container_count, object_count) for an account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – Account on which to get the information.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2, HTTP_NOT_FOUND).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.get_account_metadata">
<span class="sig-name descname"><span class="pre">get_account_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.get_account_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets account metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – Account on which to get the metadata.</p></li>
<li><p><strong>metadata_prefix</strong> – Used to filter values from the headers
returned.  Will strip that prefix from the
keys in the dict returned.  Defaults to ‘’.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2,).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns dict of account metadata.  Keys will be lowercase.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.get_container_metadata">
<span class="sig-name descname"><span class="pre">get_container_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.get_container_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets container metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The container’s account.</p></li>
<li><p><strong>container</strong> – Container to get metadata on.</p></li>
<li><p><strong>metadata_prefix</strong> – Used to filter values from the headers
returned.  Will strip that prefix from the
keys in the dict returned.  Defaults to ‘’.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2,).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns dict of container metadata.  Keys will be lowercase.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.get_object">
<span class="sig-name descname"><span class="pre">get_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.get_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets an object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The object’s account.</p></li>
<li><p><strong>container</strong> – The object’s container.</p></li>
<li><p><strong>obj</strong> – The object name.</p></li>
<li><p><strong>headers</strong> – Headers to send with request, defaults to empty dict.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2,).</p></li>
<li><p><strong>params</strong> – A dict of params to be set in request query string,
defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A 3-tuple (status, headers, iterator of object body)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.get_object_metadata">
<span class="sig-name descname"><span class="pre">get_object_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.get_object_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets object metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The object’s account.</p></li>
<li><p><strong>container</strong> – The object’s container.</p></li>
<li><p><strong>obj</strong> – The object.</p></li>
<li><p><strong>metadata_prefix</strong> – Used to filter values from the headers
returned.  Will strip that prefix from the
keys in the dict returned.  Defaults to ‘’.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2,).</p></li>
<li><p><strong>headers</strong> – extra headers to send with request</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict of object metadata.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.handle_request">
<span class="sig-name descname"><span class="pre">handle_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.handle_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.iter_containers">
<span class="sig-name descname"><span class="pre">iter_containers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,</span> <span class="pre">404)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.iter_containers" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator of containers dicts from an account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – Account on which to do the container listing.</p></li>
<li><p><strong>marker</strong> – Prefix of first desired item, defaults to ‘’.</p></li>
<li><p><strong>end_marker</strong> – Last item returned will be ‘less’ than this,
defaults to ‘’.</p></li>
<li><p><strong>prefix</strong> – Prefix of containers</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2, HTTP_NOT_FOUND).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.iter_object_lines">
<span class="sig-name descname"><span class="pre">iter_object_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.iter_object_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator of object lines from an uncompressed or compressed
text object.</p>
<p>Uncompress object as it is read if the object’s name ends with ‘.gz’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The object’s account.</p></li>
<li><p><strong>container</strong> – The object’s container.</p></li>
<li><p><strong>obj</strong> – The object.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2,).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.iter_objects">
<span class="sig-name descname"><span class="pre">iter_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,</span> <span class="pre">404)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.iter_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator of object dicts from a container.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The container’s account.</p></li>
<li><p><strong>container</strong> – Container to iterate objects on.</p></li>
<li><p><strong>marker</strong> – Prefix of first desired item, defaults to ‘’.</p></li>
<li><p><strong>end_marker</strong> – Last item returned will be ‘less’ than this,
defaults to ‘’.</p></li>
<li><p><strong>prefix</strong> – Prefix of objects</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2, HTTP_NOT_FOUND).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.make_path">
<span class="sig-name descname"><span class="pre">make_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.make_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a swift path for a request quoting and utf-8 encoding the path
parts as need be.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – swift account</p></li>
<li><p><strong>container</strong> – container, defaults to None</p></li>
<li><p><strong>obj</strong> – object, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – Is raised if obj is specified and container is
not.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.make_request">
<span class="sig-name descname"><span class="pre">make_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.make_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a request to Swift with retries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> – HTTP method of request.</p></li>
<li><p><strong>path</strong> – Path of request.</p></li>
<li><p><strong>headers</strong> – Headers to be sent with request.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of acceptable statuses for request.</p></li>
<li><p><strong>body_file</strong> – Body file to be passed along with request,
defaults to None.</p></li>
<li><p><strong>params</strong> – A dict of params to be set in request query string,
defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Response object on success.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when make_request() fails
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.set_account_metadata">
<span class="sig-name descname"><span class="pre">set_account_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.set_account_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets account metadata.  A call to this will add to the account
metadata and not overwrite all of it with values in the metadata dict.
To clear an account metadata value, pass an empty string as
the value for the key in the metadata dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – Account on which to get the metadata.</p></li>
<li><p><strong>metadata</strong> – Dict of metadata to set.</p></li>
<li><p><strong>metadata_prefix</strong> – Prefix used to set metadata values in headers
of requests, used to prefix keys in metadata
when setting metadata, defaults to ‘’.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2,).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.set_container_metadata">
<span class="sig-name descname"><span class="pre">set_container_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.set_container_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets container metadata.  A call to this will add to the container
metadata and not overwrite all of it with values in the metadata dict.
To clear a container metadata value, pass an empty string as the value
for the key in the metadata dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The container’s account.</p></li>
<li><p><strong>container</strong> – Container to set metadata on.</p></li>
<li><p><strong>metadata</strong> – Dict of metadata to set.</p></li>
<li><p><strong>metadata_prefix</strong> – Prefix used to set metadata values in headers
of requests, used to prefix keys in metadata
when setting metadata, defaults to ‘’.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2,).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.set_object_metadata">
<span class="sig-name descname"><span class="pre">set_object_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.set_object_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets an object’s metadata.  The object’s metadata will be overwritten
by the values in the metadata dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The object’s account.</p></li>
<li><p><strong>container</strong> – The object’s container.</p></li>
<li><p><strong>obj</strong> – The object.</p></li>
<li><p><strong>metadata</strong> – Dict of metadata to set.</p></li>
<li><p><strong>metadata_prefix</strong> – Prefix used to set metadata values in headers
of requests, used to prefix keys in metadata
when setting metadata, defaults to ‘’.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of status for valid responses,
defaults to (2,).</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.InternalClient.upload_object">
<span class="sig-name descname"><span class="pre">upload_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fobj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptable_statuses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(2,)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.InternalClient.upload_object" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fobj</strong> – File object to read object’s content from.</p></li>
<li><p><strong>account</strong> – The object’s account.</p></li>
<li><p><strong>container</strong> – The object’s container.</p></li>
<li><p><strong>obj</strong> – The object.</p></li>
<li><p><strong>headers</strong> – Headers to send with request, defaults to empty dict.</p></li>
<li><p><strong>acceptable_statuses</strong> – List of acceptable statuses for request.</p></li>
<li><p><strong>params</strong> – A dict of params to be set in request query string,
defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse" title="swift.common.internal_client.UnexpectedResponse"><strong>UnexpectedResponse</strong></a> – Exception raised when requests fail
to get a response with an acceptable status</p></li>
<li><p><strong>Exception</strong> – Exception is raised when code fails in an
unexpected way.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.internal_client.SimpleClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.internal_client.</span></span><span class="sig-name descname"><span class="pre">SimpleClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">starting_backoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_backoff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.SimpleClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Simple client that is used in bin/swift-dispersion-* and container sync</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.SimpleClient.base_request">
<span class="sig-name descname"><span class="pre">base_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proxy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_listing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.SimpleClient.base_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.SimpleClient.get_account">
<span class="sig-name descname"><span class="pre">get_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.SimpleClient.get_account" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.SimpleClient.get_container">
<span class="sig-name descname"><span class="pre">get_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.SimpleClient.get_container" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.SimpleClient.put_container">
<span class="sig-name descname"><span class="pre">put_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.SimpleClient.put_container" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.SimpleClient.put_object">
<span class="sig-name descname"><span class="pre">put_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.SimpleClient.put_object" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.internal_client.SimpleClient.retry_request">
<span class="sig-name descname"><span class="pre">retry_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.SimpleClient.retry_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.internal_client.UnexpectedResponse">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.internal_client.</span></span><span class="sig-name descname"><span class="pre">UnexpectedResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.UnexpectedResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Exception raised on invalid responses to InternalClient.make_request().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> – Exception message.</p></li>
<li><p><strong>resp</strong> – The unexpected response.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.internal_client.delete_object">
<span class="sig-prename descclassname"><span class="pre">swift.common.internal_client.</span></span><span class="sig-name descname"><span class="pre">delete_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.delete_object" title="Permalink to this definition">¶</a></dt>
<dd><p>For usage with container sync</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.internal_client.get_auth">
<span class="sig-prename descclassname"><span class="pre">swift.common.internal_client.</span></span><span class="sig-name descname"><span class="pre">get_auth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'1.0'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.get_auth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.internal_client.head_object">
<span class="sig-prename descclassname"><span class="pre">swift.common.internal_client.</span></span><span class="sig-name descname"><span class="pre">head_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.head_object" title="Permalink to this definition">¶</a></dt>
<dd><p>For usage with container sync</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.internal_client.put_object">
<span class="sig-prename descclassname"><span class="pre">swift.common.internal_client.</span></span><span class="sig-name descname"><span class="pre">put_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.internal_client.put_object" title="Permalink to this definition">¶</a></dt>
<dd><p>For usage with container sync</p>
</dd></dl>

</section>
<section id="module-swift.common.manager">
<span id="manager"></span><h2>Manager<a class="headerlink" href="#module-swift.common.manager" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="swift.common.manager.Manager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.manager.</span></span><span class="sig-name descname"><span class="pre">Manager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">servers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/var/run/swift'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Main class for performing commands on groups of servers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>servers</strong> – list of server names as strings</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.force_reload">
<span class="sig-name descname"><span class="pre">force_reload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.force_reload" title="Permalink to this definition">¶</a></dt>
<dd><p>alias for reload</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.get_command">
<span class="sig-name descname"><span class="pre">get_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.get_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Find and return the decorated method named like cmd</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cmd</strong> – the command to get, a string, if not found raises
UnknownCommandError</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.kill">
<span class="sig-name descname"><span class="pre">kill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>stop a server (no error if not running)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.kill_child_pids">
<span class="sig-name descname"><span class="pre">kill_child_pids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.kill_child_pids" title="Permalink to this definition">¶</a></dt>
<dd><p>kill child pids, optionally servicing accepted connections</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.list_commands">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">list_commands</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.list_commands" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all publicly accessible commands</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of string tuples (cmd, help), the method names who are
decorated as commands</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.no_daemon">
<span class="sig-name descname"><span class="pre">no_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.no_daemon" title="Permalink to this definition">¶</a></dt>
<dd><p>start a server interactively</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.no_wait">
<span class="sig-name descname"><span class="pre">no_wait</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.no_wait" title="Permalink to this definition">¶</a></dt>
<dd><p>spawn server and return immediately</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.once">
<span class="sig-name descname"><span class="pre">once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.once" title="Permalink to this definition">¶</a></dt>
<dd><p>start server and run one pass on supporting daemons</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.reload">
<span class="sig-name descname"><span class="pre">reload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.reload" title="Permalink to this definition">¶</a></dt>
<dd><p>graceful shutdown then restart on supporting servers</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.reload_seamless">
<span class="sig-name descname"><span class="pre">reload_seamless</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.reload_seamless" title="Permalink to this definition">¶</a></dt>
<dd><p>seamlessly re-exec, then shutdown of old listen sockets on
supporting servers</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.restart">
<span class="sig-name descname"><span class="pre">restart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.restart" title="Permalink to this definition">¶</a></dt>
<dd><p>stops then restarts server</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.run_command">
<span class="sig-name descname"><span class="pre">run_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.run_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the named command and run it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cmd</strong> – the command name to run</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.shutdown">
<span class="sig-name descname"><span class="pre">shutdown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>allow current requests to finish on supporting servers</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.start" title="Permalink to this definition">¶</a></dt>
<dd><p>starts a server</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.status">
<span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.status" title="Permalink to this definition">¶</a></dt>
<dd><p>display status of tracked pids for server</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Manager.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Manager.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>stops a server</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.manager.Server">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.manager.</span></span><span class="sig-name descname"><span class="pre">Server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/var/run/swift'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manage operations on a server or group of servers of similar type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>server</strong> – name of server</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.conf_files">
<span class="sig-name descname"><span class="pre">conf_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.conf_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Get conf files for this server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>number</strong> – if supplied will only lookup the nth server</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of conf files</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.get_conf_file_name">
<span class="sig-name descname"><span class="pre">get_conf_file_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.get_conf_file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate pid_file to a corresponding conf_file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pid_file</strong> – a pid_file for this server, a string</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the conf_file for this pid_file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.get_pid_file_name">
<span class="sig-name descname"><span class="pre">get_pid_file_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.get_pid_file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate conf_file to a corresponding pid_file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conf_file</strong> – an conf_file for this server, a string</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the pid_file for this conf_file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.get_running_pids">
<span class="sig-name descname"><span class="pre">get_running_pids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.get_running_pids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get running pids</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a dict mapping pids (ints) to pid_files (paths)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.interact">
<span class="sig-name descname"><span class="pre">interact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.interact" title="Permalink to this definition">¶</a></dt>
<dd><p>wait on spawned procs to terminate</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.iter_pid_files">
<span class="sig-name descname"><span class="pre">iter_pid_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.iter_pid_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator, yields (pid_file, pids)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.kill_child_pids">
<span class="sig-name descname"><span class="pre">kill_child_pids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.kill_child_pids" title="Permalink to this definition">¶</a></dt>
<dd><p>Kill child pids, leaving server overseer to respawn them</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graceful</strong> – if True, attempt SIGHUP on supporting servers</p></li>
<li><p><strong>seamless</strong> – if True, attempt SIGUSR1 on supporting servers</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict mapping pids (ints) to pid_files (paths)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.kill_running_pids">
<span class="sig-name descname"><span class="pre">kill_running_pids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.kill_running_pids" title="Permalink to this definition">¶</a></dt>
<dd><p>Kill running pids</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graceful</strong> – if True, attempt SIGHUP on supporting servers</p></li>
<li><p><strong>seamless</strong> – if True, attempt SIGUSR1 on supporting servers</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict mapping pids (ints) to pid_files (paths)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.launch">
<span class="sig-name descname"><span class="pre">launch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.launch" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect conf files and attempt to spawn the processes for this server</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.pid_files">
<span class="sig-name descname"><span class="pre">pid_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.pid_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Get pid files for this server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>number</strong> – if supplied will only lookup the nth server</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of pid files</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.signal_children">
<span class="sig-name descname"><span class="pre">signal_children</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sig</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.signal_children" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a signal to child pids for this server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sig</strong> – signal to send</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict mapping pids (ints) to pid_files (paths)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.signal_pids">
<span class="sig-name descname"><span class="pre">signal_pids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sig</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.signal_pids" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a signal to pids for this server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sig</strong> – signal to send</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict mapping pids (ints) to pid_files (paths)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.spawn">
<span class="sig-name descname"><span class="pre">spawn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">once</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">daemon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Launch a subprocess for this server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf_file</strong> – path to conf_file to use as first arg</p></li>
<li><p><strong>once</strong> – boolean, add once argument to command</p></li>
<li><p><strong>wait</strong> – boolean, if true capture stdout with a pipe</p></li>
<li><p><strong>daemon</strong> – boolean, if false ask server to log to console</p></li>
<li><p><strong>additional_args</strong> – list of additional arguments to pass
on the command line</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the pid of the spawned process</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.status">
<span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Display status of server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pids</strong> – if not supplied pids will be populated automatically</p></li>
<li><p><strong>number</strong> – if supplied will only lookup the nth server</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>1 if server is not running, 0 otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Send stop signals to pids for this server</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a dict mapping pids (ints) to pid_files (paths)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.manager.Server.wait">
<span class="sig-name descname"><span class="pre">wait</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.Server.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>wait on spawned procs to start</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.manager.UnknownCommandError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.manager.</span></span><span class="sig-name descname"><span class="pre">UnknownCommandError</span></span><a class="headerlink" href="#swift.common.manager.UnknownCommandError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.manager.command">
<span class="sig-prename descclassname"><span class="pre">swift.common.manager.</span></span><span class="sig-name descname"><span class="pre">command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to declare which methods are accessible as commands, commands
always return 1 or 0, where 0 should indicate success.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> – function to make public</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.manager.format_server_name">
<span class="sig-prename descclassname"><span class="pre">swift.common.manager.</span></span><span class="sig-name descname"><span class="pre">format_server_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">servername</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.format_server_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats server name as swift compatible server names
E.g. swift-object-server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>servername</strong> – server name</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>swift compatible server name and its binary name</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.manager.kill_group">
<span class="sig-prename descclassname"><span class="pre">swift.common.manager.</span></span><span class="sig-name descname"><span class="pre">kill_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.kill_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Send signal to process group</p>
<p>: param pid: process id
: param sig: signal to send</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.manager.safe_kill">
<span class="sig-prename descclassname"><span class="pre">swift.common.manager.</span></span><span class="sig-name descname"><span class="pre">safe_kill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.safe_kill" title="Permalink to this definition">¶</a></dt>
<dd><p>Send signal to process and check process name</p>
<p>: param pid: process id
: param sig: signal to send
: param name: name to ensure target process</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.manager.setup_env">
<span class="sig-prename descclassname"><span class="pre">swift.common.manager.</span></span><span class="sig-name descname"><span class="pre">setup_env</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.setup_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to increase resource limits of the OS. Move PYTHON_EGG_CACHE to /tmp</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.manager.verify_server">
<span class="sig-prename descclassname"><span class="pre">swift.common.manager.</span></span><span class="sig-name descname"><span class="pre">verify_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.verify_server" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the server is among swift servers or not, and also
checks whether the server’s binaries are installed or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>server</strong> – name of the server</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True, when the server name is valid and its binaries are found.
False, otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.manager.watch_server_pids">
<span class="sig-prename descclassname"><span class="pre">swift.common.manager.</span></span><span class="sig-name descname"><span class="pre">watch_server_pids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_pids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.manager.watch_server_pids" title="Permalink to this definition">¶</a></dt>
<dd><p>Monitor a collection of server pids yielding back those pids that
aren’t responding to signals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>server_pids</strong> – a dict, lists of pids [int,…] keyed on
Server objects</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-swift.common.memcached">
<span id="memcached"></span><h2>MemCacheD<a class="headerlink" href="#module-swift.common.memcached" title="Permalink to this heading">¶</a></h2>
<p>Why our own memcache client?
By Michael Barton</p>
<p>python-memcached doesn’t use consistent hashing, so adding or
removing a memcache server from the pool invalidates a huge
percentage of cached items.</p>
<p>If you keep a pool of python-memcached client objects, each client
object has its own connection to every memcached server, only one of
which is ever in use.  So you wind up with n * m open sockets and
almost all of them idle. This client effectively has a pool for each
server, so the number of backend connections is hopefully greatly
reduced.</p>
<p>python-memcache uses pickle to store things, and there was already a
huge stink about Swift using pickles in memcache
(<a class="reference external" href="http://osvdb.org/show/osvdb/86581">http://osvdb.org/show/osvdb/86581</a>).  That seemed sort of unfair,
since nova and keystone and everyone else use pickles for memcache
too, but it’s hidden behind a “standard” library. But changing would
be a security regression at this point.</p>
<p>Also, pylibmc wouldn’t work for us because it needs to use python
sockets in order to play nice with eventlet.</p>
<p>Lucid comes with memcached: v1.4.2.  Protocol documentation for that
version is at:</p>
<p><a class="reference external" href="http://github.com/memcached/memcached/blob/1.4.2/doc/protocol.txt">http://github.com/memcached/memcached/blob/1.4.2/doc/protocol.txt</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheConnPool">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.memcached.</span></span><span class="sig-name descname"><span class="pre">MemcacheConnPool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tls_context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheConnPool" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></p>
<p>Connection pool for Memcache Connections</p>
<p>The <em>server</em> parameter can be a hostname, an IPv4 address, or an IPv6
address with an optional port. See
<a class="reference internal" href="#swift.common.utils.parse_socket_string" title="swift.common.utils.parse_socket_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">swift.common.utils.parse_socket_string()</span></code></a> for details.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheConnPool.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheConnPool.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a new pool item.  In order for the pool to
function, either this method must be overriden in a subclass
or the pool must be constructed with the <cite>create</cite> argument.
It accepts no arguments and returns a single instance of
whatever thing the pool is supposed to contain.</p>
<p>In general, <a class="reference internal" href="#swift.common.memcached.MemcacheConnPool.create" title="swift.common.memcached.MemcacheConnPool.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create()</span></code></a> is called whenever the pool exceeds its
previous high-water mark of concurrently-checked-out-items.  In other
words, in a new pool with <em>min_size</em> of 0, the very first call
to <a class="reference internal" href="#swift.common.memcached.MemcacheConnPool.get" title="swift.common.memcached.MemcacheConnPool.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> will result in a call to <a class="reference internal" href="#swift.common.memcached.MemcacheConnPool.create" title="swift.common.memcached.MemcacheConnPool.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create()</span></code></a>.  If the first
caller calls <code class="xref py py-meth docutils literal notranslate"><span class="pre">put()</span></code> before some other caller calls <a class="reference internal" href="#swift.common.memcached.MemcacheConnPool.get" title="swift.common.memcached.MemcacheConnPool.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a>,
then the first item will be returned, and <a class="reference internal" href="#swift.common.memcached.MemcacheConnPool.create" title="swift.common.memcached.MemcacheConnPool.create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create()</span></code></a> will not be
called a second time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheConnPool.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheConnPool.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an item from the pool, when one is available.  This may
cause the calling greenthread to block.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheConnectionError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.memcached.</span></span><span class="sig-name descname"><span class="pre">MemcacheConnectionError</span></span><a class="headerlink" href="#swift.common.memcached.MemcacheConnectionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.memcached.MemcachePoolTimeout">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.memcached.</span></span><span class="sig-name descname"><span class="pre">MemcachePoolTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcachePoolTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Timeout</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheRing">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.memcached.</span></span><span class="sig-name descname"><span class="pre">MemcacheRing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">servers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">io_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_conns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tls_context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_limit_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_limit_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_limit_duration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_size_warning_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheRing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Simple, consistent-hashed memcache client.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheRing.decr">
<span class="sig-name descname"><span class="pre">decr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheRing.decr" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrements a key which has a numeric value by delta. Calls incr with
-delta.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – key</p></li>
<li><p><strong>delta</strong> – amount to subtract to the value of key (or set the
value to 0 if the key is not found) will be cast to
an int</p></li>
<li><p><strong>time</strong> – the time to live</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>result of decrementing</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.memcached.MemcacheConnectionError" title="swift.common.memcached.MemcacheConnectionError"><strong>MemcacheConnectionError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheRing.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheRing.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes a key/value pair from memcache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – key to be deleted</p></li>
<li><p><strong>server_key</strong> – key to use in determining which server in the ring
is used</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheRing.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheRing.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the object specified by key.  It will also unserialize the object
before returning if it is serialized in memcache with JSON.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – key</p></li>
<li><p><strong>raise_on_error</strong> – if True, propagate Timeouts and other errors.
By default, errors are treated as cache misses.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>value of the key in memcache</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheRing.get_multi">
<span class="sig-name descname"><span class="pre">get_multi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheRing.get_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets multiple values from memcache for the given keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> – keys for values to be retrieved from memcache</p></li>
<li><p><strong>server_key</strong> – key to use in determining which server in the ring
is used</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of values</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheRing.incr">
<span class="sig-name descname"><span class="pre">incr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheRing.incr" title="Permalink to this definition">¶</a></dt>
<dd><p>Increments a key which has a numeric value by delta.
If the key can’t be found, it’s added as delta or 0 if delta &lt; 0.
If passed a negative number, will use memcached’s decr. Returns
the int stored in memcached
Note: The data memcached stores as the result of incr/decr is
an unsigned int.  decr’s that result in a number below 0 are
stored as 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – key</p></li>
<li><p><strong>delta</strong> – amount to add to the value of key (or set as the value
if the key is not found) will be cast to an int</p></li>
<li><p><strong>time</strong> – the time to live</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>result of incrementing</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.memcached.MemcacheConnectionError" title="swift.common.memcached.MemcacheConnectionError"><strong>MemcacheConnectionError</strong></a> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheRing.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serialize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_compress_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheRing.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a key/value pair in memcache</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – key</p></li>
<li><p><strong>value</strong> – value</p></li>
<li><p><strong>serialize</strong> – if True, value is serialized with JSON before sending
to memcache</p></li>
<li><p><strong>time</strong> – the time to live</p></li>
<li><p><strong>min_compress_len</strong> – minimum compress length, this parameter was
added to keep the signature compatible with
python-memcached interface. This
implementation ignores it.</p></li>
<li><p><strong>raise_on_error</strong> – if True, propagate Timeouts and other errors.
By default, errors are ignored.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.memcached.MemcacheRing.set_multi">
<span class="sig-name descname"><span class="pre">set_multi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serialize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_compress_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.MemcacheRing.set_multi" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets multiple key/value pairs in memcache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mapping</strong> – dictionary of keys and values to be set in memcache</p></li>
<li><p><strong>server_key</strong> – key to use in determining which server in the ring
is used</p></li>
<li><p><strong>serialize</strong> – if True, value is serialized with JSON before sending
to memcache.</p></li>
<li><p><strong>time</strong> – the time to live</p></li>
</ul>
</dd>
<dt class="field-even">Min_compress_len<span class="colon">:</span></dt>
<dd class="field-even"><p>minimum compress length, this parameter was added
to keep the signature compatible with
python-memcached interface. This implementation
ignores it</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.memcached.load_memcache">
<span class="sig-prename descclassname"><span class="pre">swift.common.memcached.</span></span><span class="sig-name descname"><span class="pre">load_memcache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.load_memcache" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a MemcacheRing object from the given config.  It will also use the
passed in logger.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf</strong> – a dict, the config options</p></li>
<li><p><strong>logger</strong> – a logger</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.memcached.sanitize_timeout">
<span class="sig-prename descclassname"><span class="pre">swift.common.memcached.</span></span><span class="sig-name descname"><span class="pre">sanitize_timeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.memcached.sanitize_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Sanitize a timeout value to use an absolute expiration time if the delta
is greater than 30 days (in seconds). Note that the memcached server
translates negative values to mean a delta of 30 days in seconds (and 1
additional second), client beware.</p>
</dd></dl>

</section>
<section id="module-swift.common.registry">
<span id="middleware-registry"></span><span id="registry"></span><h2>Middleware Registry<a class="headerlink" href="#module-swift.common.registry" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="swift.common.registry.get_sensitive_headers">
<span class="sig-prename descclassname"><span class="pre">swift.common.registry.</span></span><span class="sig-name descname"><span class="pre">get_sensitive_headers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.registry.get_sensitive_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the set of registered sensitive headers.</p>
<p>Used by <a class="reference internal" href="middleware.html#module-swift.common.middleware.proxy_logging" title="swift.common.middleware.proxy_logging"><code class="xref py py-mod docutils literal notranslate"><span class="pre">swift.common.middleware.proxy_logging</span></code></a> to perform redactions
prior to logging.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.registry.get_sensitive_params">
<span class="sig-prename descclassname"><span class="pre">swift.common.registry.</span></span><span class="sig-name descname"><span class="pre">get_sensitive_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.registry.get_sensitive_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the set of registered sensitive query parameters.</p>
<p>Used by <a class="reference internal" href="middleware.html#module-swift.common.middleware.proxy_logging" title="swift.common.middleware.proxy_logging"><code class="xref py py-mod docutils literal notranslate"><span class="pre">swift.common.middleware.proxy_logging</span></code></a> to perform redactions
prior to logging.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.registry.get_swift_info">
<span class="sig-prename descclassname"><span class="pre">swift.common.registry.</span></span><span class="sig-name descname"><span class="pre">get_swift_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">admin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disallowed_sections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.registry.get_swift_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns information about the swift cluster that has been previously
registered with the register_swift_info call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>admin</strong> – boolean value, if True will additionally return an ‘admin’
section with information previously registered as admin
info.</p></li>
<li><p><strong>disallowed_sections</strong> – list of section names to be withheld from the
information returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary of information about the swift cluster.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.registry.register_sensitive_header">
<span class="sig-prename descclassname"><span class="pre">swift.common.registry.</span></span><span class="sig-name descname"><span class="pre">register_sensitive_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.registry.register_sensitive_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a header as being “sensitive”.</p>
<p>Sensitive headers are automatically redacted when logging. See the
<code class="docutils literal notranslate"><span class="pre">reveal_sensitive_prefix</span></code> option in the proxy-server sample config
for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>header</strong> – The (case-insensitive) header name which, if present, may
contain sensitive information. Examples include <code class="docutils literal notranslate"><span class="pre">X-Auth-Token</span></code> and
(if s3api is enabled) <code class="docutils literal notranslate"><span class="pre">Authorization</span></code>. Limited to ASCII characters.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.registry.register_sensitive_param">
<span class="sig-prename descclassname"><span class="pre">swift.common.registry.</span></span><span class="sig-name descname"><span class="pre">register_sensitive_param</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_param</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.registry.register_sensitive_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a query parameter as being “sensitive”.</p>
<p>Sensitive query parameters are automatically redacted when logging. See
the <code class="docutils literal notranslate"><span class="pre">reveal_sensitive_prefix</span></code> option in the proxy-server sample config
for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>query_param</strong> – The (case-sensitive) query parameter name which, if
present, may contain sensitive information. Examples include
<code class="docutils literal notranslate"><span class="pre">temp_url_signature</span></code> and (if s3api is enabled) <code class="docutils literal notranslate"><span class="pre">X-Amz-Signature</span></code>.
Limited to ASCII characters.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.registry.register_swift_info">
<span class="sig-prename descclassname"><span class="pre">swift.common.registry.</span></span><span class="sig-name descname"><span class="pre">register_swift_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'swift'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">admin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.registry.register_swift_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers information about the swift cluster to be retrieved with calls
to get_swift_info.</p>
<dl class="simple">
<dt>NOTE: Do not use “.” in the param: name or any keys in kwargs. “.” is used</dt><dd><p>in the disallowed_sections to remove unwanted keys from /info.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – string, the section name to place the information under.</p></li>
<li><p><strong>admin</strong> – boolean, if True, information will be registered to an
admin section which can optionally be withheld when
requesting the information.</p></li>
<li><p><strong>kwargs</strong> – key value arguments representing the information to be
added.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if name or any of the keys in kwargs has “.” in it</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-swift.common.request_helpers">
<span id="id9"></span><span id="request-helpers"></span><h2>Request Helpers<a class="headerlink" href="#module-swift.common.request_helpers" title="Permalink to this heading">¶</a></h2>
<p>Miscellaneous utility functions for use in generating responses.</p>
<p>Why not swift.common.utils, you ask? Because this way we can import things
from swob in here without creating circular imports.</p>
<dl class="py class">
<dt class="sig sig-object py" id="swift.common.request_helpers.SegmentedIterable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">SegmentedIterable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">listing_iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_get_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ua_suffix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swift_source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'&lt;not</span> <span class="pre">specified&gt;'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_body_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.SegmentedIterable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Iterable that returns the object contents for a large object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – original request object</p></li>
<li><p><strong>app</strong> – WSGI application from which segments will come</p></li>
<li><p><strong>listing_iter</strong> – <p>iterable yielding the object segments to fetch,
along with the byte subranges to fetch, in the form of a 5-tuple
(object-path, object-etag, object-size, first-byte, last-byte).</p>
<p>If object-etag is None, no MD5 verification will be done.</p>
<p>If object-size is None, no length verification will be done.</p>
<p>If first-byte and last-byte are None, then the entire object will be
fetched.</p>
</p></li>
<li><p><strong>max_get_time</strong> – maximum permitted duration of a GET request (seconds)</p></li>
<li><p><strong>logger</strong> – logger object</p></li>
<li><p><strong>swift_source</strong> – value of swift.source in subrequest environ
(just for logging)</p></li>
<li><p><strong>ua_suffix</strong> – string to append to user-agent.</p></li>
<li><p><strong>name</strong> – name of manifest (used in logging only)</p></li>
<li><p><strong>response_body_length</strong> – optional response body length for
the response being sent to the client.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.request_helpers.SegmentedIterable.app_iter_range">
<span class="sig-name descname"><span class="pre">app_iter_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.SegmentedIterable.app_iter_range" title="Permalink to this definition">¶</a></dt>
<dd><p>swob.Response will only respond with a 206 status in certain cases; one
of those is if the body iterator responds to .app_iter_range().</p>
<p>However, this object (or really, its listing iter) is smart enough to
handle the range stuff internally, so we just no-op this out for swob.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.request_helpers.SegmentedIterable.app_iter_ranges">
<span class="sig-name descname"><span class="pre">app_iter_ranges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ranges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.SegmentedIterable.app_iter_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>This method assumes that iter(self) yields all the data bytes that
go into the response, but none of the MIME stuff. For example, if
the response will contain three MIME docs with data “abcd”, “efgh”,
and “ijkl”, then iter(self) will give out the bytes “abcdefghijkl”.</p>
<p>This method inserts the MIME stuff around the data bytes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.request_helpers.SegmentedIterable.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.SegmentedIterable.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the client disconnect. Ensure that the connection to the
backend server is closed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.request_helpers.SegmentedIterable.validate_first_segment">
<span class="sig-name descname"><span class="pre">validate_first_segment</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.SegmentedIterable.validate_first_segment" title="Permalink to this definition">¶</a></dt>
<dd><p>Start fetching object data to ensure that the first segment (if any) is
valid. This is to catch cases like “first segment is missing” or
“first segment’s etag doesn’t match manifest”.</p>
<p>Note: this does not validate that you have any segments. A
zero-segment large object is not erroneous; it is just empty.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.check_path_header">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">check_path_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_msg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.check_path_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that the value of path-like header is
well formatted. We assume the caller ensures that
specific header is present in req.headers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – HTTP request object</p></li>
<li><p><strong>name</strong> – header name</p></li>
<li><p><strong>length</strong> – length of path segment check</p></li>
<li><p><strong>error_msg</strong> – error message for client</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple with path parts according to length</p>
</dd>
<dt class="field-odd">Raise<span class="colon">:</span></dt>
<dd class="field-odd"><p>HTTPPreconditionFailed if header value
is not well formatted.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.constrain_req_limit">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">constrain_req_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constrained_limit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.constrain_req_limit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.copy_header_subset">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">copy_header_subset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">condition</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.copy_header_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Will copy desired subset of headers from from_r to to_r.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>from_r</strong> – a swob Request or Response</p></li>
<li><p><strong>to_r</strong> – a swob Request or Response</p></li>
<li><p><strong>condition</strong> – a function that will be passed the header key as a
single argument and should return True if the header
is to be copied.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.get_container_update_override_key">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">get_container_update_override_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.get_container_update_override_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the full X-Object-Sysmeta-Container-Update-Override-* header key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – the key you want to override in the container update</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the full header key</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.get_ip_port">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">get_ip_port</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.get_ip_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ip address and port that should be used for the given <code class="docutils literal notranslate"><span class="pre">node</span></code>.
The normal ip address and port are returned unless the <code class="docutils literal notranslate"><span class="pre">node</span></code> or
<code class="docutils literal notranslate"><span class="pre">headers</span></code> indicate that the replication ip address and port should be
used.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">headers</span></code> dict has an item with key
<code class="docutils literal notranslate"><span class="pre">x-backend-use-replication-network</span></code> and a truthy value then the
replication ip address and port are returned. Otherwise if the <code class="docutils literal notranslate"><span class="pre">node</span></code>
dict has an item with key <code class="docutils literal notranslate"><span class="pre">use_replication</span></code> and truthy value then the
replication ip address and port are returned. Otherwise the normal ip
address and port are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – a dict describing a node</p></li>
<li><p><strong>headers</strong> – a dict of headers</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple of (ip address, port)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.get_name_and_placement">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">get_name_and_placement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minsegs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxsegs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest_with_last</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.get_name_and_placement" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function to split and validate the request path and storage
policy.  The storage policy index is extracted from the headers of
the request and converted to a StoragePolicy instance.  The
remaining args are passed through to
<a class="reference internal" href="#swift.common.request_helpers.split_and_validate_path" title="swift.common.request_helpers.split_and_validate_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_and_validate_path()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list, result of <a class="reference internal" href="#swift.common.request_helpers.split_and_validate_path" title="swift.common.request_helpers.split_and_validate_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_and_validate_path()</span></code></a> with
the BaseStoragePolicy instance appended on the end</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>HTTPServiceUnavailable</strong> – if the path is invalid or no policy exists
with the extracted policy_index.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.get_object_transient_sysmeta">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">get_object_transient_sysmeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.get_object_transient_sysmeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the Object Transient System Metadata header for key.
The Object Transient System Metadata namespace will be persisted by
backend object servers. These headers are treated in the same way as
object user metadata i.e. all headers in this namespace will be
replaced on every POST request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – metadata key</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the entire object transient system metadata header for key</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.get_param">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">get_param</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.get_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a parameter from an HTTP request ensuring proper handling UTF-8
encoding.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – request object</p></li>
<li><p><strong>name</strong> – parameter name</p></li>
<li><p><strong>default</strong> – result to return if the parameter is not found</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>HTTP request parameter value, as a native string
(in py2, as UTF-8 encoded str, not unicode object)</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>HTTPBadRequest</strong> – if param not valid UTF-8 byte sequence</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.get_reserved_name">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">get_reserved_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">parts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.get_reserved_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a valid reserved name that joins the component parts.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.get_sys_meta_prefix">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">get_sys_meta_prefix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.get_sys_meta_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the prefix for system metadata headers for given server type.</p>
<p>This prefix defines the namespace for headers that will be persisted
by backend servers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>server_type</strong> – type of backend server i.e. [account|container|object]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>prefix string for server type’s system metadata headers</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.get_user_meta_prefix">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">get_user_meta_prefix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.get_user_meta_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the prefix for user metadata headers for given server type.</p>
<p>This prefix defines the namespace for headers that will be persisted
by backend servers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>server_type</strong> – type of backend server i.e. [account|container|object]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>prefix string for server type’s user metadata headers</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.http_response_to_document_iters">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">http_response_to_document_iters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4096</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.http_response_to_document_iters" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a successful object-GET HTTP response and turns it into an
iterator of (first-byte, last-byte, length, headers, body-file)
5-tuples.</p>
<p>The response must either be a 200 or a 206; if you feed in a 204 or
something similar, this probably won’t work.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>response</strong> – HTTP response, like from bufferedhttp.http_connect(),
not a swob.Response.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.is_object_transient_sysmeta">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">is_object_transient_sysmeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.is_object_transient_sysmeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if a header key starts with and is longer than the prefix for object
transient system metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – header key</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the key satisfies the test, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.is_sys_meta">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">is_sys_meta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.is_sys_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if a header key starts with and is longer than the system
metadata prefix for given server type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>server_type</strong> – type of backend server i.e. [account|container|object]</p></li>
<li><p><strong>key</strong> – header key</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the key satisfies the test, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.is_sys_or_user_meta">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">is_sys_or_user_meta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.is_sys_or_user_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if a header key starts with and is longer than the user or system
metadata prefix for given server type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>server_type</strong> – type of backend server i.e. [account|container|object]</p></li>
<li><p><strong>key</strong> – header key</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the key satisfies the test, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.is_use_replication_network">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">is_use_replication_network</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.is_use_replication_network" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if replication network should be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>headers</strong> – a dict of headers</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the value of the <code class="docutils literal notranslate"><span class="pre">x-backend-use-replication-network</span></code> item from
<code class="docutils literal notranslate"><span class="pre">headers</span></code>. If no <code class="docutils literal notranslate"><span class="pre">headers</span></code> are given or the item is not found then
False is returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.is_user_meta">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">is_user_meta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.is_user_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if a header key starts with and is longer than the user
metadata prefix for given server type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>server_type</strong> – type of backend server i.e. [account|container|object]</p></li>
<li><p><strong>key</strong> – header key</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the key satisfies the test, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.remove_items">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">remove_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">condition</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.remove_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes items from a dict whose keys satisfy
the given condition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>headers</strong> – a dict of headers</p></li>
<li><p><strong>condition</strong> – a function that will be passed the header key as a
single argument and should return True if the header
is to be removed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict, possibly empty, of headers that have been removed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.resolve_etag_is_at_header">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">resolve_etag_is_at_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.resolve_etag_is_at_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to resolve an alternative etag value that may be stored in
metadata under an alternate name.</p>
<p>The value of the request’s X-Backend-Etag-Is-At header (if it exists) is a
comma separated list of alternate names in the metadata at which an
alternate etag value may be found. This list is processed in order until an
alternate etag is found.</p>
<p>The left most value in X-Backend-Etag-Is-At will have been set by the left
most middleware, or if no middleware, by ECObjectController, if an EC
policy is in use. The left most middleware is assumed to be the authority
on what the etag value of the object content is.</p>
<p>The resolver will work from left to right in the list until it finds a
value that is a name in the given metadata. So the left most wins, IF it
exists in the metadata.</p>
<p>By way of example, assume the encrypter middleware is installed. If an
object is <em>not</em> encrypted then the resolver will not find the encrypter
middleware’s alternate etag sysmeta (X-Object-Sysmeta-Crypto-Etag) but will
then find the EC alternate etag (if EC policy). But if the object <em>is</em>
encrypted then X-Object-Sysmeta-Crypto-Etag is found and used, which is
correct because it should be preferred over X-Object-Sysmeta-Ec-Etag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – a swob Request</p></li>
<li><p><strong>metadata</strong> – a dict containing object metadata</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an alternate etag value if any is found, otherwise None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.split_and_validate_path">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">split_and_validate_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minsegs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxsegs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest_with_last</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.split_and_validate_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function to split and validate the request path.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>result of <a class="reference internal" href="#swift.common.utils.split_path" title="swift.common.utils.split_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">split_path()</span></code></a> if
everything’s okay, as native strings</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>HTTPBadRequest</strong> – if something’s not okay</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.split_reserved_name">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">split_reserved_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.split_reserved_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Separate a valid reserved name into the component parts.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.strip_object_transient_sysmeta_prefix">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">strip_object_transient_sysmeta_prefix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.strip_object_transient_sysmeta_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the object transient system metadata prefix from the start of a
header key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – header key</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>stripped header key</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.strip_sys_meta_prefix">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">strip_sys_meta_prefix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.strip_sys_meta_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the system metadata prefix for a given server type from the start
of a header key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>server_type</strong> – type of backend server i.e. [account|container|object]</p></li>
<li><p><strong>key</strong> – header key</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>stripped header key</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.strip_user_meta_prefix">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">strip_user_meta_prefix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.strip_user_meta_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the user metadata prefix for a given server type from the start
of a header key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>server_type</strong> – type of backend server i.e. [account|container|object]</p></li>
<li><p><strong>key</strong> – header key</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>stripped header key</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.update_etag_is_at_header">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">update_etag_is_at_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.update_etag_is_at_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to update an X-Backend-Etag-Is-At header whose value is a
list of alternative header names at which the actual object etag may be
found. This informs the object server where to look for the actual object
etag when processing conditional requests.</p>
<p>Since the proxy server and/or middleware may set alternative etag header
names, the value of X-Backend-Etag-Is-At is a comma separated list which
the object server inspects in order until it finds an etag value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – a swob Request</p></li>
<li><p><strong>name</strong> – name of a sysmeta where alternative etag may be found</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.update_ignore_range_header">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">update_ignore_range_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.update_ignore_range_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to update an X-Backend-Ignore-Range-If-Metadata-Present
header whose value is a list of header names which, if any are present
on an object, mean the object server should respond with a 200 instead
of a 206 or 416.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – a swob Request</p></li>
<li><p><strong>name</strong> – name of a header which, if found, indicates the proxy will
want the whole object</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.validate_container_params">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">validate_container_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.validate_container_params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.validate_internal_account">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">validate_internal_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.validate_internal_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate internal account name.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>HTTPBadRequest</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.validate_internal_container">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">validate_internal_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.validate_internal_container" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate internal account and container names.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>HTTPBadRequest</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.validate_internal_obj">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">validate_internal_obj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.validate_internal_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate internal account, container and object names.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>HTTPBadRequest</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.request_helpers.validate_params">
<span class="sig-prename descclassname"><span class="pre">swift.common.request_helpers.</span></span><span class="sig-name descname"><span class="pre">validate_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.request_helpers.validate_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of parameters from an HTTP request, validating the encoding of
each parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – request object</p></li>
<li><p><strong>names</strong> – parameter names</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict mapping parameter names to values for each name that
appears in the request parameters</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>HTTPBadRequest</strong> – if any parameter value is not a valid UTF-8 byte
sequence</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="swob">
<span id="id10"></span><h2>Swob<a class="headerlink" href="#swob" title="Permalink to this heading">¶</a></h2>
<span class="target" id="module-swift.common.swob"></span><p>Implementation of WSGI Request and Response objects.</p>
<p>This library has a very similar API to Webob.  It wraps WSGI request
environments and response values into objects that are more friendly to
interact with.</p>
<p>Why Swob and not just use WebOb?
By Michael Barton</p>
<p>We used webob for years. The main problem was that the interface
wasn’t stable. For a while, each of our several test suites required
a slightly different version of webob to run, and none of them worked
with the then-current version. It was a huge headache, so we just
scrapped it.</p>
<p>This is kind of a ton of code, but it’s also been a huge relief to
not have to scramble to add a bunch of code branches all over the
place to keep Swift working every time webob decides some interface
needs to change.</p>
<dl class="py class">
<dt class="sig sig-object py" id="swift.common.swob.Accept">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.swob.</span></span><span class="sig-name descname"><span class="pre">Accept</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headerval</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Accept" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wraps a Request’s Accept header as a friendly object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>headerval</strong> – value of the header as a str</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Accept.best_match">
<span class="sig-name descname"><span class="pre">best_match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Accept.best_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the item from “options” that best matches the accept header.
Returns None if no available options are acceptable to the client.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>options</strong> – a list of content-types the server can respond with</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the header is malformed</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.swob.HTTPException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.swob.</span></span><span class="sig-name descname"><span class="pre">HTTPException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.HTTPException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.swob.Response" title="swift.common.swob.Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.swob.HeaderEnvironProxy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.swob.</span></span><span class="sig-name descname"><span class="pre">HeaderEnvironProxy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.HeaderEnvironProxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">MutableMapping</span></code></p>
<p>A dict-like object that proxies requests to a wsgi environ,
rewriting header keys to environ keys.</p>
<p>For example, headers[‘Content-Range’] sets and gets the value of
headers.environ[‘HTTP_CONTENT_RANGE’]</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.HeaderEnvironProxy.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">a</span> <span class="pre">set-like</span> <span class="pre">object</span> <span class="pre">providing</span> <span class="pre">a</span> <span class="pre">view</span> <span class="pre">on</span> <span class="pre">D's</span> <span class="pre">keys</span></span></span><a class="headerlink" href="#swift.common.swob.HeaderEnvironProxy.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.swob.Match">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.swob.</span></span><span class="sig-name descname"><span class="pre">Match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headerval</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Match" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wraps a Request’s If-[None-]Match header as a friendly object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>headerval</strong> – value of the header as a str</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.swob.Range">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.swob.</span></span><span class="sig-name descname"><span class="pre">Range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headerval</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Range" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wraps a Request’s Range header as a friendly object.
After initialization, “range.ranges” is populated with a list
of (start, end) tuples denoting the requested ranges.</p>
<p>If there were any syntactically-invalid byte-range-spec values, the
constructor will raise a ValueError, per the relevant RFC:</p>
<p>“The recipient of a byte-range-set that includes one or more syntactically
invalid byte-range-spec values MUST ignore the header field that includes
that byte-range-set.”</p>
<p>According to the RFC 2616 specification, the following cases will be all
considered as syntactically invalid, thus, a ValueError is thrown so that
the range header will be ignored. If the range value contains at least
one of the following cases, the entire range is considered invalid,
ValueError will be thrown so that the header will be ignored.</p>
<ol class="arabic simple">
<li><p>value not starts with bytes=</p></li>
<li><p>range value start is greater than the end, eg. bytes=5-3</p></li>
<li><p>range does not have start or end, eg. bytes=-</p></li>
<li><p>range does not have hyphen, eg. bytes=45</p></li>
<li><p>range value is non numeric</p></li>
<li><p>any combination of the above</p></li>
</ol>
<p>Every syntactically valid range will be added into the ranges list
even when some of the ranges may not be satisfied by underlying content.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>headerval</strong> – value of the header as a str</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Range.ranges_for_length">
<span class="sig-name descname"><span class="pre">ranges_for_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Range.ranges_for_length" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is used to return multiple ranges for a given length
which should represent the length of the underlying content.
The constructor method __init__ made sure that any range in ranges
list is syntactically valid. So if length is None or size of the
ranges is zero, then the Range header should be ignored which will
eventually make the response to be 200.</p>
<p>If an empty list is returned by this method, it indicates that there
are unsatisfiable ranges found in the Range header, 416 will be
returned.</p>
<p>if a returned list has at least one element, the list indicates that
there is at least one range valid and the server should serve the
request with a 206 status code.</p>
<p>The start value of each range represents the starting position in
the content, the end value represents the ending position. This
method purposely adds 1 to the end number because the spec defines
the Range to be inclusive.</p>
<p>The Range spec can be found at the following link:
<a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.1">http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.1</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>length</strong> – length of the underlying content</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.swob.Request">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.swob.</span></span><span class="sig-name descname"><span class="pre">Request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Request" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>WSGI Request object.</p>
<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.accept">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">accept</span></span><a class="headerlink" href="#swift.common.swob.Request.accept" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the accept property in the WSGI environ, as a Accept object</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.acl">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">acl</span></span><a class="headerlink" href="#swift.common.swob.Request.acl" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the swob.ACL property in the WSGI environment</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Request.blank">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">blank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Request.blank" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new request object with the given parameters, and an
environment otherwise filled in with non-surprising default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – encoded, parsed, and unquoted into PATH_INFO</p></li>
<li><p><strong>environ</strong> – WSGI environ dictionary</p></li>
<li><p><strong>headers</strong> – HTTP headers</p></li>
<li><p><strong>body</strong> – stuffed in a WsgiBytesIO and hung on wsgi.input</p></li>
<li><p><strong>kwargs</strong> – any environ key with an property setter</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.body">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">body</span></span><a class="headerlink" href="#swift.common.swob.Request.body" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the request body str</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.body_file">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">body_file</span></span><a class="headerlink" href="#swift.common.swob.Request.body_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the wsgi.input property in the WSGI environment</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Request.call_application">
<span class="sig-name descname"><span class="pre">call_application</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">application</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Request.call_application" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the application with this request’s environment.  Returns the
status, headers, and app_iter for the response as a tuple.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>application</strong> – the WSGI application to call</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.content_length">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content_length</span></span><a class="headerlink" href="#swift.common.swob.Request.content_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the content-length header as an int</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Request.copy_get">
<span class="sig-name descname"><span class="pre">copy_get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Request.copy_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a copy of the request, converting it to a GET.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Request.ensure_x_timestamp">
<span class="sig-name descname"><span class="pre">ensure_x_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Request.ensure_x_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#swift.common.swob.Request.timestamp" title="swift.common.swob.Request.timestamp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timestamp</span></code></a>, but the <code class="docutils literal notranslate"><span class="pre">X-Timestamp</span></code> header will be
set if not present.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>HTTPBadRequest</strong> – if X-Timestamp is already set but not a valid
<a class="reference internal" href="#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the request’s X-Timestamp header,
as a <a class="reference internal" href="#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Request.get_response">
<span class="sig-name descname"><span class="pre">get_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">application</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Request.get_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the application with this request’s environment.  Returns a
Response object that wraps up the application’s result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>application</strong> – the WSGI application to call</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.host">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">host</span></span><a class="headerlink" href="#swift.common.swob.Request.host" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the HTTP_HOST property in the WSGI environment</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.host_url">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">host_url</span></span><a class="headerlink" href="#swift.common.swob.Request.host_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get url for request/response up to path</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.if_match">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">if_match</span></span><a class="headerlink" href="#swift.common.swob.Request.if_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the if-match property in the WSGI environ, as a Match object</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.if_modified_since">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">if_modified_since</span></span><a class="headerlink" href="#swift.common.swob.Request.if_modified_since" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the if-modified-since header as a datetime, set it with a datetime, int, or str</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.if_none_match">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">if_none_match</span></span><a class="headerlink" href="#swift.common.swob.Request.if_none_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the if-none-match property in the WSGI environ, as a Match object</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.if_unmodified_since">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">if_unmodified_since</span></span><a class="headerlink" href="#swift.common.swob.Request.if_unmodified_since" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the if-unmodified-since header as a datetime, set it with a datetime, int, or str</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Request.message_length">
<span class="sig-name descname"><span class="pre">message_length</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Request.message_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Properly determine the message length for this request. It will return
an integer if the headers explicitly contain the message length, or
None if the headers don’t contain a length. The ValueError exception
will be raised if the headers are invalid.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – if either transfer-encoding or content-length
headers have bad values</p></li>
<li><p><strong>AttributeError</strong> – if the last value of the transfer-encoding
header is not “chunked”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.method">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#swift.common.swob.Request.method" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the REQUEST_METHOD property in the WSGI environment</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.params">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">params</span></span><a class="headerlink" href="#swift.common.swob.Request.params" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides QUERY_STRING parameters as a dictionary</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path</span></span><a class="headerlink" href="#swift.common.swob.Request.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the full path of the request, excluding the QUERY_STRING</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.path_info">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path_info</span></span><a class="headerlink" href="#swift.common.swob.Request.path_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the PATH_INFO property in the WSGI environment</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Request.path_info_pop">
<span class="sig-name descname"><span class="pre">path_info_pop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Request.path_info_pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes one path portion (delineated by slashes) from the
path_info, and appends it to the script_name.  Returns
the path segment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.path_qs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">path_qs</span></span><a class="headerlink" href="#swift.common.swob.Request.path_qs" title="Permalink to this definition">¶</a></dt>
<dd><p>The path of the request, without host but with query string.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.query_string">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">query_string</span></span><a class="headerlink" href="#swift.common.swob.Request.query_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the QUERY_STRING property in the WSGI environment</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.range">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">range</span></span><a class="headerlink" href="#swift.common.swob.Request.range" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the range property in the WSGI environ, as a Range object</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.referer">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">referer</span></span><a class="headerlink" href="#swift.common.swob.Request.referer" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the HTTP_REFERER property in the WSGI environment</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.referrer">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">referrer</span></span><a class="headerlink" href="#swift.common.swob.Request.referrer" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the HTTP_REFERER property in the WSGI environment</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.remote_addr">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remote_addr</span></span><a class="headerlink" href="#swift.common.swob.Request.remote_addr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the REMOTE_ADDR property in the WSGI environment</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.remote_user">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remote_user</span></span><a class="headerlink" href="#swift.common.swob.Request.remote_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the REMOTE_USER property in the WSGI environment</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.script_name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">script_name</span></span><a class="headerlink" href="#swift.common.swob.Request.script_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the SCRIPT_NAME property in the WSGI environment</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Request.split_path">
<span class="sig-name descname"><span class="pre">split_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">minsegs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxsegs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest_with_last</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Request.split_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate and split the Request’s path.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">split_path</span><span class="p">(</span><span class="s1">&#39;/a&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">split_path</span><span class="p">(</span><span class="s1">&#39;/a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">split_path</span><span class="p">(</span><span class="s1">&#39;/a/c&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;o/r&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">split_path</span><span class="p">(</span><span class="s1">&#39;/a/c/o/r&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>minsegs</strong> – Minimum number of segments to be extracted</p></li>
<li><p><strong>maxsegs</strong> – Maximum number of segments to be extracted</p></li>
<li><p><strong>rest_with_last</strong> – If True, trailing data will be returned as part
of last segment.  If False, and there is
trailing data, raises ValueError.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of segments with a length of maxsegs (non-existent
segments will return as None)</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if given an invalid path</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.str_params">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">str_params</span></span><a class="headerlink" href="#swift.common.swob.Request.str_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides QUERY_STRING parameters as a dictionary</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.swift_entity_path">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">swift_entity_path</span></span><a class="headerlink" href="#swift.common.swob.Request.swift_entity_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the (native string) account/container/object path,
sans API version.</p>
<p>This can be useful when constructing a path to send to a backend
server, as that path will need everything after the “/v1”.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.timestamp">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">timestamp</span></span><a class="headerlink" href="#swift.common.swob.Request.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides HTTP_X_TIMESTAMP as a <a class="reference internal" href="#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.url">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">url</span></span><a class="headerlink" href="#swift.common.swob.Request.url" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the full url of the request</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Request.user_agent">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">user_agent</span></span><a class="headerlink" href="#swift.common.swob.Request.user_agent" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set the HTTP_USER_AGENT property in the WSGI environment</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.swob.Response">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.swob.</span></span><span class="sig-name descname"><span class="pre">Response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conditional_response</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conditional_etag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Response" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>WSGI Response object.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Response.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_response</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Response.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Respond to the WSGI request.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This will translate any relative Location header value to an
absolute URL using the WSGI environment’s HOST_URL as a
prefix, as RFC 2616 specifies.</p>
<p>However, it is quite common to use relative redirects,
especially when it is difficult to know the exact HOST_URL
the browser would have used when behind several CNAMEs, CDN
services, etc. All modern browsers support relative
redirects.</p>
<p>To skip over RFC enforcement of the Location header value,
you may set <code class="docutils literal notranslate"><span class="pre">env['swift.leave_relative_location']</span> <span class="pre">=</span> <span class="pre">True</span></code>
in the WSGI environment.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Response.absolute_location">
<span class="sig-name descname"><span class="pre">absolute_location</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Response.absolute_location" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to construct an absolute location.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.accept_ranges">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">accept_ranges</span></span><a class="headerlink" href="#swift.common.swob.Response.accept_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the accept-ranges header</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.app_iter">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">app_iter</span></span><a class="headerlink" href="#swift.common.swob.Response.app_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the response app_iter</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.body">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">body</span></span><a class="headerlink" href="#swift.common.swob.Response.body" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the Response body str</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.charset">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">charset</span></span><a class="headerlink" href="#swift.common.swob.Response.charset" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the response charset</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.conditional_etag">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">conditional_etag</span></span><a class="headerlink" href="#swift.common.swob.Response.conditional_etag" title="Permalink to this definition">¶</a></dt>
<dd><p>The conditional_etag keyword argument for Response will allow the
conditional match value of a If-Match request to be compared to a
non-standard value.</p>
<p>This is available for Storage Policies that do not store the client
object data verbatim on the storage nodes, but still need support
conditional requests.</p>
<p>It’s most effectively used with X-Backend-Etag-Is-At which would
define the additional Metadata key(s) where the original ETag of the
clear-form client request data may be found.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.content_length">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content_length</span></span><a class="headerlink" href="#swift.common.swob.Response.content_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the content-length header as an int</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.content_range">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content_range</span></span><a class="headerlink" href="#swift.common.swob.Response.content_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the content-range header</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.content_type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content_type</span></span><a class="headerlink" href="#swift.common.swob.Response.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the response Content-Type header</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.etag">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">etag</span></span><a class="headerlink" href="#swift.common.swob.Response.etag" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the response Etag header</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Response.fix_conditional_response">
<span class="sig-name descname"><span class="pre">fix_conditional_response</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Response.fix_conditional_response" title="Permalink to this definition">¶</a></dt>
<dd><p>You may call this once you have set the content_length to the whole
object length and body or app_iter to reset the content_length
properties on the request.</p>
<p>It is ok to not call this method, the conditional response will be
maintained for you when you __call__ the response.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.host_url">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">host_url</span></span><a class="headerlink" href="#swift.common.swob.Response.host_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get url for request/response up to path</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.last_modified">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">last_modified</span></span><a class="headerlink" href="#swift.common.swob.Response.last_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the last-modified header as a datetime, set it with a datetime, int, or str</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.location">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">location</span></span><a class="headerlink" href="#swift.common.swob.Response.location" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the location header</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.swob.Response.status">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">status</span></span><a class="headerlink" href="#swift.common.swob.Response.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve and set the Response status, e.g. ‘200 OK’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.swob.Response.www_authenticate">
<span class="sig-name descname"><span class="pre">www_authenticate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.Response.www_authenticate" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a suitable value for WWW-Authenticate response header</p>
<p>If we have a request and a valid-looking path, the realm
is the account; otherwise we set it to ‘unknown’.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.swob.StatusMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.swob.</span></span><span class="sig-name descname"><span class="pre">StatusMap</span></span><a class="headerlink" href="#swift.common.swob.StatusMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A dict-like object that returns HTTPException subclasses/factory functions
where the given key is the status code.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.swob.WsgiBytesIO">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.swob.</span></span><span class="sig-name descname"><span class="pre">WsgiBytesIO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initial_bytes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">b''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.WsgiBytesIO" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BytesIO</span></code></p>
<p>This class adds support for the additional wsgi.input methods defined on
eventlet.wsgi.Input to the BytesIO class which would otherwise be a fine
stand-in for the file-like object in the WSGI environment.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.swob.wsgify">
<span class="sig-prename descclassname"><span class="pre">swift.common.swob.</span></span><span class="sig-name descname"><span class="pre">wsgify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.swob.wsgify" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator for translating functions which take a swob Request object and
return a Response object into WSGI callables.  Also catches any raised
HTTPExceptions and treats them as a returned Response.</p>
</dd></dl>

</section>
<section id="utils">
<span id="id11"></span><h2>Utils<a class="headerlink" href="#utils" title="Permalink to this heading">¶</a></h2>
<span class="target" id="module-swift.common.utils"></span><p>Miscellaneous utility functions for use with Swift.</p>
<dl class="py data">
<dt class="sig sig-object py" id="swift.common.utils.ATTRIBUTES_RE">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">ATTRIBUTES_RE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">re.compile('(\\w+)=(&quot;.*?&quot;|[^&quot;;]+)(;</span> <span class="pre">?|$)')</span></em><a class="headerlink" href="#swift.common.utils.ATTRIBUTES_RE" title="Permalink to this definition">¶</a></dt>
<dd><p>Regular expression to match form attributes.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.CloseableChain">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">CloseableChain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">iterables</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.CloseableChain" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Like itertools.chain, but with a close method that will attempt to invoke
its sub-iterators’ close methods, if any.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.ContextPool">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">ContextPool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ContextPool" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">GreenPool</span></code></p>
<p>GreenPool subclassed to kill its coros when it gets gc’ed</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.Everything">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">Everything</span></span><a class="headerlink" href="#swift.common.utils.Everything" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A container that contains everything. If “e” is an instance of
Everything, then “x in e” is true for all x.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.GreenAsyncPile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">GreenAsyncPile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size_or_pool</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.GreenAsyncPile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Runs jobs in a pool of green threads, and the results can be retrieved by
using this object as an iterator.</p>
<p>This is very similar in principle to eventlet.GreenPile, except it returns
results as they become available rather than in the order they were
launched.</p>
<p>Correlating results with jobs (if necessary) is left to the caller.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.GreenAsyncPile.spawn">
<span class="sig-name descname"><span class="pre">spawn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.GreenAsyncPile.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Spawn a job in a green thread on the pile.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.GreenAsyncPile.waitall">
<span class="sig-name descname"><span class="pre">waitall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.GreenAsyncPile.waitall" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait timeout seconds for any results to come in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – seconds to wait for results</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of results accrued in that time</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.GreenAsyncPile.waitfirst">
<span class="sig-name descname"><span class="pre">waitfirst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.GreenAsyncPile.waitfirst" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait up to timeout seconds for first result to come in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – seconds to wait for results</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>first item to come back, or None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.utils.GreenAsyncPileWaitallTimeout">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">GreenAsyncPileWaitallTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.GreenAsyncPileWaitallTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Timeout</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.GreenthreadSafeIterator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">GreenthreadSafeIterator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unsafe_iterable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.GreenthreadSafeIterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrap an iterator to ensure that only one greenthread is inside its next()
method at a time.</p>
<p>This is useful if an iterator’s next() method may perform network IO, as
that may trigger a greenthread context switch (aka trampoline), which can
give another greenthread a chance to call next(). At that point, you get
an error like “ValueError: generator already executing”. By wrapping calls
to next() with a mutex, we avoid that error.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.InputProxy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">InputProxy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wsgi_input</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.InputProxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>File-like object that counts bytes read.
To be swapped in for wsgi.input for accounting purposes.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.InputProxy.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.InputProxy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass read request to the underlying file-like object and
add bytes read to total.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.InputProxy.readline">
<span class="sig-name descname"><span class="pre">readline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.InputProxy.readline" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass readline request to the underlying file-like object and
add bytes read to total.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.utils.InvalidHashPathConfigError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">InvalidHashPathConfigError</span></span><a class="headerlink" href="#swift.common.utils.InvalidHashPathConfigError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.LRUCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">LRUCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxtime</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.LRUCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Decorator for size/time bound memoization that evicts the least
recently used members.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.LogAdapter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">LogAdapter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.LogAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">LoggerAdapter</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A Logger like object which performs some reformatting on calls to
<a class="reference internal" href="#swift.common.utils.LogAdapter.exception" title="swift.common.utils.LogAdapter.exception"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exception()</span></code></a>.  Can be used to store a threadlocal transaction id and
client ip.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.LogAdapter.exception">
<span class="sig-name descname"><span class="pre">exception</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.LogAdapter.exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Delegate an exception call to the underlying logger.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.LogAdapter.getEffectiveLevel">
<span class="sig-name descname"><span class="pre">getEffectiveLevel</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.LogAdapter.getEffectiveLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the effective level for the underlying logger.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.LogAdapter.notice">
<span class="sig-name descname"><span class="pre">notice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.LogAdapter.notice" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function for syslog priority LOG_NOTICE. The python
logging lvl is set to 25, just above info.  SysLogHandler is
monkey patched to map this log lvl to the LOG_NOTICE syslog
priority.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.LogAdapter.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.LogAdapter.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Add extra info to message</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.LogAdapter.set_statsd_prefix">
<span class="sig-name descname"><span class="pre">set_statsd_prefix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.LogAdapter.set_statsd_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is deprecated. Callers should use the
<code class="docutils literal notranslate"><span class="pre">statsd_tail_prefix</span></code> argument of <code class="docutils literal notranslate"><span class="pre">get_logger</span></code> when instantiating a
logger.</p>
<p>The StatsD client prefix defaults to the “name” of the logger.  This
method may override that default with a specific value.  Currently used
in the proxy-server to differentiate the Account, Container, and Object
controllers.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.LogAdapter.statsd_delegate">
<span class="sig-name descname"><span class="pre">statsd_delegate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.LogAdapter.statsd_delegate" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory to create methods which delegate to methods on
self.logger.statsd_client (an instance of StatsdClient).  The
created methods conditionally delegate to a method whose name is given
in ‘statsd_func_name’.  The created delegate methods are a no-op when
StatsD logging is not configured.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>statsd_func_name</strong> – the name of a method on StatsdClient.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.LogLevelFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">LogLevelFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.LogLevelFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Drop messages for the logger based on level.</p>
<p>This is useful when dependencies log too much information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>level</strong> – All messages at or below this level are dropped
(DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; CRITICAL|FATAL)
Default: DEBUG</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.MetricsPrefixLoggerAdapter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">MetricsPrefixLoggerAdapter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_prefix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.MetricsPrefixLoggerAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.utils.SwiftLoggerAdapter" title="swift.common.utils.SwiftLoggerAdapter"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftLoggerAdapter</span></code></a></p>
<p>Adds a prefix to all Statsd metrics’ names.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.NR_ioprio_set">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">NR_ioprio_set</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.NR_ioprio_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Give __NR_ioprio_set value for your system.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.NicerInterpolation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">NicerInterpolation</span></span><a class="headerlink" href="#swift.common.utils.NicerInterpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BasicInterpolation</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.NoopMutex">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">NoopMutex</span></span><a class="headerlink" href="#swift.common.utils.NoopMutex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>“Mutex” that doesn’t lock anything.</p>
<p>We only allow our syslog logging to be configured via UDS or UDP, neither
of which have the message-interleaving trouble you’d expect from TCP or
file handlers.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.NullLogger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">NullLogger</span></span><a class="headerlink" href="#swift.common.utils.NullLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A no-op logger for eventlet wsgi.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.OverrideOptions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">OverrideOptions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">devices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.OverrideOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="swift.common.utils.OverrideOptions.devices">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">devices</span></span><a class="headerlink" href="#swift.common.utils.OverrideOptions.devices" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.utils.OverrideOptions.partitions">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">partitions</span></span><a class="headerlink" href="#swift.common.utils.OverrideOptions.partitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.utils.OverrideOptions.policies">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">policies</span></span><a class="headerlink" href="#swift.common.utils.OverrideOptions.policies" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.PipeMutex">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">PipeMutex</span></span><a class="headerlink" href="#swift.common.utils.PipeMutex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mutex using a pipe. Works across both greenlets and real threads, even
at the same time.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.PipeMutex.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.PipeMutex.acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire the mutex.</p>
<p>If called with blocking=False, returns True if the mutex was
acquired and False if it wasn’t. Otherwise, blocks until the mutex
is acquired and returns True.</p>
<p>This lock is recursive; the same greenthread may acquire it as many
times as it wants to, though it must then release it that many times
too.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.PipeMutex.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.PipeMutex.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the mutex. This releases its file descriptors.</p>
<p>You can’t use a mutex after it’s been closed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.PipeMutex.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.PipeMutex.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Release the mutex.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.PrefixLoggerAdapter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">PrefixLoggerAdapter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.PrefixLoggerAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.utils.SwiftLoggerAdapter" title="swift.common.utils.SwiftLoggerAdapter"><code class="xref py py-class docutils literal notranslate"><span class="pre">SwiftLoggerAdapter</span></code></a></p>
<p>Adds an optional prefix to all its log messages. When the prefix has not
been set, messages are unchanged.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.PrefixLoggerAdapter.exception">
<span class="sig-name descname"><span class="pre">exception</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.PrefixLoggerAdapter.exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Delegate an exception call to the underlying logger.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.PrefixLoggerAdapter.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.PrefixLoggerAdapter.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the logging message and keyword arguments passed in to
a logging call to insert contextual information. You can either
manipulate the message itself, the keyword args or both. Return
the message and kwargs modified (or not) to suit your needs.</p>
<p>Normally, you’ll only need to override this one method in a
LoggerAdapter subclass for your specific needs.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.RateLimitedIterator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">RateLimitedIterator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elements_per_second</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_after=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratelimit_if=&lt;function</span> <span class="pre">RateLimitedIterator.&lt;lambda&gt;&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.RateLimitedIterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrap an iterator to only yield elements at a rate of N per second.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterable</strong> – iterable to wrap</p></li>
<li><p><strong>elements_per_second</strong> – the rate at which to yield elements</p></li>
<li><p><strong>limit_after</strong> – rate limiting kicks in only after yielding
this many elements; default is 0 (rate limit
immediately)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.ShardName">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">ShardName</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_container_hash</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardName" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Encapsulates the components of a shard name.</p>
<p>Instances of this class would typically be constructed via the create() or
parse() class methods.</p>
<p>Shard names have the form:</p>
<blockquote>
<div><p>&lt;account&gt;/&lt;root_container&gt;-&lt;parent_container_hash&gt;-&lt;timestamp&gt;-&lt;index&gt;</p>
</div></blockquote>
<p>Note: some instances of <a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a> have names
that will NOT parse as a <a class="reference internal" href="#swift.common.utils.ShardName" title="swift.common.utils.ShardName"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardName</span></code></a>; e.g. a
root container’s own shard range will have a name format of
&lt;account&gt;/&lt;root_container&gt; which will raise ValueError if passed to parse.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardName.create">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardName.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an instance of <a class="reference internal" href="#swift.common.utils.ShardName" title="swift.common.utils.ShardName"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardName</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – the hidden internal account to which the shard
container belongs.</p></li>
<li><p><strong>root_container</strong> – the name of the root container for the shard.</p></li>
<li><p><strong>parent_container</strong> – the name of the parent container for the
shard; for initial first generation shards this should be the same
as <code class="docutils literal notranslate"><span class="pre">root_container</span></code>; for shards of shards this should be the name
of the sharding shard container.</p></li>
<li><p><strong>timestamp</strong> – an instance of <a class="reference internal" href="#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p></li>
<li><p><strong>index</strong> – a unique index that will distinguish the path from any
other path generated using the same combination of
<code class="docutils literal notranslate"><span class="pre">account</span></code>, <code class="docutils literal notranslate"><span class="pre">root_container</span></code>, <code class="docutils literal notranslate"><span class="pre">parent_container</span></code> and
<code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an instance of <a class="reference internal" href="#swift.common.utils.ShardName" title="swift.common.utils.ShardName"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardName</span></code></a>.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if any argument is None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardName.hash_container_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash_container_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardName.hash_container_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the hash of a container name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>container_name</strong> – name to be hashed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the hexdigest of the md5 hash of <code class="docutils literal notranslate"><span class="pre">container_name</span></code>.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if <code class="docutils literal notranslate"><span class="pre">container_name</span></code> is None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardName.parse">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardName.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse <code class="docutils literal notranslate"><span class="pre">name</span></code> to an instance of
<a class="reference internal" href="#swift.common.utils.ShardName" title="swift.common.utils.ShardName"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardName</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – a shard name which should have the form:
&lt;account&gt;/
&lt;root_container&gt;-&lt;parent_container_hash&gt;-&lt;timestamp&gt;-&lt;index&gt;</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an instance of <a class="reference internal" href="#swift.common.utils.ShardName" title="swift.common.utils.ShardName"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardName</span></code></a>.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if <code class="docutils literal notranslate"><span class="pre">name</span></code> is not a valid shard name.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">ShardRange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">MinBound</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">MaxBound</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes_used</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deleted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reported</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tombstones</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A ShardRange encapsulates sharding state related to a container including
lower and upper bounds that define the object namespace for which the
container is responsible.</p>
<p>Shard ranges may be persisted in a container database. Timestamps
associated with subsets of the shard range attributes are used to resolve
conflicts when a shard range needs to be merged with an existing shard
range record and the most recent version of an attribute should be
persisted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – the name of the shard range; this should take the form of a
path to a container i.e. &lt;account_name&gt;/&lt;container_name&gt;.</p></li>
<li><p><strong>timestamp</strong> – a timestamp that represents the time at which the
shard range’s <code class="docutils literal notranslate"><span class="pre">lower</span></code>, <code class="docutils literal notranslate"><span class="pre">upper</span></code> or <code class="docutils literal notranslate"><span class="pre">deleted</span></code> attributes were
last modified.</p></li>
<li><p><strong>lower</strong> – the lower bound of object names contained in the shard range;
the lower bound <em>is not</em> included in the shard range namespace.</p></li>
<li><p><strong>upper</strong> – the upper bound of object names contained in the shard range;
the upper bound <em>is</em> included in the shard range namespace.</p></li>
<li><p><strong>object_count</strong> – the number of objects in the shard range; defaults to
zero.</p></li>
<li><p><strong>bytes_used</strong> – the number of bytes in the shard range; defaults to
zero.</p></li>
<li><p><strong>meta_timestamp</strong> – a timestamp that represents the time at which the
shard range’s <code class="docutils literal notranslate"><span class="pre">object_count</span></code> and <code class="docutils literal notranslate"><span class="pre">bytes_used</span></code> were last updated;
defaults to the value of <code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p></li>
<li><p><strong>deleted</strong> – a boolean; if True the shard range is considered to be
deleted.</p></li>
<li><p><strong>state</strong> – the state; must be one of ShardRange.STATES; defaults to
CREATED.</p></li>
<li><p><strong>state_timestamp</strong> – a timestamp that represents the time at which
<code class="docutils literal notranslate"><span class="pre">state</span></code> was forced to its current value; defaults to the value of
<code class="docutils literal notranslate"><span class="pre">timestamp</span></code>. This timestamp is typically not updated with every
change of <code class="docutils literal notranslate"><span class="pre">state</span></code> because in general conflicts in <code class="docutils literal notranslate"><span class="pre">state</span></code>
attributes are resolved by choosing the larger <code class="docutils literal notranslate"><span class="pre">state</span></code> value.
However, when this rule does not apply, for example when changing state
from <code class="docutils literal notranslate"><span class="pre">SHARDED</span></code> to <code class="docutils literal notranslate"><span class="pre">ACTIVE</span></code>, the <code class="docutils literal notranslate"><span class="pre">state_timestamp</span></code> may be advanced
so that the new <code class="docutils literal notranslate"><span class="pre">state</span></code> value is preferred over any older <code class="docutils literal notranslate"><span class="pre">state</span></code>
value.</p></li>
<li><p><strong>epoch</strong> – optional epoch timestamp which represents the time at which
sharding was enabled for a container.</p></li>
<li><p><strong>reported</strong> – optional indicator that this shard and its stats have
been reported to the root container.</p></li>
<li><p><strong>tombstones</strong> – the number of tombstones in the shard range; defaults to
-1 to indicate that the value is unknown.</p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.MaxBound">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MaxBound</span></span><a class="headerlink" href="#swift.common.utils.ShardRange.MaxBound" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.utils.ShardRangeOuterBound" title="swift.common.utils.ShardRangeOuterBound"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRangeOuterBound</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.MinBound">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MinBound</span></span><a class="headerlink" href="#swift.common.utils.ShardRange.MinBound" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.utils.ShardRangeOuterBound" title="swift.common.utils.ShardRangeOuterBound"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRangeOuterBound</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of the ShardRange.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> – (optional) If given, the returned ShardRange will
have all of its timestamps set to this value. Otherwise the
returned ShardRange will have the original timestamps.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an instance of <a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.entire_namespace">
<span class="sig-name descname"><span class="pre">entire_namespace</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.entire_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the ShardRange includes the entire namespace, False
otherwise.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.expand">
<span class="sig-name descname"><span class="pre">expand</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">donors</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.expand" title="Permalink to this definition">¶</a></dt>
<dd><p>Expands the bounds as necessary to match the minimum and maximum bounds
of the given donors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>donors</strong> – A list of <a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the bounds have been modified, False otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.find_ancestors">
<span class="sig-name descname"><span class="pre">find_ancestors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shard_ranges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.find_ancestors" title="Permalink to this definition">¶</a></dt>
<dd><p>Find this shard range’s ancestor ranges in the given <code class="docutils literal notranslate"><span class="pre">shard_ranges</span></code>.</p>
<p>This method makes a best-effort attempt to identify this shard range’s
parent shard range, the parent’s parent, etc., up to and including the
root shard range. It is only possible to directly identify the parent
of a particular shard range, so the search is recursive; if any member
of the ancestry is not found then the search ends and older ancestors
that may be in the list are not identified. The root shard range,
however, will always be identified if it is present in the list.</p>
<p>For example, given a list that contains parent, grandparent,
great-great-grandparent and root shard ranges, but is missing the
great-grandparent shard range, only the parent, grand-parent and root
shard ranges will be identified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>shard_ranges</strong> – a list of instances of
<a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a list of instances of
<a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a> containing items in the
given <code class="docutils literal notranslate"><span class="pre">shard_ranges</span></code> that can be identified as ancestors of this
shard range. The list may not be complete if there are gaps in the
ancestry, but is guaranteed to contain at least the parent and
root shard ranges if they are present.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.find_root">
<span class="sig-name descname"><span class="pre">find_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shard_ranges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.find_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Find this shard range’s root shard range in the given <code class="docutils literal notranslate"><span class="pre">shard_ranges</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>shard_ranges</strong> – a list of instances of
<a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>this shard range’s root shard range if it is found in the
list, otherwise None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance constructed using the given dict of params. This
method is deliberately less flexible than the class <cite>__init__()</cite> method
and requires all of the <cite>__init__()</cite> args to be given in the dict of
params.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> – a dict of parameters</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an instance of this class</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.includes">
<span class="sig-name descname"><span class="pre">includes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.includes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this namespace includes the whole of the other
namespace, False otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> – an instance of <a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.increment_meta">
<span class="sig-name descname"><span class="pre">increment_meta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes_used</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.increment_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Increment the object stats metadata by the given values and update the
meta_timestamp to the current time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>object_count</strong> – should be an integer</p></li>
<li><p><strong>bytes_used</strong> – should be an integer</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if <code class="docutils literal notranslate"><span class="pre">object_count</span></code> or <code class="docutils literal notranslate"><span class="pre">bytes_used</span></code> cannot be
cast to an int.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.is_child_of">
<span class="sig-name descname"><span class="pre">is_child_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.is_child_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if this shard range is a child of another shard range. The
parent-child relationship is inferred from the names of the shard
ranges. This method is limited to work only within the scope of the
same user-facing account (with and without shard prefix).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>parent</strong> – an instance of <code class="docutils literal notranslate"><span class="pre">ShardRange</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if <code class="docutils literal notranslate"><span class="pre">parent</span></code> is the parent of this shard range, False
otherwise, assuming that they are within the same account.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.make_path">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">make_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shards_account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.make_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a path for a shard container that is valid to use as a name
when constructing a <a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shards_account</strong> – the hidden internal account to which the shard
container belongs.</p></li>
<li><p><strong>root_container</strong> – the name of the root container for the shard.</p></li>
<li><p><strong>parent_container</strong> – the name of the parent container for the
shard; for initial first generation shards this should be the same
as <code class="docutils literal notranslate"><span class="pre">root_container</span></code>; for shards of shards this should be the name
of the sharding shard container.</p></li>
<li><p><strong>timestamp</strong> – an instance of <a class="reference internal" href="#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a></p></li>
<li><p><strong>index</strong> – a unique index that will distinguish the path from any
other path generated using the same combination of
<code class="docutils literal notranslate"><span class="pre">shards_account</span></code>, <code class="docutils literal notranslate"><span class="pre">root_container</span></code>, <code class="docutils literal notranslate"><span class="pre">parent_container</span></code> and
<code class="docutils literal notranslate"><span class="pre">timestamp</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a string of the form &lt;account_name&gt;/&lt;container_name&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.overlaps">
<span class="sig-name descname"><span class="pre">overlaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.overlaps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the ShardRange namespace overlaps with the other
ShardRange’s namespace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> – an instance of <a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.resolve_state">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">resolve_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.resolve_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a value that may be either the name or the number of a state
return a tuple of (state number, state name).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>state</strong> – Either a string state name or an integer state number.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple (state number, state name)</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if <code class="docutils literal notranslate"><span class="pre">state</span></code> is neither a valid state name nor a
valid state number.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.row_count">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">row_count</span></span><a class="headerlink" href="#swift.common.utils.ShardRange.row_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of rows in the shard range i.e. the sum of
objects and tombstones.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the row count</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.set_deleted">
<span class="sig-name descname"><span class="pre">set_deleted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.set_deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark the shard range deleted and set timestamp to the current time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> – optional timestamp to set; if not given the
current time will be set.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the deleted attribute or timestamp was changed, False
otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.update_meta">
<span class="sig-name descname"><span class="pre">update_meta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">object_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes_used</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.update_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the object stats metadata to the given values and update the
meta_timestamp to the current time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>object_count</strong> – should be an integer</p></li>
<li><p><strong>bytes_used</strong> – should be an integer</p></li>
<li><p><strong>meta_timestamp</strong> – timestamp for metadata; if not given the
current time will be set.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if <code class="docutils literal notranslate"><span class="pre">object_count</span></code> or <code class="docutils literal notranslate"><span class="pre">bytes_used</span></code> cannot be
cast to an int, or if meta_timestamp is neither None nor can be
cast to a <a class="reference internal" href="#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.update_state">
<span class="sig-name descname"><span class="pre">update_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.update_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Set state to the given value and optionally update the state_timestamp
to the given time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> – new state, should be an integer</p></li>
<li><p><strong>state_timestamp</strong> – timestamp for state; if not given the
state_timestamp will not be changed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the state or state_timestamp was changed, False
otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRange.update_tombstones">
<span class="sig-name descname"><span class="pre">update_tombstones</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tombstones</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_timestamp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRange.update_tombstones" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the tombstones metadata to the given values and update the
meta_timestamp to the current time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tombstones</strong> – should be an integer</p></li>
<li><p><strong>meta_timestamp</strong> – timestamp for metadata; if not given the
current time will be set.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if <code class="docutils literal notranslate"><span class="pre">tombstones</span></code> cannot be cast to an int, or
if meta_timestamp is neither None nor can be cast to a
<a class="reference internal" href="#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.ShardRangeList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">ShardRangeList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initlist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRangeList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">UserList</span></code></p>
<p>This class provides some convenience functions for working with lists of
<a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a>.</p>
<p>This class does not enforce ordering or continuity of the list items:
callers should ensure that items are added in order as appropriate.</p>
<dl class="py property">
<dt class="sig sig-object py" id="swift.common.utils.ShardRangeList.bytes_used">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bytes_used</span></span><a class="headerlink" href="#swift.common.utils.ShardRangeList.bytes_used" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of bytes in all items in the list.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>total bytes used</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRangeList.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">includes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_marker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRangeList.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the list for those shard ranges whose namespace includes the
<code class="docutils literal notranslate"><span class="pre">includes</span></code> name or any part of the namespace between <code class="docutils literal notranslate"><span class="pre">marker</span></code> and
<code class="docutils literal notranslate"><span class="pre">end_marker</span></code>. If none of <code class="docutils literal notranslate"><span class="pre">includes</span></code>, <code class="docutils literal notranslate"><span class="pre">marker</span></code> or <code class="docutils literal notranslate"><span class="pre">end_marker</span></code>
are specified then all shard ranges will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>includes</strong> – a string; if not empty then only the shard range, if
any, whose namespace includes this string will be returned, and
<code class="docutils literal notranslate"><span class="pre">marker</span></code> and <code class="docutils literal notranslate"><span class="pre">end_marker</span></code> will be ignored.</p></li>
<li><p><strong>marker</strong> – if specified then only shard ranges whose upper bound is
greater than this value will be returned.</p></li>
<li><p><strong>end_marker</strong> – if specified then only shard ranges whose lower
bound is less than this value will be returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new instance of <a class="reference internal" href="#swift.common.utils.ShardRangeList" title="swift.common.utils.ShardRangeList"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRangeList</span></code></a>
containing the filtered shard ranges.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRangeList.find_lower">
<span class="sig-name descname"><span class="pre">find_lower</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRangeList.find_lower" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the first shard range satisfies the given condition and returns
its lower bound.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>condition</strong> – A function that must accept a single argument of type
<a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a> and return True if the
shard range satisfies the condition or False otherwise.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The lower bound of the first shard range to satisfy the
condition, or the <code class="docutils literal notranslate"><span class="pre">upper</span></code> value of this list if no such shard
range is found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ShardRangeList.includes">
<span class="sig-name descname"><span class="pre">includes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ShardRangeList.includes" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if another ShardRange namespace is enclosed between the list’s
<code class="docutils literal notranslate"><span class="pre">lower</span></code> and <code class="docutils literal notranslate"><span class="pre">upper</span></code> properties. Note: the list’s <code class="docutils literal notranslate"><span class="pre">lower</span></code> and
<code class="docutils literal notranslate"><span class="pre">upper</span></code> properties will only equal the outermost bounds of all items
in the list if the list has previously been sorted.</p>
<p>Note: the list does not need to contain an item matching <code class="docutils literal notranslate"><span class="pre">other</span></code> for
this method to return True, although if the list has been sorted and
does contain an item matching <code class="docutils literal notranslate"><span class="pre">other</span></code> then the method will return
True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>other</strong> – an instance of <a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if other’s namespace is enclosed, False otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.utils.ShardRangeList.lower">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lower</span></span><a class="headerlink" href="#swift.common.utils.ShardRangeList.lower" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the lower bound of the first item in the list. Note: this will
only be equal to the lowest bound of all items in the list if the list
contents has been sorted.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>lower bound of first item in the list, or ShardRange.MIN
if the list is empty.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.utils.ShardRangeList.object_count">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">object_count</span></span><a class="headerlink" href="#swift.common.utils.ShardRangeList.object_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of objects of all items in the list.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>total object count</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.utils.ShardRangeList.row_count">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">row_count</span></span><a class="headerlink" href="#swift.common.utils.ShardRangeList.row_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the total number of rows of all items in the list.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>total row count</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.utils.ShardRangeList.upper">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">upper</span></span><a class="headerlink" href="#swift.common.utils.ShardRangeList.upper" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the upper bound of the first item in the list. Note: this will
only be equal to the uppermost bound of all items in the list if the
list has previously been sorted.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>upper bound of first item in the list, or ShardRange.MIN
if the list is empty.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.ShardRangeOuterBound">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">ShardRangeOuterBound</span></span><a class="headerlink" href="#swift.common.utils.ShardRangeOuterBound" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A custom singleton type to be subclassed for the outer bounds of
ShardRanges.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.Spliterator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">Spliterator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_iterable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.Spliterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Takes an iterator yielding sliceable things (e.g. strings or lists) and
yields subiterators, each yielding up to the requested number of items
from the source.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">si</span> <span class="o">=</span> <span class="n">Spliterator</span><span class="p">([</span><span class="s2">&quot;abcde&quot;</span><span class="p">,</span> <span class="s2">&quot;fg&quot;</span><span class="p">,</span> <span class="s2">&quot;hijkl&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">si</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="go">&quot;abcd&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">si</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="go">&quot;efg&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">si</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="go">&quot;h&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">si</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="go">&quot;ijk&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">si</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="go">&quot;l&quot;  # shorter than requested; this can happen with the last iterator</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.StrAnonymizer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">StrAnonymizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">salt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.StrAnonymizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
<p>Class that permits to get a string anonymized or simply quoted.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.StrFormatTime">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">StrFormatTime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.StrFormatTime" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that permits to get formats or parts of a time.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.StreamingPile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">StreamingPile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.StreamingPile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.utils.GreenAsyncPile" title="swift.common.utils.GreenAsyncPile"><code class="xref py py-class docutils literal notranslate"><span class="pre">GreenAsyncPile</span></code></a></p>
<p>Runs jobs in a pool of green threads, spawning more jobs as results are
retrieved and worker threads become available.</p>
<p>When used as a context manager, has the same worker-killing properties as
<a class="reference internal" href="#swift.common.utils.ContextPool" title="swift.common.utils.ContextPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextPool</span></code></a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.StreamingPile.asyncstarmap">
<span class="sig-name descname"><span class="pre">asyncstarmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args_iter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.StreamingPile.asyncstarmap" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the same as <code class="xref py py-func docutils literal notranslate"><span class="pre">itertools.starmap()</span></code>, except that <em>func</em> is
executed in a separate green thread for each item, and results won’t
necessarily have the same order as inputs.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.SwiftLogFormatter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">SwiftLogFormatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datefmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_line_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.SwiftLogFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Formatter</span></code></p>
<p>Custom logging.Formatter will append txn_id to a log message if the
record has one and the message does not. Optionally it can shorten
overly long log lines.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.SwiftLogFormatter.format">
<span class="sig-name descname"><span class="pre">format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.SwiftLogFormatter.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the specified record as text.</p>
<p>The record’s attribute dictionary is used as the operand to a
string formatting operation which yields the returned string.
Before formatting the dictionary, a couple of preparatory steps
are carried out. The message attribute of the record is computed
using LogRecord.getMessage(). If the formatting string uses the
time (as determined by a call to usesTime(), formatTime() is
called to format the event time. If there is exception information,
it is formatted using formatException() and appended to the message.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.SwiftLoggerAdapter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">SwiftLoggerAdapter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.SwiftLoggerAdapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">LoggerAdapter</span></code></p>
<p>A logging.LoggerAdapter subclass that also passes through StatsD method
calls.</p>
<p>Like logging.LoggerAdapter, you have to subclass this and override the
process() method to accomplish anything useful.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.SwiftLoggerAdapter.exception">
<span class="sig-name descname"><span class="pre">exception</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.SwiftLoggerAdapter.exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Delegate an exception call to the underlying logger.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.ThreadSafeSysLogHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">ThreadSafeSysLogHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('localhost',</span> <span class="pre">514)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facility</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socktype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ThreadSafeSysLogHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">SysLogHandler</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.ThreadSafeSysLogHandler.createLock">
<span class="sig-name descname"><span class="pre">createLock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ThreadSafeSysLogHandler.createLock" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire a thread lock for serializing access to the underlying I/O.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.Timestamp">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">Timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.Timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Internal Representation of Swift Time.</p>
<p>The normalized form of the X-Timestamp header looks like a float
with a fixed width to ensure stable string sorting - normalized
timestamps look like “1402464677.04188”</p>
<p>To support overwrites of existing data without modifying the original
timestamp but still maintain consistency a second internal offset vector
is append to the normalized timestamp form which compares and sorts
greater than the fixed width float format but less than a newer timestamp.
The internalized format of timestamps looks like
“1402464677.04188_0000000000000000” - the portion after the underscore is
the offset and is a formatted hexadecimal integer.</p>
<p>The internalized form is not exposed to clients in responses from
Swift.  Normal client operations will not create a timestamp with an
offset.</p>
<p>The Timestamp class in common.utils supports internalized and
normalized formatting of timestamps and also comparison of timestamp
values.  When the offset value of a Timestamp is 0 - it’s considered
insignificant and need not be represented in the string format; to
support backwards compatibility during a Swift upgrade the
internalized and normalized form of a Timestamp with an
insignificant offset are identical.  When a timestamp includes an
offset it will always be represented in the internalized form, but
is still excluded from the normalized form.  Timestamps with an
equivalent timestamp portion (the float part) will compare and order
by their offset.  Timestamps with a greater timestamp portion will
always compare and order greater than a Timestamp with a lesser
timestamp regardless of it’s offset.  String comparison and ordering
is guaranteed for the internalized string format, and is backwards
compatible for normalized timestamps which do not include an offset.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.Timestamp.ceil">
<span class="sig-name descname"><span class="pre">ceil</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.Timestamp.ceil" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ‘normal’ part of the timestamp rounded up to the nearest
integer number of seconds.</p>
<p>This value should be used whenever the second-precision Last-Modified
time of a resource is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a float value with second precision.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.Timestamp.from_isoformat">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_isoformat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.Timestamp.from_isoformat" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse an isoformat string representation of time to a Timestamp object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>date_string</strong> – a string formatted as per an Timestamp.isoformat
property.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an instance of  this class.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.utils.Timestamp.isoformat">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">isoformat</span></span><a class="headerlink" href="#swift.common.utils.Timestamp.isoformat" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an isoformat string representation of the ‘normal’ part of the
Timestamp with microsecond precision and no trailing timezone, for
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000000</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an isoformat string</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.Watchdog">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">Watchdog</span></span><a class="headerlink" href="#swift.common.utils.Watchdog" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Implements a watchdog to efficiently manage concurrent timeouts.</p>
<p>Compared to eventlet.timeouts.Timeout, it reduces the number of context
switching in eventlet by avoiding to schedule actions (throw an Exception),
then unschedule them if the timeouts are cancelled.</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>at T+0, request timeout(10)</dt><dd><p>=&gt; wathdog greenlet sleeps 10 seconds</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>at T+1, request timeout(15)</dt><dd><dl class="simple">
<dt>=&gt; the timeout will expire after the current, no need to wake up the</dt><dd><p>watchdog greenlet</p>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>at T+2, request timeout(5)</dt><dd><dl class="simple">
<dt>=&gt; the timeout will expire before the first timeout, wake up the</dt><dd><p>watchdog greenlet to calculate a new sleep period</p>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>at T+7, the 3rd timeout expires</dt><dd><dl class="simple">
<dt>=&gt; the exception is raised, then the greenlet watchdog sleep(3) to</dt><dd><p>wake up for the 1st timeout expiration</p>
</dd>
</dl>
</dd>
</dl>
</li>
</ol>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.Watchdog.spawn">
<span class="sig-name descname"><span class="pre">spawn</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.Watchdog.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the watchdog greenthread.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.Watchdog.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.Watchdog.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Schedule a timeout action</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> – duration before the timeout expires</p></li>
<li><p><strong>exc</strong> – exception to throw when the timeout expire, must inherit
from eventlet.timeouts.Timeout</p></li>
<li><p><strong>timeout_at</strong> – allow to force the expiration timestamp</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>id of the scheduled timeout, needed to cancel it</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.utils.Watchdog.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.Watchdog.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a scheduled timeout</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> – timeout id, as returned by start()</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.WatchdogTimeout">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">WatchdogTimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">watchdog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.WatchdogTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Context manager to schedule a timeout in a Watchdog instance</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.affinity_key_function">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">affinity_key_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">affinity_str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.affinity_key_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns an affinity config value into a function suitable for passing to
sort(). After doing so, the array will be sorted with respect to the given
ordering.</p>
<p>For example, if affinity_str is “r1=1, r2z7=2, r2z8=2”, then the array
will be sorted with all nodes from region 1 (r1=1) first, then all the
nodes from region 2 zones 7 and 8 (r2z7=2 and r2z8=2), then everything
else.</p>
<p>Note that the order of the pieces of affinity_str is irrelevant; the
priority values are what comes after the equals sign.</p>
<p>If affinity_str is empty or all whitespace, then the resulting function
will not alter the ordering of the nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>affinity_str</strong> – affinity config value, e.g. “r1z2=3”
or “r1=1, r2z1=2, r2z2=2”</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>single-argument function</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if argument invalid</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.affinity_locality_predicate">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">affinity_locality_predicate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">write_affinity_str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.affinity_locality_predicate" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns a write-affinity config value into a predicate function for nodes.
The returned value will be a 1-arg function that takes a node dictionary
and returns a true value if it is “local” and a false value otherwise. The
definition of “local” comes from the affinity_str argument passed in here.</p>
<p>For example, if affinity_str is “r1, r2z2”, then only nodes where region=1
or where (region=2 and zone=2) are considered local.</p>
<p>If affinity_str is empty or all whitespace, then the resulting function
will consider everything local</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>write_affinity_str</strong> – affinity config value, e.g. “r1z2”
or “r1, r2z1, r2z2”</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>single-argument function, or None if affinity_str is empty</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if argument invalid</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.audit_location_generator">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">audit_location_generator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">devices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datadir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mount_check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">devices_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitions_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffixes_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hashes_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hook_pre_device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hook_post_device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hook_pre_partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hook_post_partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hook_pre_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hook_post_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hook_pre_hash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hook_post_hash</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yield_hash_dirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.audit_location_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a devices path and a data directory, yield (path, device,
partition) for all files in that directory</p>
<p>(devices|partitions|suffixes|hashes)_filter are meant to modify the list of
elements that will be iterated. eg: they can be used to exclude some
elements based on a custom condition defined by the caller.</p>
<p>hook_pre_(device|partition|suffix|hash) are called before yielding the
element, hook_pos_(device|partition|suffix|hash) are called after the
element was yielded. They are meant to do some pre/post processing.
eg: saving a progress status.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>devices</strong> – parent directory of the devices to be audited</p></li>
<li><p><strong>datadir</strong> – a directory located under self.devices. This should be
one of the DATADIR constants defined in the account,
container, and object servers.</p></li>
<li><p><strong>suffix</strong> – path name suffix required for all names returned
(ignored if yield_hash_dirs is True)</p></li>
<li><p><strong>mount_check</strong> – Flag to check if a mount check should be performed
on devices</p></li>
<li><p><strong>logger</strong> – a logger object</p></li>
<li><p><strong>devices_filter</strong> – a callable taking (devices, [list of devices]) as
parameters and returning a [list of devices]</p></li>
<li><p><strong>partitions_filter</strong> – a callable taking (datadir_path, [list of parts])
as parameters and returning a [list of parts]</p></li>
<li><p><strong>suffixes_filter</strong> – a callable taking (part_path, [list of suffixes])
as parameters and returning a [list of suffixes]</p></li>
<li><p><strong>hashes_filter</strong> – a callable taking (suff_path, [list of hashes]) as
parameters and returning a [list of hashes]</p></li>
<li><p><strong>hook_pre_device</strong> – a callable taking device_path as parameter</p></li>
<li><p><strong>hook_post_device</strong> – a callable taking device_path as parameter</p></li>
<li><p><strong>hook_pre_partition</strong> – a callable taking part_path as parameter</p></li>
<li><p><strong>hook_post_partition</strong> – a callable taking part_path as parameter</p></li>
<li><p><strong>hook_pre_suffix</strong> – a callable taking suff_path as parameter</p></li>
<li><p><strong>hook_post_suffix</strong> – a callable taking suff_path as parameter</p></li>
<li><p><strong>hook_pre_hash</strong> – a callable taking hash_path as parameter</p></li>
<li><p><strong>hook_post_hash</strong> – a callable taking hash_path as parameter</p></li>
<li><p><strong>error_counter</strong> – a dictionary used to accumulate error counts; may
add keys ‘unmounted’ and ‘unlistable_partitions’</p></li>
<li><p><strong>yield_hash_dirs</strong> – if True, yield hash dirs instead of individual
files</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.backward">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">backward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4096</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.backward" title="Permalink to this definition">¶</a></dt>
<dd><p>A generator returning lines from a file starting with the last line,
then the second last line, etc. i.e., it reads lines backwards.
Stops when the first line (if any) is read.
This is useful when searching for recent activity in very
large files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – file object to read</p></li>
<li><p><strong>blocksize</strong> – no of characters to go backwards at each block</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.cache_from_env">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">cache_from_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_none</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.cache_from_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Get memcache connection pool from the environment (which had been
previously set by the memcache middleware</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>env</strong> – wsgi environment dict</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>swift.common.memcached.MemcacheRing from environment</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.capture_stdio">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">capture_stdio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.capture_stdio" title="Permalink to this definition">¶</a></dt>
<dd><p>Log unhandled exceptions, close stdio, capture stdout and stderr.</p>
<p>param logger: Logger object to use</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.closing_if_possible">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">closing_if_possible</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maybe_closable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.closing_if_possible" title="Permalink to this definition">¶</a></dt>
<dd><p>Like contextlib.closing(), but doesn’t crash if the object lacks a close()
method.</p>
<p>PEP 333 (WSGI) says: “If the iterable returned by the application has a
close() method, the server or gateway must call that method upon
completion of the current request[.]” This function makes that easier.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.compute_eta">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">compute_eta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.compute_eta" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute an ETA.  Now only if we could also have a progress bar…</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_time</strong> – Unix timestamp when the operation began</p></li>
<li><p><strong>current_value</strong> – Current value</p></li>
<li><p><strong>final_value</strong> – Final value</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ETA as a tuple of (length of time, unit of time) where unit of
time is one of (‘h’, ‘m’, ‘s’)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.config_auto_int_value">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">config_auto_int_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.config_auto_int_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns default if value is None or ‘auto’.
Returns value as an int or raises ValueError otherwise.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.config_fallocate_value">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">config_fallocate_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reserve_value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.config_fallocate_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns fallocate reserve_value as an int or float.
Returns is_percent as a boolean.
Returns a ValueError on invalid fallocate value.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.config_positive_int_value">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">config_positive_int_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.config_positive_int_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns positive int value if it can be cast by int() and it’s an
integer &gt; 0. (not including zero) Raises ValueError otherwise.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.config_read_prefixed_options">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">config_read_prefixed_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.config_read_prefixed_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Read prefixed options from configuration</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf</strong> – the configuration</p></li>
<li><p><strong>prefix_name</strong> – the prefix (including, if needed, an underscore)</p></li>
<li><p><strong>defaults</strong> – a dict of default values. The dict supplies the
option name and type (string or comma separated string)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict containing the options</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.config_read_reseller_options">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">config_read_reseller_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.config_read_reseller_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Read reseller_prefix option and associated options from configuration</p>
<p>Reads the reseller_prefix option, then reads options that may be
associated with a specific reseller prefix. Reads options such that an
option without a prefix applies to all reseller prefixes unless an option
has an explicit prefix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf</strong> – the configuration</p></li>
<li><p><strong>defaults</strong> – a dict of default values. The key is the option
name. The value is either an array of strings or a string</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple of an array of reseller prefixes and a dict of option values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.config_true_value">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">config_true_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.config_true_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the value is either True or a string in TRUE_VALUES.
Returns False otherwise.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.csv_append">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">csv_append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">csv_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.csv_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends an item to a comma-separated string.</p>
<p>If the comma-separated string is empty/None, just returns item.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.decode_timestamps">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">decode_timestamps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">encoded</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">explicit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.decode_timestamps" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a string of the form generated by encode_timestamps and returns
a tuple of the three component timestamps. If explicit is False, component
timestamps that are not explicitly encoded will be assumed to have zero
delta from the previous component and therefore take the value of the
previous component. If explicit is True, component timestamps that are
not explicitly encoded will be returned with value None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.distribute_evenly">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">distribute_evenly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">items</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_buckets</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.distribute_evenly" title="Permalink to this definition">¶</a></dt>
<dd><p>Distribute items as evenly as possible into N buckets.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.document_iters_to_http_response_body">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">document_iters_to_http_response_body</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ranges_iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multipart</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.document_iters_to_http_response_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an iterator of range iters and turns it into an appropriate
HTTP response body, whether that’s multipart/byteranges or not.</p>
<p>This is almost, but not quite, the inverse of
request_helpers.http_response_to_document_iters(). This function only
yields chunks of the body, not any headers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ranges_iter</strong> – <p>an iterator of dictionaries, one per range.
Each dictionary must contain at least the following key:
“part_iter”: iterator yielding the bytes in the range</p>
<p>Additionally, if multipart is True, then the following other keys
are required:</p>
<p>”start_byte”: index of the first byte in the range
“end_byte”: index of the last byte in the range
“content_type”: value for the range’s Content-Type header</p>
<dl class="simple">
<dt>Finally, there is one optional key that is used in the</dt><dd><p>multipart/byteranges case:</p>
</dd>
<dt>”entity_length”: length of the requested entity (not necessarily</dt><dd><p>equal to the response length). If omitted, “*” will be used.</p>
</dd>
</dl>
<p>Each part_iter will be exhausted prior to calling next(ranges_iter).</p>
</p></li>
<li><p><strong>boundary</strong> – MIME boundary to use, sans dashes (e.g. “boundary”, not
“–boundary”).</p></li>
<li><p><strong>multipart</strong> – True if the response should be multipart/byteranges,
False otherwise. This should be True if and only if you have 2 or
more ranges.</p></li>
<li><p><strong>logger</strong> – a logger</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.document_iters_to_multipart_byteranges">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">document_iters_to_multipart_byteranges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ranges_iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.document_iters_to_multipart_byteranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an iterator of range iters and yields a multipart/byteranges MIME
document suitable for sending as the body of a multi-range 206 response.</p>
<p>See document_iters_to_http_response_body for parameter descriptions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.drain_and_close">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">drain_and_close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response_or_app_iter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.drain_and_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Drain and close a swob or WSGI response.</p>
<p>This ensures we don’t log a 499 in the proxy just because we realized we
don’t care about the body of an error.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.drop_buffer_cache">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">drop_buffer_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.drop_buffer_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop ‘buffer’ cache for the given range of the given file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fd</strong> – file descriptor</p></li>
<li><p><strong>offset</strong> – start offset</p></li>
<li><p><strong>length</strong> – length</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.drop_privileges">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">drop_privileges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.drop_privileges" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the userid/groupid of the current process, get session leader, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>user</strong> – User name to change privileges to</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.dump_recon_cache">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">dump_recon_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lock_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_owner</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.dump_recon_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Update recon cache values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cache_dict</strong> – Dictionary of cache key/value pairs to write out</p></li>
<li><p><strong>cache_file</strong> – cache file to update</p></li>
<li><p><strong>logger</strong> – the logger to use to log an encountered error</p></li>
<li><p><strong>lock_timeout</strong> – timeout (in seconds)</p></li>
<li><p><strong>set_owner</strong> – Set owner of recon cache file</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.encode_timestamps">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">encode_timestamps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t3</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">explicit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.encode_timestamps" title="Permalink to this definition">¶</a></dt>
<dd><p>Encode up to three timestamps into a string. Unlike a Timestamp object, the
encoded string does NOT used fixed width fields and consequently no
relative chronology of the timestamps can be inferred from lexicographic
sorting of encoded timestamp strings.</p>
<dl class="simple">
<dt>The format of the encoded string is:</dt><dd><p>&lt;t1&gt;[&lt;+/-&gt;&lt;t2 - t1&gt;[&lt;+/-&gt;&lt;t3 - t2&gt;]]</p>
</dd>
</dl>
<p>i.e. if t1 = t2 = t3 then just the string representation of t1 is returned,
otherwise the time offsets for t2 and t3 are appended. If explicit is True
then the offsets for t2 and t3 are always appended even if zero.</p>
<p>Note: any offset value in t1 will be preserved, but offsets on t2 and t3
are not preserved. In the anticipated use cases for this method (and the
inverse decode_timestamps method) the timestamps passed as t2 and t3 are
not expected to have offsets as they will be timestamps associated with a
POST request. In the case where the encoding is used in a container objects
table row, t1 could be the PUT or DELETE time but t2 and t3 represent the
content type and metadata times (if different from the data file) i.e.
correspond to POST timestamps. In the case where the encoded form is used
in a .meta file name, t1 and t2 both correspond to POST timestamps.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.eventlet_monkey_patch">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">eventlet_monkey_patch</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.eventlet_monkey_patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Install the appropriate Eventlet monkey patches.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.expand_ipv6">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">expand_ipv6</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.expand_ipv6" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand ipv6 address.
:param address: a string indicating valid ipv6 address
:returns: a string indicating fully expanded ipv6 address</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.extract_swift_bytes">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">extract_swift_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.extract_swift_bytes" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Parse a content-type and return a tuple containing:</dt><dd><ul class="simple">
<li><p>the content_type string minus any swift_bytes param,</p></li>
<li><p>the swift_bytes value or None if the param was not found</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>content_type</strong> – a content-type string</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple of (content-type, swift_bytes or None)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.fallocate">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">fallocate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.fallocate" title="Permalink to this definition">¶</a></dt>
<dd><p>Pre-allocate disk space for a file.</p>
<p>This function can be disabled by calling disable_fallocate(). If no
suitable C function is available in libc, this function is a no-op.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fd</strong> – file descriptor</p></li>
<li><p><strong>size</strong> – size to allocate (in bytes)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.fdatasync">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">fdatasync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.fdatasync" title="Permalink to this definition">¶</a></dt>
<dd><p>Sync modified file data to disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fd</strong> – file descriptor</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.filter_shard_ranges">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">filter_shard_ranges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shard_ranges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">includes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_marker</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.filter_shard_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter the given shard ranges to those whose namespace includes the
<code class="docutils literal notranslate"><span class="pre">includes</span></code> name or any part of the namespace between <code class="docutils literal notranslate"><span class="pre">marker</span></code> and
<code class="docutils literal notranslate"><span class="pre">end_marker</span></code>. If none of <code class="docutils literal notranslate"><span class="pre">includes</span></code>, <code class="docutils literal notranslate"><span class="pre">marker</span></code> or <code class="docutils literal notranslate"><span class="pre">end_marker</span></code> are
specified then all shard ranges will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shard_ranges</strong> – A list of <a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a>.</p></li>
<li><p><strong>includes</strong> – a string; if not empty then only the shard range, if any,
whose namespace includes this string will be returned, and <code class="docutils literal notranslate"><span class="pre">marker</span></code>
and <code class="docutils literal notranslate"><span class="pre">end_marker</span></code> will be ignored.</p></li>
<li><p><strong>marker</strong> – if specified then only shard ranges whose upper bound is
greater than this value will be returned.</p></li>
<li><p><strong>end_marker</strong> – if specified then only shard ranges whose lower bound is
less than this value will be returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A filtered list of <a class="reference internal" href="#swift.common.utils.ShardRange" title="swift.common.utils.ShardRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">ShardRange</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.find_shard_range">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">find_shard_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranges</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.find_shard_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a ShardRange in given list of <code class="docutils literal notranslate"><span class="pre">shard_ranges</span></code> whose namespace
contains <code class="docutils literal notranslate"><span class="pre">item</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> – The item for a which a ShardRange is to be found.</p></li>
<li><p><strong>ranges</strong> – a sorted list of ShardRanges.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the ShardRange whose namespace contains <code class="docutils literal notranslate"><span class="pre">item</span></code>, or None if
no suitable range is found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.fs_has_free_space">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">fs_has_free_space</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">space_needed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_percent</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.fs_has_free_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see whether or not a filesystem has the given amount of space
free. Unlike fallocate(), this does not reserve any space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fs_path</strong> – path to a file or directory on the filesystem; typically
the path to the filesystem’s mount point</p></li>
<li><p><strong>space_needed</strong> – minimum bytes or percentage of free space</p></li>
<li><p><strong>is_percent</strong> – if True, then space_needed is treated as a percentage
of the filesystem’s capacity; if False, space_needed is a number of
free bytes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the filesystem has at least that much free space,
False otherwise</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>OSError</strong> – if fs_path does not exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.fsync">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">fsync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.fsync" title="Permalink to this definition">¶</a></dt>
<dd><p>Sync modified file data and metadata to disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fd</strong> – file descriptor</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.fsync_dir">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">fsync_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirpath</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.fsync_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Sync directory entries to disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dirpath</strong> – Path to the directory to be synced.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_db_files">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_db_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_db_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the path to a db file, return a sorted list of all valid db files
that actually exist in that path’s dir. A valid db filename has the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">hash</span><span class="o">&gt;</span><span class="p">[</span><span class="n">_</span><span class="o">&lt;</span><span class="n">epoch</span><span class="o">&gt;</span><span class="p">]</span><span class="o">.</span><span class="n">db</span>
</pre></div>
</div>
<p>where &lt;hash&gt; matches the &lt;hash&gt; part of the given db_path as would be
parsed by <code class="xref py py-meth docutils literal notranslate"><span class="pre">parse_db_filename()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>db_path</strong> – Path to a db file that does not necessarily exist.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of valid db files that do exist in the dir of the
<code class="docutils literal notranslate"><span class="pre">db_path</span></code>. This list may be empty.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_expirer_container">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_expirer_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_delete_at</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expirer_divisor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cont</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_expirer_container" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an expiring object container name for given X-Delete-At and
(native string) a/c/o.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_hub">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_hub</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_hub" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether poll is available and falls back
on select if it isn’t.</p>
<p>Note about epoll:</p>
<p>Review: <a class="reference external" href="https://review.opendev.org/#/c/18806/">https://review.opendev.org/#/c/18806/</a></p>
<p>There was a problem where once out of every 30 quadrillion
connections, a coroutine wouldn’t wake up when the client
closed its end. Epoll was not reporting the event or it was
getting swallowed somewhere. Then when that file descriptor
was re-used, eventlet would freak right out because it still
thought it was waiting for activity from it in some other coro.</p>
<p>Another note about epoll: it’s hard to use when forking. epoll works
like so:</p>
<ul class="simple">
<li><p>create an epoll instance: <code class="docutils literal notranslate"><span class="pre">efd</span> <span class="pre">=</span> <span class="pre">epoll_create(...)</span></code></p></li>
<li><p>register file descriptors of interest with
<code class="docutils literal notranslate"><span class="pre">epoll_ctl(efd,</span> <span class="pre">EPOLL_CTL_ADD,</span> <span class="pre">fd,</span> <span class="pre">...)</span></code></p></li>
<li><p>wait for events with <code class="docutils literal notranslate"><span class="pre">epoll_wait(efd,</span> <span class="pre">...)</span></code></p></li>
</ul>
<p>If you fork, you and all your child processes end up using the same
epoll instance, and everyone becomes confused. It is possible to use
epoll and fork and still have a correct program as long as you do the
right things, but eventlet doesn’t do those things. Really, it can’t
even try to do those things since it doesn’t get notified of forks.</p>
<p>In contrast, both poll() and select() specify the set of interesting
file descriptors with each call, so there’s no problem with forking.</p>
<p>As eventlet monkey patching is now done before call get_hub() in wsgi.py
if we use ‘import select’ we get the eventlet version, but since version
0.20.0 eventlet removed select.poll() function in patched select (see:
<a class="reference external" href="http://eventlet.net/doc/changelog.html">http://eventlet.net/doc/changelog.html</a> and
<a class="reference external" href="https://github.com/eventlet/eventlet/commit/614a20462">https://github.com/eventlet/eventlet/commit/614a20462</a>).</p>
<p>We use eventlet.patcher.original function to get python select module
to test if poll() is available on platform.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_log_line">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_log_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trans_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anonymization_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anonymization_salt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_log_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a line for logging that matches the documented log line format
for backend servers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – the request.</p></li>
<li><p><strong>res</strong> – the response.</p></li>
<li><p><strong>trans_time</strong> – the time the request took to complete, a float.</p></li>
<li><p><strong>additional_info</strong> – a string to log at the end of the line</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a properly formatted line for logging.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_logger">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_to_console</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_route</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'%(server)s:</span> <span class="pre">%(message)s'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statsd_tail_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current system logger using config settings.</p>
<p><strong>Log config and defaults</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log_facility</span> <span class="o">=</span> <span class="n">LOG_LOCAL0</span>
<span class="n">log_level</span> <span class="o">=</span> <span class="n">INFO</span>
<span class="n">log_name</span> <span class="o">=</span> <span class="n">swift</span>
<span class="n">log_max_line_length</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">log_udp_host</span> <span class="o">=</span> <span class="p">(</span><span class="n">disabled</span><span class="p">)</span>
<span class="n">log_udp_port</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">handlers</span><span class="o">.</span><span class="n">SYSLOG_UDP_PORT</span>
<span class="n">log_address</span> <span class="o">=</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">log</span>
<span class="n">log_statsd_host</span> <span class="o">=</span> <span class="p">(</span><span class="n">disabled</span><span class="p">)</span>
<span class="n">log_statsd_port</span> <span class="o">=</span> <span class="mi">8125</span>
<span class="n">log_statsd_default_sample_rate</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">log_statsd_sample_rate_factor</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">log_statsd_metric_prefix</span> <span class="o">=</span> <span class="p">(</span><span class="n">empty</span><span class="o">-</span><span class="n">string</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf</strong> – Configuration dict to read settings from</p></li>
<li><p><strong>name</strong> – This value is used to populate the <code class="docutils literal notranslate"><span class="pre">server</span></code> field in the log
format, as the prefix for statsd messages, and as the default
value for <code class="docutils literal notranslate"><span class="pre">log_route</span></code>; defaults to the <code class="docutils literal notranslate"><span class="pre">log_name</span></code> value in
<code class="docutils literal notranslate"><span class="pre">conf</span></code>, if it exists, or to ‘swift’.</p></li>
<li><p><strong>log_to_console</strong> – Add handler which writes to console on stderr</p></li>
<li><p><strong>log_route</strong> – Route for the logging, not emitted to the log, just used
to separate logging configurations; defaults to the value
of <code class="docutils literal notranslate"><span class="pre">name</span></code> or whatever <code class="docutils literal notranslate"><span class="pre">name</span></code> defaults to. This value
is used as the name attribute of the
<code class="docutils literal notranslate"><span class="pre">logging.LogAdapter</span></code> that is returned.</p></li>
<li><p><strong>fmt</strong> – Override log format</p></li>
<li><p><strong>statsd_tail_prefix</strong> – tail prefix to pass to statsd client; if None
then the tail prefix defaults to the value of <code class="docutils literal notranslate"><span class="pre">name</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an instance of <code class="docutils literal notranslate"><span class="pre">LogAdapter</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_md5_socket">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_md5_socket</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_md5_socket" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an MD5 socket file descriptor. One can MD5 data with it by writing it
to the socket with os.write, then os.read the 16 bytes of the checksum out
later.</p>
<p>NOTE: It is the caller’s responsibility to ensure that os.close() is
called on the returned file descriptor. This is a bare file descriptor,
not a Python object. It doesn’t close itself.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_partition_for_hash">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_partition_for_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hex_hash</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_power</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_partition_for_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Return partition number for given hex hash and partition power.
:param hex_hash: A hash string
:param part_power: partition power
:returns: partition number</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_partition_from_path">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_partition_from_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">devices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_partition_from_path" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>devices</strong> – directory where devices are mounted (e.g. /srv/node)</p></li>
<li><p><strong>path</strong> – full path to a object file or hashdir</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the (integer) partition from the path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_policy_index">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_policy_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req_headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res_headers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_policy_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the appropriate index of the storage policy for the request from
a proxy server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req_headers</strong> – dict of the request headers.</p></li>
<li><p><strong>res_headers</strong> – dict of the response headers.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>string index of storage policy, or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_redirect_data">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_redirect_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_redirect_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a redirect location from a response’s headers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>response</strong> – a response</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple of (path, Timestamp) if a Location header is found,
otherwise None</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if the Location header is found but a
X-Backend-Redirect-Timestamp is not found, or if there is a problem
with the format of etiher header</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_time_units">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_time_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_amount</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_time_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a nomralized length of time in the largest unit of time (hours,
minutes, or seconds.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>time_amount</strong> – length of time in seconds</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A touple of (length of time, unit of time) where unit of time is
one of (‘h’, ‘m’, ‘s’)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_valid_utf8_str">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_valid_utf8_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_or_unicode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_valid_utf8_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Get valid parts of utf-8 str from str, unicode and even invalid utf-8 str</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>str_or_unicode</strong> – a string or an unicode which can be invalid utf-8</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.get_zero_indexed_base_string">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">get_zero_indexed_base_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.get_zero_indexed_base_string" title="Permalink to this definition">¶</a></dt>
<dd><p>This allows the caller to make a list of things with indexes, where the
first item (zero indexed) is just the bare base string, and subsequent
indexes are appended ‘-1’, ‘-2’, etc.</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;lock&#39;</span><span class="p">,</span> <span class="kc">None</span> <span class="o">=&gt;</span> <span class="s1">&#39;lock&#39;</span>
<span class="s1">&#39;lock&#39;</span><span class="p">,</span> <span class="mi">0</span>    <span class="o">=&gt;</span> <span class="s1">&#39;lock&#39;</span>
<span class="s1">&#39;lock&#39;</span><span class="p">,</span> <span class="mi">1</span>    <span class="o">=&gt;</span> <span class="s1">&#39;lock-1&#39;</span>
<span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="mi">2</span>  <span class="o">=&gt;</span> <span class="s1">&#39;object-2&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base</strong> – a string, the base string; when <code class="docutils literal notranslate"><span class="pre">index</span></code> is 0 (or None) this
is the identity function.</p></li>
<li><p><strong>index</strong> – a digit, typically an integer (or None); for values other
than 0 or None this digit is appended to the base string
separated by a hyphen.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.hash_path">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">hash_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw_digest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.hash_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the canonical hash for an account/container/object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – Account</p></li>
<li><p><strong>container</strong> – Container</p></li>
<li><p><strong>object</strong> – Object</p></li>
<li><p><strong>raw_digest</strong> – If True, return the raw version rather than a hex digest</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>hash string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.human_readable">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">human_readable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.human_readable" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number in a human readable format; for example 1048576 = “1Mi”.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.is_file_older">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">is_file_older</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">age</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.is_file_older" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if a file mtime is older than the given age, suppressing any OSErrors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – first and only argument passed to os.stat</p></li>
<li><p><strong>age</strong> – age in seconds</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if age is less than or equal to zero or if the file mtime is
more than <code class="docutils literal notranslate"><span class="pre">age</span></code> in the past; False if age is greater than zero and
the file mtime is less than or equal to <code class="docutils literal notranslate"><span class="pre">age</span></code> in the past or if there
is an OSError while stat’ing the file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.is_valid_ip">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">is_valid_ip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ip</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.is_valid_ip" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the provided ip is a valid IP-address</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.is_valid_ipv4">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">is_valid_ipv4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ip</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.is_valid_ipv4" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the provided ip is a valid IPv4-address</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.is_valid_ipv6">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">is_valid_ipv6</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ip</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.is_valid_ipv6" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the provided ip is a valid IPv6-address</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.ismount">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">ismount</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ismount" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether a path is a mount point. This will catch any
exceptions and translate them into a False return value
Use ismount_raw to have the exceptions raised instead.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.ismount_raw">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">ismount_raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ismount_raw" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether a path is a mount point. Whereas ismount will catch
any exceptions and just return False, this raw version will not
catch exceptions.</p>
<p>This is code hijacked from C Python 2.6.8, adapted to remove the extra
lstat() system call.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.item_from_env">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">item_from_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_none</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.item_from_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a value from the wsgi environment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – wsgi environment dict</p></li>
<li><p><strong>item_name</strong> – name of item to get</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the value from the environment</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.iter_multipart_mime_documents">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">iter_multipart_mime_documents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wsgi_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4096</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.iter_multipart_mime_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a multi-part-mime-encoded input file object and boundary,
yield file-like objects for each part. Note that this does not
split each part into headers and body; the caller is responsible
for doing that if necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wsgi_input</strong> – The file-like object to read from.</p></li>
<li><p><strong>boundary</strong> – The mime boundary to separate new file-like objects on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A generator of file-like objects for each part.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.exceptions.MimeInvalid" title="swift.common.exceptions.MimeInvalid"><strong>MimeInvalid</strong></a> – if the document is malformed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.last_modified_date_to_timestamp">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">last_modified_date_to_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">last_modified_date_str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.last_modified_date_to_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a last modified date (like you’d get from a container listing,
e.g. 2014-02-28T23:22:36.698390) to a float.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.link_fd_to_path">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">link_fd_to_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dirs_created</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fsync</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.link_fd_to_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a link to file descriptor at target_path specified. This method
does not close the fd for you. Unlike rename, as linkat() cannot
overwrite target_path if it exists, we unlink and try again.</p>
<p>Attempts to fix / hide race conditions like empty object directories
being removed by backend processes during uploads, by retrying.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fd</strong> – File descriptor to be linked</p></li>
<li><p><strong>target_path</strong> – Path in filesystem where fd is to be linked</p></li>
<li><p><strong>dirs_created</strong> – Number of newly created directories that needs to
be fsync’d.</p></li>
<li><p><strong>retries</strong> – number of retries to make</p></li>
<li><p><strong>fsync</strong> – fsync on containing directory of target_path and also all
the newly created directories.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.list_from_csv">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">list_from_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comma_separated_str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.list_from_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the str given and returns a properly stripped list of the comma
separated values.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.load_libc_function">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">load_libc_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_if_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errcheck</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.load_libc_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to find the function in libc, otherwise return a no-op func.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func_name</strong> – name of the function to pull from libc.</p></li>
<li><p><strong>log_error</strong> – log an error when a function can’t be found</p></li>
<li><p><strong>fail_if_missing</strong> – raise an exception when a function can’t be found.
Default behavior is to return a no-op function.</p></li>
<li><p><strong>errcheck</strong> – boolean, if true install a wrapper on the function
to check for a return values of -1 and call
ctype.get_errno and raise an OSError</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.load_recon_cache">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">load_recon_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.load_recon_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a recon cache file. Treats missing file as empty.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.lock_file">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">lock_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unlink</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.lock_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager that acquires a lock on a file.  This will block until
the lock can be acquired, or the timeout time has expired (whichever occurs
first).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – file to be locked</p></li>
<li><p><strong>timeout</strong> – timeout (in seconds). If None, defaults to
DEFAULT_LOCK_TIMEOUT</p></li>
<li><p><strong>append</strong> – True if file should be opened in append mode</p></li>
<li><p><strong>unlink</strong> – True if the file should be unlinked at the end</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.lock_parent_directory">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">lock_parent_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.lock_parent_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager that acquires a lock on the parent directory of the given
file path.  This will block until the lock can be acquired, or the timeout
time has expired (whichever occurs first).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – file path of the parent directory to be locked</p></li>
<li><p><strong>timeout</strong> – timeout (in seconds). If None, defaults to
DEFAULT_LOCK_TIMEOUT</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.lock_path">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">lock_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.lock_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager that acquires a lock on a directory.  This will block until
the lock can be acquired, or the timeout time has expired (whichever occurs
first).</p>
<p>For locking exclusively, file or directory has to be opened in Write mode.
Python doesn’t allow directories to be opened in Write Mode. So we
workaround by locking a hidden file in the directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> – directory to be locked</p></li>
<li><p><strong>timeout</strong> – timeout (in seconds). If None, defaults to
DEFAULT_LOCK_TIMEOUT</p></li>
<li><p><strong>timeout_class</strong> – The class of the exception to raise if the
lock cannot be granted within the timeout. Will be
constructed as timeout_class(timeout, lockpath). Default:
LockTimeout</p></li>
<li><p><strong>limit</strong> – The maximum number of locks that may be held concurrently on
the same directory at the time this method is called. Note that this
limit is only applied during the current call to this method and does
not prevent subsequent calls giving a larger limit. Defaults to 1.</p></li>
<li><p><strong>name</strong> – A string to distinguishes different type of locks in a
directory</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – if limit is not an int.</p></li>
<li><p><strong>ValueError</strong> – if limit is less than 1.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.make_db_file_path">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">make_db_file_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epoch</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.make_db_file_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a path to a db file, return a modified path whose filename part has
the given epoch.</p>
<p>A db filename takes the form <code class="docutils literal notranslate"><span class="pre">&lt;hash&gt;[_&lt;epoch&gt;].db</span></code>; this method replaces
the <code class="docutils literal notranslate"><span class="pre">&lt;epoch&gt;</span></code> part of the given <code class="docutils literal notranslate"><span class="pre">db_path</span></code> with the given <code class="docutils literal notranslate"><span class="pre">epoch</span></code>
value, or drops the epoch part if the given <code class="docutils literal notranslate"><span class="pre">epoch</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_path</strong> – Path to a db file that does not necessarily exist.</p></li>
<li><p><strong>epoch</strong> – A string (or <code class="docutils literal notranslate"><span class="pre">None</span></code>) that will be used as the epoch
in the new path’s filename; non-<code class="docutils literal notranslate"><span class="pre">None</span></code> values will be
normalized to the normal string representation of a
<a class="reference internal" href="#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A modified path to a db file.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if the <code class="docutils literal notranslate"><span class="pre">epoch</span></code> is not valid for constructing a
<a class="reference internal" href="#swift.common.utils.Timestamp" title="swift.common.utils.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.makedirs_count">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">makedirs_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.makedirs_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as os.makedirs() except that this method returns the number of
new directories that had to be created.</p>
<p>Also, this does not raise an error if target directory already exists.
This behaviour is similar to Python 3.x’s os.makedirs() called with
exist_ok=True. Also similar to swift.common.utils.mkdirs()</p>
<p><a class="reference external" href="https://hg.python.org/cpython/file/v3.4.2/Lib/os.py#l212">https://hg.python.org/cpython/file/v3.4.2/Lib/os.py#l212</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.maybe_multipart_byteranges_to_document_iters">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">maybe_multipart_byteranges_to_document_iters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app_iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.maybe_multipart_byteranges_to_document_iters" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an iterator that may or may not contain a multipart MIME document
as well as content type and returns an iterator of body iterators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_iter</strong> – iterator that may contain a multipart MIME document</p></li>
<li><p><strong>content_type</strong> – content type of the app_iter, used to determine
whether it conains a multipart document and, if
so, what the boundary is between documents</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.md5">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">md5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">b''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">usedforsecurity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.md5" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an md5 hashlib object without usedforsecurity parameter</p>
<p>For python distributions that do not yet support this keyword
parameter, we drop the parameter</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.md5_hash_for_file">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">md5_hash_for_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.md5_hash_for_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the MD5 checksum of a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fname</strong> – path to file</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>MD5 checksum, hex encoded</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.memcached_timing_stats">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">memcached_timing_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dec_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.memcached_timing_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a decorator that logs timing events or errors for public methods in
MemcacheRing class, such as memcached set, get and etc.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.mime_to_document_iters">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">mime_to_document_iters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4096</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.mime_to_document_iters" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a file-like object containing a multipart MIME document and
returns an iterator of (headers, body-file) tuples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_file</strong> – file-like object with the MIME doc in it</p></li>
<li><p><strong>boundary</strong> – MIME boundary, sans dashes
(e.g. “divider”, not “–divider”)</p></li>
<li><p><strong>read_chunk_size</strong> – size of strings read via input_file.read()</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.mkdirs">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">mkdirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.mkdirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensures the path is a directory or makes it if not. Errors if the path
exists but is a file or on permissions failure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – path to create</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.modify_priority">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">modify_priority</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.modify_priority" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify priority by nice and ionice.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.multipart_byteranges_to_document_iters">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">multipart_byteranges_to_document_iters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4096</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.multipart_byteranges_to_document_iters" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a file-like object containing a multipart/byteranges MIME document
(see RFC 7233, Appendix A) and returns an iterator of (first-byte,
last-byte, length, document-headers, body-file) 5-tuples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_file</strong> – file-like object with the MIME doc in it</p></li>
<li><p><strong>boundary</strong> – MIME boundary, sans dashes
(e.g. “divider”, not “–divider”)</p></li>
<li><p><strong>read_chunk_size</strong> – size of strings read via input_file.read()</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.node_to_string">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">node_to_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replication</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.node_to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a string representation of a node’s location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_dict</strong> – a dict describing a node</p></li>
<li><p><strong>replication</strong> – if True then the replication ip address and port are
used, otherwise the normal ip address and port are used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a string of the form &lt;ip address&gt;:&lt;port&gt;/&lt;device&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.non_negative_float">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">non_negative_float</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.non_negative_float" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the value casts to a float and is non-negative.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> – value to check</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the value cannot be cast to a float or is negative.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.non_negative_int">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">non_negative_int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.non_negative_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the value casts to an int and is a whole number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> – value to check</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the value cannot be cast to an int or does not
represent a whole number.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.normalize_delete_at_timestamp">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">normalize_delete_at_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.normalize_delete_at_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a timestamp (string or numeric) into a standardized
xxxxxxxxxx (10) or xxxxxxxxxx.xxxxx (10.5) format.</p>
<p>Note that timestamps less than 0000000000 are raised to
0000000000 and values greater than November 20th, 2286 at
17:46:39 UTC will be capped at that date and time, resulting in
no return value exceeding 9999999999.99999 (or 9999999999 if
using low-precision).</p>
<p>This cap is because the expirer is already working through a
sorted list of strings that were all a length of 10. Adding
another digit would mess up the sort and cause the expirer to
break from processing early. By 2286, this problem will need to
be fixed, probably by creating an additional .expiring_objects
account to work from with 11 (or more) digit container names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> – unix timestamp</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>normalized timestamp as a string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.normalize_timestamp">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">normalize_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.normalize_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a timestamp (string or numeric) into a standardized
xxxxxxxxxx.xxxxx (10.5) format.</p>
<p>Note that timestamps using values greater than or equal to November 20th,
2286 at 17:46 UTC will use 11 digits to represent the number of
seconds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> – unix timestamp</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>normalized timestamp as a string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.override_bytes_from_content_type">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">override_bytes_from_content_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">listing_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.override_bytes_from_content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a dict from a container listing and overrides the content_type,
bytes fields if swift_bytes is set.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.pairs">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.pairs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator of all pairs of elements from item_list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>item_list</strong> – items (no duplicates allowed)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.parse_content_disposition">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">parse_content_disposition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.parse_content_disposition" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the value of a header like:
Content-Disposition: form-data; name=”somefile”; filename=”test.html”</p>
<p>Return data like
(“form-data”, {“name”: “somefile”, “filename”: “test.html”})</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>header</strong> – Value of a header (the part after the ‘: ‘).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(value name, dict) of the attribute data parsed (see above).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.parse_content_range">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">parse_content_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_range</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.parse_content_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a content-range header into (first_byte, last_byte, total_size).</p>
<p>See RFC 7233 section 4.2 for details on the header format, but it’s
basically “Content-Range: bytes ${start}-${end}/${total}”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>content_range</strong> – Content-Range header value to parse,
e.g. “bytes 100-1249/49004”</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>3-tuple (start, end, total)</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if malformed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.parse_content_type">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">parse_content_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.parse_content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a content-type and its parameters into values.
RFC 2616 sec 14.17 and 3.7 are pertinent.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;text/plain; charset=UTF-8&#39;</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="s1">&#39;text/plain&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;charset, &#39;</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="s1">&#39;)])</span>
<span class="s1">&#39;text/plain; charset=UTF-8; level=1&#39;</span> <span class="o">-&gt;</span>
    <span class="p">(</span><span class="s1">&#39;text/plain&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;charset, &#39;</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="s1">&#39;), (&#39;</span><span class="n">level</span><span class="s1">&#39;, &#39;</span><span class="mi">1</span><span class="s1">&#39;)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>content_type</strong> – content_type to parse</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple containing (content type, list of k, v parameter tuples)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.parse_db_filename">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">parse_db_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.parse_db_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a db filename into three parts: the hash, the epoch, and the
extension.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_db_filename</span><span class="p">(</span><span class="s2">&quot;ab2134.db&quot;</span><span class="p">)</span>
<span class="go">(&#39;ab2134&#39;, None, &#39;.db&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_db_filename</span><span class="p">(</span><span class="s2">&quot;ab2134_1234567890.12345.db&quot;</span><span class="p">)</span>
<span class="go">(&#39;ab2134&#39;, &#39;1234567890.12345&#39;, &#39;.db&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> – A db file basename or path to a db file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple of (hash , epoch, extension). <code class="docutils literal notranslate"><span class="pre">epoch</span></code> may be None.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if <code class="docutils literal notranslate"><span class="pre">filename</span></code> is not a path to a file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.parse_mime_headers">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">parse_mime_headers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.parse_mime_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a file-like object containing a MIME document and returns a
HeaderKeyDict containing the headers. The body of the message is not
consumed: the position in doc_file is left at the beginning of the body.</p>
<p>This function was inspired by the Python standard library’s
http.client.parse_headers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>doc_file</strong> – binary file-like object containing a MIME document</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a swift.common.swob.HeaderKeyDict containing the headers</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.parse_options">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">parse_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">once</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.parse_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse standard swift server/daemon options with optparse.OptionParser.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parser</strong> – OptionParser to use. If not sent one will be created.</p></li>
<li><p><strong>once</strong> – Boolean indicating the “once” option is available</p></li>
<li><p><strong>test_args</strong> – Override sys.argv; used in testing</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple of (config, options); config is an absolute path to the
config file, options is the parser options as a dictionary.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>SystemExit</strong> – First arg (CONFIG) is required, file must exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.parse_override_options">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">parse_override_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.parse_override_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Figure out which policies, devices, and partitions we should operate on,
based on kwargs.</p>
<p>If ‘override_policies’ is already present in kwargs, then return that
value. This happens when using multiple worker processes; the parent
process supplies override_policies=X to each child process.</p>
<p>Otherwise, in run-once mode, look at the ‘policies’ keyword argument.
This is the value of the “–policies” command-line option. In
run-forever mode or if no –policies option was provided, an empty list
will be returned.</p>
<p>The procedures for devices and partitions are similar.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a named tuple with fields “devices”, “partitions”, and
“policies”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.parse_prefixed_conf">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">parse_prefixed_conf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.parse_prefixed_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Search the config file for any common-prefix sections and load those
sections to a dict mapping the after-prefix reference to options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf_file</strong> – the file name of the config to parse</p></li>
<li><p><strong>prefix</strong> – the common prefix of the sections</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict mapping policy reference -&gt; dict of policy options</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if a policy config section has an invalid name</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.parse_socket_string">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">parse_socket_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">socket_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_port</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.parse_socket_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string representing a socket, returns a tuple of (host, port).
Valid strings are DNS names, IPv4 addresses, or IPv6 addresses, with an
optional port. If an IPv6 address is specified it <strong>must</strong> be enclosed in
[], like <em>[::1]</em> or <em>[::1]:11211</em>. This follows the accepted prescription
for <a class="reference external" href="https://tools.ietf.org/html/rfc3986#section-3.2.2">IPv6 host literals</a>.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">server</span><span class="o">.</span><span class="n">org</span>
<span class="n">server</span><span class="o">.</span><span class="n">org</span><span class="p">:</span><span class="mi">1337</span>
<span class="mf">127.0.0.1</span><span class="p">:</span><span class="mi">1337</span>
<span class="p">[::</span><span class="mi">1</span><span class="p">]:</span><span class="mi">1337</span>
<span class="p">[::</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.private">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">private</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.private" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to declare which methods are privately accessible as HTTP
requests with an <code class="docutils literal notranslate"><span class="pre">X-Backend-Allow-Private-Methods:</span> <span class="pre">True</span></code> override</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> – function to make private</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.public">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">public</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.public" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to declare which methods are publicly accessible as HTTP
requests</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> – function to make public</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.punch_hole">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">punch_hole</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.punch_hole" title="Permalink to this definition">¶</a></dt>
<dd><p>De-allocate disk space in the middle of a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fd</strong> – file descriptor</p></li>
<li><p><strong>offset</strong> – index of first byte to de-allocate</p></li>
<li><p><strong>length</strong> – number of bytes to de-allocate</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.put_recon_cache_entry">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">put_recon_cache_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cache_entry</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.put_recon_cache_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a recon cache entry item.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">item</span></code> is an empty dict then any existing <code class="docutils literal notranslate"><span class="pre">key</span></code> in <code class="docutils literal notranslate"><span class="pre">cache_entry</span></code>
will be deleted. Similarly if <code class="docutils literal notranslate"><span class="pre">item</span></code> is a dict and any of its values are
empty dicts then the corrsponsing key will be deleted from the nested dict
in <code class="docutils literal notranslate"><span class="pre">cache_entry</span></code>.</p>
<p>We use nested recon cache entries when the object auditor
runs in parallel or else in ‘once’ mode with a specified subset of devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cache_entry</strong> – a dict of existing cache entries</p></li>
<li><p><strong>key</strong> – key for item to update</p></li>
<li><p><strong>item</strong> – value for item to update</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.quorum_size">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">quorum_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.quorum_size" title="Permalink to this definition">¶</a></dt>
<dd><p>quorum size as it applies to services that use ‘replication’ for data
integrity  (Account/Container services).  Object quorum_size is defined
on a storage policy basis.</p>
<p>Number of successful backend requests needed for the proxy to consider
the client request successful.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.quote">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">quote</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.quote" title="Permalink to this definition">¶</a></dt>
<dd><p>Patched version of urllib.quote that encodes utf-8 strings before quoting</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.random">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">random</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">interval</span> <span class="pre">[0,</span> <span class="pre">1).</span></span></span><a class="headerlink" href="#swift.common.utils.random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.ratelimit_sleep">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">ratelimit_sleep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">running_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incr_by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate_buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.ratelimit_sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Will eventlet.sleep() for the appropriate time so that the max_rate
is never exceeded.  If max_rate is 0, will not ratelimit.  The
maximum recommended rate should not exceed (1000 * incr_by) a second
as eventlet.sleep() does involve some overhead.  Returns running_time
that should be used for subsequent calls.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>running_time</strong> – the running time in milliseconds of the next
allowable request. Best to start at zero.</p></li>
<li><p><strong>max_rate</strong> – The maximum rate per second allowed for the process.</p></li>
<li><p><strong>incr_by</strong> – How much to increment the counter.  Useful if you want
to ratelimit 1024 bytes/sec and have differing sizes
of requests. Must be &gt; 0 to engage rate-limiting
behavior.</p></li>
<li><p><strong>rate_buffer</strong> – Number of seconds the rate counter can drop and be
allowed to catch up (at a faster than listed rate).
A larger number will result in larger spikes in rate
but better average accuracy. Must be &gt; 0 to engage
rate-limiting behavior.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The absolute time for the next interval in milliseconds; note
that time could have passed well beyond that point, but the next call
will catch that and skip the sleep.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.readconf">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">readconf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">section_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.readconf" title="Permalink to this definition">¶</a></dt>
<dd><p>Read config file(s) and return config items as a dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf_path</strong> – path to config file/directory, or a file-like object
(hasattr readline)</p></li>
<li><p><strong>section_name</strong> – config section to read (will return all sections if
not defined)</p></li>
<li><p><strong>log_name</strong> – name to be used with logging (will use section_name if
not defined)</p></li>
<li><p><strong>defaults</strong> – dict of default values to pre-populate the config with</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dict of config items</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – if section_name does not exist</p></li>
<li><p><strong>IOError</strong> – if reading the file failed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.reiterate">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">reiterate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.reiterate" title="Permalink to this definition">¶</a></dt>
<dd><p>Consume the first truthy item from an iterator, then re-chain it to the
rest of the iterator.  This is useful when you want to make sure the
prologue to downstream generators have been executed before continuing.
:param iterable: an iterable object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.remove_directory">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">remove_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.remove_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for os.rmdir, ENOENT and ENOTEMPTY are ignored</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – first and only argument passed to os.rmdir</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.remove_file">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">remove_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.remove_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Quiet wrapper for os.unlink, OSErrors are suppressed</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> – first and only argument passed to os.unlink</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.renamer">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">renamer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fsync</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.renamer" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to fix / hide race conditions like empty object directories
being removed by backend processes during uploads, by retrying.</p>
<p>The containing directory of ‘new’ and of all newly created directories are
fsync’d by default. This _will_ come at a performance penalty. In cases
where these additional fsyncs are not necessary, it is expected that the
caller of renamer() turn it off explicitly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>old</strong> – old path to be renamed</p></li>
<li><p><strong>new</strong> – new path to be renamed to</p></li>
<li><p><strong>fsync</strong> – fsync on containing directory of new and also all
the newly created directories.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.replace_partition_in_path">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">replace_partition_in_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">devices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_power</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.replace_partition_in_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a path and a partition power and returns the same path, but with the
correct partition number. Most useful when increasing the partition power.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>devices</strong> – directory where devices are mounted (e.g. /srv/node)</p></li>
<li><p><strong>path</strong> – full path to a object file or hashdir</p></li>
<li><p><strong>part_power</strong> – partition power to compute correct partition number</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Path with re-computed partition power</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.replication">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">replication</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.replication" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to declare which methods are accessible for different
type of servers:</p>
<ul class="simple">
<li><p>If option replication_server is None then this decorator
doesn’t matter.</p></li>
<li><p>If option replication_server is True then ONLY decorated with
this decorator methods will be started.</p></li>
<li><p>If option replication_server is False then decorated with this
decorator methods will NOT be started.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> – function to mark accessible for replication</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.round_robin_iter">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">round_robin_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">its</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.round_robin_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of iterators, yield an element from each in a round-robin
fashion until all of them are exhausted.
:param its: list of iterators</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.rsync_ip">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">rsync_ip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ip</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.rsync_ip" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform ip string to an rsync-compatible form</p>
<p>Will return ipv4 addresses unchanged, but will nest ipv6 addresses
inside square brackets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ip</strong> – an ip string (ipv4 or ipv6)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a string ip address</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.rsync_module_interpolation">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">rsync_module_interpolation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.rsync_module_interpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate devices variables inside a rsync module template</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> – rsync module template as a string</p></li>
<li><p><strong>device</strong> – a device from a ring</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a string with all variables replaced by device attributes</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.search_tree">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">search_tree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">glob_match</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir_ext</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.search_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Look in root, for any files/dirs matching glob, recursively traversing
any found directories looking for files ending with ext</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root</strong> – start of search path</p></li>
<li><p><strong>glob_match</strong> – glob to match in root, matching dirs are traversed with
os.walk</p></li>
<li><p><strong>ext</strong> – only files that end in ext will be returned</p></li>
<li><p><strong>exts</strong> – a list of file extensions; only files that end in one of these
extensions will be returned; if set this list overrides any
extension specified using the ‘ext’ param.</p></li>
<li><p><strong>dir_ext</strong> – if present directories that end with dir_ext will not be
traversed and instead will be returned as a matched path</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of full paths to matching files, sorted</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.select_ip_port">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">select_ip_port</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_replication</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.select_ip_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ip address and port that should be used for the given
<code class="docutils literal notranslate"><span class="pre">node_dict</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">use_replication</span></code> is True then the replication ip address and port are
returned.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">use_replication</span></code> is False (the default) and the <code class="docutils literal notranslate"><span class="pre">node</span></code> dict has an
item with key <code class="docutils literal notranslate"><span class="pre">use_replication</span></code> then that item’s value will determine if
the replication ip address and port are returned.</p>
<p>If neither <code class="docutils literal notranslate"><span class="pre">use_replication</span></code> nor <code class="docutils literal notranslate"><span class="pre">node_dict['use_replication']</span></code>
indicate otherwise then the normal ip address and port are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node_dict</strong> – a dict describing a node</p></li>
<li><p><strong>use_replication</strong> – if True then the replication ip address and port
are returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple of (ip address, port)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.set_swift_dir">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">set_swift_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">swift_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.set_swift_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the directory from which swift config files will be read. If the given
directory differs from that already set then the swift.conf file in the new
directory will be validated and storage policies will be reloaded from the
new swift.conf file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>swift_dir</strong> – non-default directory to read swift.conf from</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.utils.sockaddr_alg">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">sockaddr_alg</span></span><a class="headerlink" href="#swift.common.utils.sockaddr_alg" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Structure</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.split_path">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">split_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minsegs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxsegs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rest_with_last</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.split_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate and split the given HTTP request path.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">split_path</span><span class="p">(</span><span class="s1">&#39;/a&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n">split_path</span><span class="p">(</span><span class="s1">&#39;/a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">split_path</span><span class="p">(</span><span class="s1">&#39;/a/c&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;o/r&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">split_path</span><span class="p">(</span><span class="s1">&#39;/a/c/o/r&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – HTTP Request path to be split</p></li>
<li><p><strong>minsegs</strong> – Minimum number of segments to be extracted</p></li>
<li><p><strong>maxsegs</strong> – Maximum number of segments to be extracted</p></li>
<li><p><strong>rest_with_last</strong> – If True, trailing data will be returned as part
of last segment.  If False, and there is
trailing data, raises ValueError.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of segments with a length of maxsegs (non-existent
segments will return as None)</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if given an invalid path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.storage_directory">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">storage_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datadir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_hash</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.storage_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the storage directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datadir</strong> – Base data directory</p></li>
<li><p><strong>partition</strong> – Partition</p></li>
<li><p><strong>name_hash</strong> – Account, container or object name hash</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Storage directory</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.streq_const_time">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">streq_const_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.streq_const_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant-time string comparison.</p>
<dl class="field-list simple">
<dt class="field-odd">Params s1<span class="colon">:</span></dt>
<dd class="field-odd"><p>the first string</p>
</dd>
<dt class="field-even">Params s2<span class="colon">:</span></dt>
<dd class="field-even"><p>the second string</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the strings are equal.</p>
</dd>
</dl>
<p>This function takes two strings and compares them.  It is intended to be
used when doing a comparison for authentication purposes to help guard
against timing attacks.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.strict_b64decode">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">strict_b64decode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_line_breaks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.strict_b64decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate and decode Base64-encoded data.</p>
<p>The stdlib base64 module silently discards bad characters, but we often
want to treat them as an error.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – some base64-encoded data</p></li>
<li><p><strong>allow_line_breaks</strong> – if True, ignore carriage returns and newlines</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the decoded data</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if <code class="docutils literal notranslate"><span class="pre">value</span></code> is not a string, contains invalid
characters, or has insufficient padding</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.systemd_notify">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">systemd_notify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.systemd_notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Notify the service manager that started this process, if it is
systemd-compatible, that this process correctly started. To do so,
it communicates through a Unix socket stored in environment variable
NOTIFY_SOCKET. More information can be found in systemd documentation:
<a class="reference external" href="https://www.freedesktop.org/software/systemd/man/sd_notify.html">https://www.freedesktop.org/software/systemd/man/sd_notify.html</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>logger</strong> – a logger object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.timing_stats">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">timing_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dec_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.timing_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a decorator that logs timing events or errors for public methods in
swift’s wsgi server controllers, based on response code.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.unlink_older_than">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">unlink_older_than</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mtime</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.unlink_older_than" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any file in a given path that was last modified before mtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – path to remove file from</p></li>
<li><p><strong>mtime</strong> – timestamp of oldest file to keep</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.unlink_paths_older_than">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">unlink_paths_older_than</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepaths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mtime</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.unlink_paths_older_than" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any files from the given list that were
last modified before mtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepaths</strong> – a list of strings, the full paths of files to check</p></li>
<li><p><strong>mtime</strong> – timestamp of oldest file to keep</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.validate_device_partition">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">validate_device_partition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.validate_device_partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that a device and a partition are valid and won’t lead to
directory traversal when used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> – device to validate</p></li>
<li><p><strong>partition</strong> – partition to validate</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if given an invalid device or partition</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.validate_sync_to">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">validate_sync_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_sync_hosts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">realms_conf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.validate_sync_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates an X-Container-Sync-To header value, returning the
validated endpoint, realm, and realm_key, or an error string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The X-Container-Sync-To header value to validate.</p></li>
<li><p><strong>allowed_sync_hosts</strong> – A list of allowed hosts in endpoints,
if realms_conf does not apply.</p></li>
<li><p><strong>realms_conf</strong> – An instance of
swift.common.container_sync_realms.ContainerSyncRealms to
validate against.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple of (error_string, validated_endpoint, realm,
realm_key). The error_string will None if the rest of the
values have been validated. The validated_endpoint will be
the validated endpoint to sync to. The realm and realm_key
will be set if validation was done through realms_conf.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.whataremyips">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">whataremyips</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ring_ip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.whataremyips" title="Permalink to this definition">¶</a></dt>
<dd><p>Get “our” IP addresses (“us” being the set of services configured by
one <cite>*.conf</cite> file). If our REST listens on a specific address, return it.
Otherwise, if listen on ‘0.0.0.0’ or ‘::’ return all addresses, including
the loopback.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ring_ip</strong> (<em>str</em>) – Optional ring_ip/bind_ip from a config file; may be
IP address or hostname.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of Strings of ip addresses</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.write_file">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">write_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.write_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Write contents to file at path</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – any path, subdirs will be created as needed</p></li>
<li><p><strong>contents</strong> – data to write to file, will be converted to string</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.utils.write_pickle">
<span class="sig-prename descclassname"><span class="pre">swift.common.utils.</span></span><span class="sig-name descname"><span class="pre">write_pickle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickle_protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.utils.write_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that a pickle file gets written to disk.  The file
is first written to a tmp location, ensure it is synced to disk, then
perform a move to its final location</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> – python object to be pickled</p></li>
<li><p><strong>dest</strong> – path of final destination file</p></li>
<li><p><strong>tmp</strong> – path to tmp to use, defaults to None</p></li>
<li><p><strong>pickle_protocol</strong> – protocol to pickle the obj with, defaults to 0</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="wsgi">
<span id="id12"></span><h2>WSGI<a class="headerlink" href="#wsgi" title="Permalink to this heading">¶</a></h2>
<span class="target" id="module-swift.common.wsgi"></span><p>WSGI tools for use with swift.</p>
<dl class="py class">
<dt class="sig sig-object py" id="swift.common.wsgi.ConfigDirLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">ConfigDirLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.ConfigDirLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.wsgi.NamedConfigLoader" title="swift.common.wsgi.NamedConfigLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">NamedConfigLoader</span></code></a></p>
<p>Read configuration from multiple files under the given path.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.wsgi.ConfigFileError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">ConfigFileError</span></span><a class="headerlink" href="#swift.common.wsgi.ConfigFileError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.wsgi.ConfigFilePortError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">ConfigFilePortError</span></span><a class="headerlink" href="#swift.common.wsgi.ConfigFilePortError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.wsgi.ConfigFileError" title="swift.common.wsgi.ConfigFileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigFileError</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.wsgi.ConfigString">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">ConfigString</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.ConfigString" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.wsgi.NamedConfigLoader" title="swift.common.wsgi.NamedConfigLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">NamedConfigLoader</span></code></a></p>
<p>Wrap a raw config string up for paste.deploy.</p>
<p>If you give one of these to our loadcontext (e.g. give it to our
appconfig) we’ll intercept it and get it routed to the right loader.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.wsgi.NamedConfigLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">NamedConfigLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.NamedConfigLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigLoader</span></code></p>
<p>Patch paste.deploy’s ConfigLoader so each context object will know what
config section it came from.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.wsgi.PipelineWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">PipelineWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.PipelineWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class provides a number of utility methods for
modifying the composition of a wsgi pipeline.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.PipelineWrapper.create_filter">
<span class="sig-name descname"><span class="pre">create_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_point_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.PipelineWrapper.create_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a context for a filter that can subsequently be added
to a pipeline context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>entry_point_name</strong> – entry point of the middleware (Swift only)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a filter context</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.PipelineWrapper.index">
<span class="sig-name descname"><span class="pre">index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_point_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.PipelineWrapper.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the first index of the given entry point name in the pipeline.</p>
<p>Raises ValueError if the given module is not in the pipeline.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.PipelineWrapper.insert_filter">
<span class="sig-name descname"><span class="pre">insert_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ctx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.PipelineWrapper.insert_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts a filter module into the pipeline context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ctx</strong> – the context to be inserted</p></li>
<li><p><strong>index</strong> – (optional) index at which filter should be
inserted in the list of pipeline filters. Default
is 0, which means the start of the pipeline.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.PipelineWrapper.startswith">
<span class="sig-name descname"><span class="pre">startswith</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry_point_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.PipelineWrapper.startswith" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if the pipeline starts with the given entry point name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>entry_point_name</strong> – entry point of middleware or app (Swift only)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if entry_point_name is first in pipeline, False
otherwise</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.wsgi.RestrictedGreenPool">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">RestrictedGreenPool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1024</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.RestrictedGreenPool" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">GreenPool</span></code></p>
<p>Works the same as GreenPool, but if the size is specified as one, then the
spawn_n() method will invoke waitall() before returning to prevent the
caller from doing any other work (like calling accept()).</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.RestrictedGreenPool.spawn_n">
<span class="sig-name descname"><span class="pre">spawn_n</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.RestrictedGreenPool.spawn_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a greenthread to run the <em>function</em>, the same as
<code class="xref py py-meth docutils literal notranslate"><span class="pre">spawn()</span></code>.  The difference is that <a class="reference internal" href="#swift.common.wsgi.RestrictedGreenPool.spawn_n" title="swift.common.wsgi.RestrictedGreenPool.spawn_n"><code class="xref py py-meth docutils literal notranslate"><span class="pre">spawn_n()</span></code></a> returns
None; the results of <em>function</em> are not retrievable.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.wsgi.ServersPerPortStrategy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">ServersPerPortStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">servers_per_port</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.ServersPerPortStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.wsgi.StrategyBase" title="swift.common.wsgi.StrategyBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">StrategyBase</span></code></a></p>
<p>WSGI server management strategy object for an object-server with one listen
port per unique local port in the storage policy rings.  The
<cite>servers_per_port</cite> integer config setting determines how many workers are
run per port.</p>
<p>Tracking data is a map like <code class="docutils literal notranslate"><span class="pre">port</span> <span class="pre">-&gt;</span> <span class="pre">[(pid,</span> <span class="pre">socket),</span> <span class="pre">...]</span></code>.</p>
<p>Used in <a class="reference internal" href="#swift.common.wsgi.run_wsgi" title="swift.common.wsgi.run_wsgi"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_wsgi()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf</strong> (<em>dict</em>) – Server configuration dictionary.</p></li>
<li><p><strong>logger</strong> – The server’s <code class="xref py py-class docutils literal notranslate"><span class="pre">LogAdaptor</span></code>
object.</p></li>
<li><p><strong>servers_per_port</strong> (<em>int</em>) – The number of workers to run per port.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.ServersPerPortStrategy.iter_sockets">
<span class="sig-name descname"><span class="pre">iter_sockets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.ServersPerPortStrategy.iter_sockets" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields all known listen sockets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.ServersPerPortStrategy.log_sock_exit">
<span class="sig-name descname"><span class="pre">log_sock_exit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.ServersPerPortStrategy.log_sock_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a server’s exit.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.ServersPerPortStrategy.loop_timeout">
<span class="sig-name descname"><span class="pre">loop_timeout</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.ServersPerPortStrategy.loop_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Return timeout before checking for reloaded rings.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The time to wait for a child to exit before checking for
reloaded rings (new ports).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.ServersPerPortStrategy.new_worker_socks">
<span class="sig-name descname"><span class="pre">new_worker_socks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.ServersPerPortStrategy.new_worker_socks" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a sequence of (socket, (port, server_idx)) tuples for each server
which should be forked-off and started.</p>
<p>Any sockets for “orphaned” ports no longer in any ring will be closed
(causing their associated workers to gracefully exit) after all new
sockets have been yielded.</p>
<p>The server_idx item for each socket will passed into the
<a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy.log_sock_exit" title="swift.common.wsgi.ServersPerPortStrategy.log_sock_exit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">log_sock_exit()</span></code></a> and <a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy.register_worker_start" title="swift.common.wsgi.ServersPerPortStrategy.register_worker_start"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register_worker_start()</span></code></a> methods.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.ServersPerPortStrategy.no_fork_sock">
<span class="sig-name descname"><span class="pre">no_fork_sock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.ServersPerPortStrategy.no_fork_sock" title="Permalink to this definition">¶</a></dt>
<dd><p>This strategy does not support running in the foreground.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.ServersPerPortStrategy.register_worker_exit">
<span class="sig-name descname"><span class="pre">register_worker_exit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.ServersPerPortStrategy.register_worker_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a worker has exited.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pid</strong> (<em>int</em>) – The PID of the worker that exited.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.ServersPerPortStrategy.register_worker_start">
<span class="sig-name descname"><span class="pre">register_worker_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.ServersPerPortStrategy.register_worker_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a new worker is started.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sock</strong> (<em>socket</em>) – The listen socket for the worker just started.</p></li>
<li><p><strong>data</strong> (<em>tuple</em>) – The socket’s (port, server_idx) as yielded by
<a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy.new_worker_socks" title="swift.common.wsgi.ServersPerPortStrategy.new_worker_socks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">new_worker_socks()</span></code></a>.</p></li>
<li><p><strong>pid</strong> (<em>int</em>) – The new worker process’ PID</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.wsgi.StrategyBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">StrategyBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.StrategyBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Some operations common to all strategy classes.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.StrategyBase.post_fork_hook">
<span class="sig-name descname"><span class="pre">post_fork_hook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.StrategyBase.post_fork_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Called in each forked-off child process, prior to starting the actual
wsgi server, to perform any initialization such as drop privileges.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.StrategyBase.set_close_on_exec_on_listen_sockets">
<span class="sig-name descname"><span class="pre">set_close_on_exec_on_listen_sockets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.StrategyBase.set_close_on_exec_on_listen_sockets" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the close-on-exec flag on any listen sockets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.StrategyBase.shutdown_sockets">
<span class="sig-name descname"><span class="pre">shutdown_sockets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.StrategyBase.shutdown_sockets" title="Permalink to this definition">¶</a></dt>
<dd><p>Shutdown any listen sockets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.StrategyBase.signal_ready">
<span class="sig-name descname"><span class="pre">signal_ready</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.StrategyBase.signal_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Signal that the server is up and accepting connections.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.wsgi.WSGIContext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">WSGIContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wsgi_app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.WSGIContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class provides a means to provide context (scope) for a middleware
filter to have access to the wsgi start_response results like the request
status and headers.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.wsgi.WorkersStrategy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">WorkersStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.WorkersStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.wsgi.StrategyBase" title="swift.common.wsgi.StrategyBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">StrategyBase</span></code></a></p>
<p>WSGI server management strategy object for a single bind port and listen
socket shared by a configured number of forked-off workers.</p>
<p>Tracking data is a map of <code class="docutils literal notranslate"><span class="pre">pid</span> <span class="pre">-&gt;</span> <span class="pre">socket</span></code>.</p>
<p>Used in <a class="reference internal" href="#swift.common.wsgi.run_wsgi" title="swift.common.wsgi.run_wsgi"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_wsgi()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf</strong> (<em>dict</em>) – Server configuration dictionary.</p></li>
<li><p><strong>logger</strong> – The server’s <code class="xref py py-class docutils literal notranslate"><span class="pre">LogAdaptor</span></code>
object.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.WorkersStrategy.iter_sockets">
<span class="sig-name descname"><span class="pre">iter_sockets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.WorkersStrategy.iter_sockets" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields all known listen sockets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.WorkersStrategy.log_sock_exit">
<span class="sig-name descname"><span class="pre">log_sock_exit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_unused</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.WorkersStrategy.log_sock_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Log a server’s exit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sock</strong> (<em>socket</em>) – The listen socket for the worker just started.</p></li>
<li><p><strong>_unused</strong> – The socket’s opaque_data yielded by
<a class="reference internal" href="#swift.common.wsgi.WorkersStrategy.new_worker_socks" title="swift.common.wsgi.WorkersStrategy.new_worker_socks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">new_worker_socks()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.WorkersStrategy.loop_timeout">
<span class="sig-name descname"><span class="pre">loop_timeout</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.WorkersStrategy.loop_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>We want to keep from busy-waiting, but we also need a non-None value so
the main loop gets a chance to tell whether it should keep running or
not (e.g. SIGHUP received).</p>
<p>So we return 0.5.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.WorkersStrategy.new_worker_socks">
<span class="sig-name descname"><span class="pre">new_worker_socks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.WorkersStrategy.new_worker_socks" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a sequence of (socket, opqaue_data) tuples for each server which
should be forked-off and started.</p>
<p>The opaque_data item for each socket will passed into the
<a class="reference internal" href="#swift.common.wsgi.WorkersStrategy.log_sock_exit" title="swift.common.wsgi.WorkersStrategy.log_sock_exit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">log_sock_exit()</span></code></a> and <a class="reference internal" href="#swift.common.wsgi.WorkersStrategy.register_worker_start" title="swift.common.wsgi.WorkersStrategy.register_worker_start"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register_worker_start()</span></code></a> methods
where it will be ignored.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.WorkersStrategy.no_fork_sock">
<span class="sig-name descname"><span class="pre">no_fork_sock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.WorkersStrategy.no_fork_sock" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a server listen socket if the server should run in the
foreground (no fork).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.WorkersStrategy.register_worker_exit">
<span class="sig-name descname"><span class="pre">register_worker_exit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.WorkersStrategy.register_worker_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a worker has exited.</p>
<p>NOTE: a re-exec’ed server can reap the dead worker PIDs from the old
server process that is being replaced as part of a service reload
(SIGUSR1).  So we need to be robust to getting some unknown PID here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pid</strong> (<em>int</em>) – The PID of the worker that exited.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.wsgi.WorkersStrategy.register_worker_start">
<span class="sig-name descname"><span class="pre">register_worker_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_unused</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.WorkersStrategy.register_worker_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a new worker is started.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sock</strong> (<em>socket</em>) – The listen socket for the worker just started.</p></li>
<li><p><strong>_unused</strong> – The socket’s opaque_data yielded by new_worker_socks().</p></li>
<li><p><strong>pid</strong> (<em>int</em>) – The new worker process’ PID</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.wsgi.get_socket">
<span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">get_socket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.get_socket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bind socket to bind ip:port in conf</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conf</strong> – Configuration dict to read settings from</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a socket object as returned from socket.listen or
ssl.wrap_socket if conf specifies cert_file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.wsgi.init_request_processor">
<span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">init_request_processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app_section</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.init_request_processor" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads common settings from conf
Sets the logger
Loads the request processor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf_path</strong> – Path to paste.deploy style configuration file/directory</p></li>
<li><p><strong>app_section</strong> – App name from conf file to load config from</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the loaded application entry point</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.wsgi.ConfigFileError" title="swift.common.wsgi.ConfigFileError"><strong>ConfigFileError</strong></a> – Exception is raised for config file error</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.wsgi.load_app_config">
<span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">load_app_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.load_app_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the app config section from a config file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conf_file</strong> – path to a config file</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.wsgi.loadapp">
<span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">loadapp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_conf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_modify_pipeline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.loadapp" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a context from a config file, and if the context is a pipeline
then presents the app with the opportunity to modify the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf_file</strong> – path to a config file</p></li>
<li><p><strong>global_conf</strong> – a dict of options to update the loaded config. Options
in <code class="docutils literal notranslate"><span class="pre">global_conf</span></code> will override those in <code class="docutils literal notranslate"><span class="pre">conf_file</span></code> except where
the <code class="docutils literal notranslate"><span class="pre">conf_file</span></code> option is preceded by <code class="docutils literal notranslate"><span class="pre">set</span></code>.</p></li>
<li><p><strong>allow_modify_pipeline</strong> – if True, and the context is a pipeline, and
the loaded app has a <code class="docutils literal notranslate"><span class="pre">modify_wsgi_pipeline</span></code> property, then that
property will be called before the pipeline is loaded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the loaded app</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.wsgi.make_env">
<span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">make_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Swift'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swift_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.make_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new fresh WSGI environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – The WSGI environment to base the new environment on.</p></li>
<li><p><strong>method</strong> – The new REQUEST_METHOD or None to use the
original.</p></li>
<li><p><strong>path</strong> – The new path_info or none to use the original. path
should NOT be quoted. When building a url, a Webob
Request (in accordance with wsgi spec) will quote
env[‘PATH_INFO’].  url += quote(environ[‘PATH_INFO’])</p></li>
<li><p><strong>query_string</strong> – The new query_string or none to use the original.
When building a url, a Webob Request will append
the query string directly to the url.
url += ‘?’ + env[‘QUERY_STRING’]</p></li>
<li><p><strong>agent</strong> – The HTTP user agent to use; default ‘Swift’. You
can put %(orig)s in the agent to have it replaced
with the original env’s HTTP_USER_AGENT, such as
‘%(orig)s StaticWeb’. You also set agent to None to
use the original env’s HTTP_USER_AGENT or ‘’ to
have no HTTP_USER_AGENT.</p></li>
<li><p><strong>swift_source</strong> – Used to mark the request as originating out of
middleware. Will be logged in proxy logs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Fresh WSGI environment.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.wsgi.make_pre_authed_env">
<span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">make_pre_authed_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Swift'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swift_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.make_pre_authed_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#swift.common.wsgi.make_env" title="swift.common.wsgi.make_env"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_env()</span></code></a> but with preauthorization.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.wsgi.make_pre_authed_request">
<span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">make_pre_authed_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Swift'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swift_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.make_pre_authed_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#swift.common.wsgi.make_subrequest" title="swift.common.wsgi.make_subrequest"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_subrequest()</span></code></a> but with preauthorization.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.wsgi.make_subrequest">
<span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">make_subrequest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent='Swift'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swift_source=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_env=&lt;function</span> <span class="pre">make_env&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.make_subrequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a new swob.Request based on the current env but with the
parameters specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – The WSGI environment to base the new request on.</p></li>
<li><p><strong>method</strong> – HTTP method of new request; default is from
the original env.</p></li>
<li><p><strong>path</strong> – HTTP path of new request; default is from the
original env. path should be compatible with what you
would send to Request.blank. path should be quoted and it
can include a query string. for example:
‘/a%20space?unicode_str%E8%AA%9E=y%20es’</p></li>
<li><p><strong>body</strong> – HTTP body of new request; empty by default.</p></li>
<li><p><strong>headers</strong> – Extra HTTP headers of new request; None by
default.</p></li>
<li><p><strong>agent</strong> – The HTTP user agent to use; default ‘Swift’. You
can put %(orig)s in the agent to have it replaced
with the original env’s HTTP_USER_AGENT, such as
‘%(orig)s StaticWeb’. You also set agent to None to
use the original env’s HTTP_USER_AGENT or ‘’ to
have no HTTP_USER_AGENT.</p></li>
<li><p><strong>swift_source</strong> – Used to mark the request as originating out of
middleware. Will be logged in proxy logs.</p></li>
<li><p><strong>make_env</strong> – make_subrequest calls this make_env to help build the
swob.Request.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Fresh swob.Request object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.wsgi.run_wsgi">
<span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">run_wsgi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app_section</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.run_wsgi" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the server according to some strategy.  The default strategy runs a
specified number of workers in pre-fork model.  The object-server (only)
may use a servers-per-port strategy if its config has a servers_per_port
setting with a value greater than zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf_path</strong> – Path to paste.deploy style configuration file/directory</p></li>
<li><p><strong>app_section</strong> – App name from conf file to load config from</p></li>
<li><p><strong>allow_modify_pipeline</strong> – Boolean for whether the server should have
an opportunity to change its own pipeline.
Defaults to True</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>0 if successful, nonzero otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.wsgi.wrap_conf_type">
<span class="sig-prename descclassname"><span class="pre">swift.common.wsgi.</span></span><span class="sig-name descname"><span class="pre">wrap_conf_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.wsgi.wrap_conf_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap a function whos first argument is a paste.deploy style config uri,
such that you can pass it an un-adorned raw filesystem path (or config
string) and the config directive (either config:, config_dir:, or
config_str:) will be added automatically based on the type of entity
(either a file or directory, or if no such entity on the file system -
just a string) before passing it through to the paste.deploy function.</p>
</dd></dl>

</section>
<section id="module-swift.common.storage_policy">
<span id="id13"></span><span id="storage-policy"></span><h2>Storage Policy<a class="headerlink" href="#module-swift.common.storage_policy" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="swift.common.storage_policy.BaseStoragePolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.storage_policy.</span></span><span class="sig-name descname"><span class="pre">BaseStoragePolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_deprecated</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_ring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aliases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diskfile_module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'egg:swift#replication.fs'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.BaseStoragePolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents a storage policy.  Not meant to be instantiated directly;
implement a derived subclasses (e.g. StoragePolicy, ECStoragePolicy, etc)
or use <a class="reference internal" href="#swift.common.storage_policy.reload_storage_policies" title="swift.common.storage_policy.reload_storage_policies"><code class="xref py py-func docutils literal notranslate"><span class="pre">reload_storage_policies()</span></code></a> to
load POLICIES from <code class="docutils literal notranslate"><span class="pre">swift.conf</span></code>.</p>
<p>The object_ring property is lazy loaded once the service’s <code class="docutils literal notranslate"><span class="pre">swift_dir</span></code>
is known via <a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection.get_object_ring" title="swift.common.storage_policy.StoragePolicyCollection.get_object_ring"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_object_ring()</span></code></a>, but it may
be over-ridden via object_ring kwarg at create time for testing or
actively loaded with <code class="xref py py-meth docutils literal notranslate"><span class="pre">load_ring()</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.BaseStoragePolicy.add_name">
<span class="sig-name descname"><span class="pre">add_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.BaseStoragePolicy.add_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an alias name to the storage policy. Shouldn’t be called
directly from the storage policy but instead through the
storage policy collection class, so lookups by name resolve
correctly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – a new alias for the storage policy</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.BaseStoragePolicy.change_primary_name">
<span class="sig-name descname"><span class="pre">change_primary_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.BaseStoragePolicy.change_primary_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the primary/default name of the policy to a specified name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – a string name to replace the current primary name.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.BaseStoragePolicy.get_diskfile_manager">
<span class="sig-name descname"><span class="pre">get_diskfile_manager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.BaseStoragePolicy.get_diskfile_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance of the diskfile manager class configured for this
storage policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – positional args to pass to the diskfile manager
constructor.</p></li>
<li><p><strong>kwargs</strong> – keyword args to pass to the diskfile manager
constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A disk file manager instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.BaseStoragePolicy.get_info">
<span class="sig-name descname"><span class="pre">get_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.BaseStoragePolicy.get_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the info dict and conf file options for this policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> – boolean, if True all config options are returned</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.BaseStoragePolicy.load_ring">
<span class="sig-name descname"><span class="pre">load_ring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">swift_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reload_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.BaseStoragePolicy.load_ring" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the ring for this policy immediately.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>swift_dir</strong> – path to rings</p></li>
<li><p><strong>reload_time</strong> – time interval in seconds to check for a ring change</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.storage_policy.BaseStoragePolicy.quorum">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">quorum</span></span><a class="headerlink" href="#swift.common.storage_policy.BaseStoragePolicy.quorum" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of successful backend requests needed for the proxy to
consider the client request successful.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.BaseStoragePolicy.register">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.BaseStoragePolicy.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for Storage Policy implementations to register
their StoragePolicy class.  This will also set the policy_type
attribute on the registered implementation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.BaseStoragePolicy.remove_name">
<span class="sig-name descname"><span class="pre">remove_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.BaseStoragePolicy.remove_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes an alias name from the storage policy. Shouldn’t be called
directly from the storage policy but instead through the storage
policy collection class, so lookups by name resolve correctly. If
the name removed is the primary name then the next available alias
will be adopted as the new primary name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – a name assigned to the storage policy</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.BaseStoragePolicy.validate_ring_data">
<span class="sig-name descname"><span class="pre">validate_ring_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ring_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.BaseStoragePolicy.validate_ring_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Validation hook used when loading the ring; currently only used for EC</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.storage_policy.ECStoragePolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.storage_policy.</span></span><span class="sig-name descname"><span class="pre">ECStoragePolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aliases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_deprecated</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_ring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diskfile_module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'egg:swift#erasure_coding.fs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ec_segment_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1048576</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ec_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ec_ndata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ec_nparity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ec_duplication_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.ECStoragePolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy" title="swift.common.storage_policy.BaseStoragePolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStoragePolicy</span></code></a></p>
<p>Represents a storage policy of type ‘erasure_coding’.</p>
<p>Not meant to be instantiated directly; use
<a class="reference internal" href="#swift.common.storage_policy.reload_storage_policies" title="swift.common.storage_policy.reload_storage_policies"><code class="xref py py-func docutils literal notranslate"><span class="pre">reload_storage_policies()</span></code></a> to load
POLICIES from <code class="docutils literal notranslate"><span class="pre">swift.conf</span></code>.</p>
<dl class="py property">
<dt class="sig sig-object py" id="swift.common.storage_policy.ECStoragePolicy.ec_scheme_description">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ec_scheme_description</span></span><a class="headerlink" href="#swift.common.storage_policy.ECStoragePolicy.ec_scheme_description" title="Permalink to this definition">¶</a></dt>
<dd><p>This short hand form of the important parts of the ec schema is stored
in Object System Metadata on the EC Fragment Archives for debugging.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.storage_policy.ECStoragePolicy.fragment_size">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fragment_size</span></span><a class="headerlink" href="#swift.common.storage_policy.ECStoragePolicy.fragment_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum length of a fragment, including header.</p>
<p>NB: a fragment archive is a sequence of 0 or more max-length
fragments followed by one possibly-shorter fragment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.ECStoragePolicy.get_backend_index">
<span class="sig-name descname"><span class="pre">get_backend_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.ECStoragePolicy.get_backend_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Backend index for PyECLib</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>node_index</strong> – integer of node index</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>integer of actual fragment index. if param is not an integer,
return None instead</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.ECStoragePolicy.get_info">
<span class="sig-name descname"><span class="pre">get_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.ECStoragePolicy.get_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the info dict and conf file options for this policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> – boolean, if True all config options are returned</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.common.storage_policy.ECStoragePolicy.quorum">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">quorum</span></span><a class="headerlink" href="#swift.common.storage_policy.ECStoragePolicy.quorum" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of successful backend requests needed for the proxy to consider
the client PUT request successful.</p>
<p>The quorum size for EC policies defines the minimum number
of data + parity elements required to be able to guarantee
the desired fault tolerance, which is the number of data
elements supplemented by the minimum number of parity
elements required by the chosen erasure coding scheme.</p>
<p>For example, for Reed-Solomon, the minimum number parity
elements required is 1, and thus the quorum_size requirement
is ec_ndata + 1.</p>
<p>Given the number of parity elements required is not the same
for every erasure coding scheme, consult PyECLib for
min_parity_fragments_needed()</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.ECStoragePolicy.validate_ring_data">
<span class="sig-name descname"><span class="pre">validate_ring_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ring_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.ECStoragePolicy.validate_ring_data" title="Permalink to this definition">¶</a></dt>
<dd><p>EC specific validation</p>
<p>Replica count check - we need _at_least_ (#data + #parity) replicas
configured.  Also if the replica count is larger than exactly that
number there’s a non-zero risk of error for code that is
considering the number of nodes in the primary list from the ring.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="swift.common.storage_policy.PolicyError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.storage_policy.</span></span><span class="sig-name descname"><span class="pre">PolicyError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.PolicyError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.storage_policy.</span></span><span class="sig-name descname"><span class="pre">StoragePolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_deprecated</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_ring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aliases</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diskfile_module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'egg:swift#replication.fs'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy" title="swift.common.storage_policy.BaseStoragePolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStoragePolicy</span></code></a></p>
<p>Represents a storage policy of type ‘replication’.  Default storage policy
class unless otherwise overridden from swift.conf.</p>
<p>Not meant to be instantiated directly; use
<a class="reference internal" href="#swift.common.storage_policy.reload_storage_policies" title="swift.common.storage_policy.reload_storage_policies"><code class="xref py py-func docutils literal notranslate"><span class="pre">reload_storage_policies()</span></code></a> to load
POLICIES from <code class="docutils literal notranslate"><span class="pre">swift.conf</span></code>.</p>
<dl class="py property">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicy.quorum">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">quorum</span></span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicy.quorum" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Quorum concept in the replication case:</dt><dd><p>floor(number of replica / 2) + 1</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicyCollection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.storage_policy.</span></span><span class="sig-name descname"><span class="pre">StoragePolicyCollection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pols</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicyCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class represents the collection of valid storage policies for the
cluster and is instantiated as <a class="reference internal" href="#swift.common.storage_policy.StoragePolicy" title="swift.common.storage_policy.StoragePolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoragePolicy</span></code></a> objects are added to
the collection when <code class="docutils literal notranslate"><span class="pre">swift.conf</span></code> is parsed by
<a class="reference internal" href="#swift.common.storage_policy.parse_storage_policies" title="swift.common.storage_policy.parse_storage_policies"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_storage_policies()</span></code></a>.</p>
<p>When a StoragePolicyCollection is created, the following validation
is enforced:</p>
<ul class="simple">
<li><p>If a policy with index 0 is not declared and no other policies defined,
Swift will create one</p></li>
<li><p>The policy index must be a non-negative integer</p></li>
<li><p>If no policy is declared as the default and no other policies are
defined, the policy with index 0 is set as the default</p></li>
<li><p>Policy indexes must be unique</p></li>
<li><p>Policy names are required</p></li>
<li><p>Policy names are case insensitive</p></li>
<li><p>Policy names must contain only letters, digits or a dash</p></li>
<li><p>Policy names must be unique</p></li>
<li><p>The policy name ‘Policy-0’ can only be used for the policy with index 0</p></li>
<li><p>If any policies are defined, exactly one policy must be declared default</p></li>
<li><p>Deprecated policies can not be declared the default</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicyCollection.add_policy_alias">
<span class="sig-name descname"><span class="pre">add_policy_alias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_index</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">aliases</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicyCollection.add_policy_alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new name or names to a policy</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>policy_index</strong> – index of a policy in this policy collection.</p></li>
<li><p><strong>aliases</strong> – arbitrary number of string policy names to add.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicyCollection.change_policy_primary_name">
<span class="sig-name descname"><span class="pre">change_policy_primary_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicyCollection.change_policy_primary_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the primary or default name of a policy. The new primary
name can be an alias that already belongs to the policy or a
completely new name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>policy_index</strong> – index of a policy in this policy collection.</p></li>
<li><p><strong>new_name</strong> – a string name to set as the new default name.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicyCollection.get_by_index">
<span class="sig-name descname"><span class="pre">get_by_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicyCollection.get_by_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a storage policy by its index.</p>
<p>An index of None will be treated as 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>index</strong> – numeric index of the storage policy</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>storage policy, or None if no such policy</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicyCollection.get_by_name">
<span class="sig-name descname"><span class="pre">get_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicyCollection.get_by_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a storage policy by its name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> – name of the policy</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>storage policy, or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicyCollection.get_object_ring">
<span class="sig-name descname"><span class="pre">get_object_ring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swift_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicyCollection.get_object_ring" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ring object to use to handle a request based on its policy.</p>
<p>An index of None will be treated as 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>policy_idx</strong> – policy index as defined in swift.conf</p></li>
<li><p><strong>swift_dir</strong> – swift_dir used by the caller</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>appropriate ring object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicyCollection.get_policy_info">
<span class="sig-name descname"><span class="pre">get_policy_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicyCollection.get_policy_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Build info about policies for the /info endpoint</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of dicts containing relevant policy information</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicyCollection.remove_policy_alias">
<span class="sig-name descname"><span class="pre">remove_policy_alias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">aliases</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicyCollection.remove_policy_alias" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a name or names from a policy. If the name removed is the
primary name then the next available alias will be adopted
as the new primary name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>aliases</strong> – arbitrary number of existing policy names to remove.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.common.storage_policy.StoragePolicySingleton">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.common.storage_policy.</span></span><span class="sig-name descname"><span class="pre">StoragePolicySingleton</span></span><a class="headerlink" href="#swift.common.storage_policy.StoragePolicySingleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An instance of this class is the primary interface to storage policies
exposed as a module level global named <code class="docutils literal notranslate"><span class="pre">POLICIES</span></code>.  This global
reference wraps <code class="docutils literal notranslate"><span class="pre">_POLICIES</span></code> which is normally instantiated by parsing
<code class="docutils literal notranslate"><span class="pre">swift.conf</span></code> and will result in an instance of
<a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection" title="swift.common.storage_policy.StoragePolicyCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoragePolicyCollection</span></code></a>.</p>
<p>You should never patch this instance directly, instead patch the module
level <code class="docutils literal notranslate"><span class="pre">_POLICIES</span></code> instance so that swift code which imported
<code class="docutils literal notranslate"><span class="pre">POLICIES</span></code> directly will reference the patched
<a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection" title="swift.common.storage_policy.StoragePolicyCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoragePolicyCollection</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.storage_policy.get_policy_string">
<span class="sig-prename descclassname"><span class="pre">swift.common.storage_policy.</span></span><span class="sig-name descname"><span class="pre">get_policy_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy_or_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.get_policy_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to construct a string from a base and the policy.
Used to encode the policy index into either a file name or a
directory name by various modules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base</strong> – the base string</p></li>
<li><p><strong>policy_or_index</strong> – StoragePolicy instance, or an index
(string or int), if None the legacy
storage Policy-0 is assumed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>base name with policy index added</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#swift.common.storage_policy.PolicyError" title="swift.common.storage_policy.PolicyError"><strong>PolicyError</strong></a> – if no policy exists with the given policy_index</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.storage_policy.parse_storage_policies">
<span class="sig-prename descclassname"><span class="pre">swift.common.storage_policy.</span></span><span class="sig-name descname"><span class="pre">parse_storage_policies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.parse_storage_policies" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse storage policies in <code class="docutils literal notranslate"><span class="pre">swift.conf</span></code> - note that validation
is done when the <a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection" title="swift.common.storage_policy.StoragePolicyCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoragePolicyCollection</span></code></a> is instantiated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conf</strong> – ConfigParser parser object for swift.conf</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.storage_policy.reload_storage_policies">
<span class="sig-prename descclassname"><span class="pre">swift.common.storage_policy.</span></span><span class="sig-name descname"><span class="pre">reload_storage_policies</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.reload_storage_policies" title="Permalink to this definition">¶</a></dt>
<dd><p>Reload POLICIES from <code class="docutils literal notranslate"><span class="pre">swift.conf</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.common.storage_policy.split_policy_string">
<span class="sig-prename descclassname"><span class="pre">swift.common.storage_policy.</span></span><span class="sig-name descname"><span class="pre">split_policy_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.common.storage_policy.split_policy_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to convert a string representing a base and a
policy.  Used to decode the policy from either a file name or
a directory name by various modules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>policy_string</strong> – base name with policy index added</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#swift.common.storage_policy.PolicyError" title="swift.common.storage_policy.PolicyError"><strong>PolicyError</strong></a> – if given index does not map to a valid policy</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a tuple, in the form (base, policy) where base is the base
string and policy is the StoragePolicy instance for the
index encoded in the policy_string.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="object.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Object"></i></a>
          
          
            <a href="middleware.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Middleware"></i></a>
          
          <a id="pdfLink2" href="" target="_blank" title="Download the manuals as PDF"><i class="fa fa-file-pdf-o" data-toggle="tooltip" data-placement="top" title="Download PDF"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">this page last updated: 2022-04-19 15:26:11</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="https://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the
                 document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="OpenStack Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/id/">Bahasa Indonesia (Indonesian)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/it/">Italiano (Italian)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/tr_TR/">Türkçe (Türkiye)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Swift 0.1.0.dev10162</h4></a>
      <ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/object_api_v1_overview.html">Object Storage API overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_architecture.html">Swift Architectural Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_ring.html">The Rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_policies.html">Storage Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_reaper.html">The Account Reaper</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_auth.html">The Auth System</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_acl.html">Access Control Lists (ACLs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_replication.html">Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="ratelimit.html">Rate Limiting</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_large_objects.html">Large Object Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_global_cluster.html">Global Clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_container_sync.html">Container to Container Synchronization</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_expiring_objects.html">Expiring Object Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="cors.html">CORS</a></li>
<li class="toctree-l1"><a class="reference internal" href="crossdomain.html">Cross-domain Policy File</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_erasure_code.html">Erasure Code Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_encryption.html">Object Encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_backing_store.html">Using Swift as Backing Store for Service Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_container_sharding.html">Container Sharding</a></li>
<li class="toctree-l1"><a class="reference internal" href="ring_background.html">Building a Consistent Hashing Ring</a></li>
<li class="toctree-l1"><a class="reference internal" href="ring_partpower.html">Modifying Ring Partition Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="associated_projects.html">Associated Projects</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html">Contributing to OpenStack Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#swift-design-principles">Swift Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#recommended-workflow">Recommended workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#notes-on-testing">Notes on Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#ideas">Ideas</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#community">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/review_guidelines.html">Review Guidelines</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="development_guidelines.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_saio.html">SAIO (Swift All In One)</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_contribution_swift.html">First Contribution to Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="policies_saio.html">Adding Storage Policies to an Existing SAIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_auth.html">Auth Server and Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_middleware.html">Middleware and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_ondisk_backends.html">Pluggable On-Disk Back-end APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_watchers.html">Auditor Watchers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="deployment_guide.html">Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_deployment_guide.html">Apache Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin_guide.html">Administrator’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="replication_network.html">Dedicated replication network</a></li>
<li class="toctree-l1"><a class="reference internal" href="logs.html">Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ops_runbook/index.html">Swift Ops Runbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin/index.html">OpenStack Swift Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="install/index.html">Object Storage Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="config/index.html">Configuration Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/object_api_v1_overview.html">Object Storage API overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/discoverability.html">Discoverability</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/container_quotas.html">Container quotas</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/object_versioning.html">Object versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/large_objects.html">Large objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/temporary_url_middleware.html">Temporary URL middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/form_post_middleware.html">Form POST middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/use_content-encoding_metadata.html">Use Content-Encoding metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/use_the_content-disposition_metadata.html">Use the Content-Disposition metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/pseudo-hierarchical-folders-directories.html">Pseudo-hierarchical folders and directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/pagination.html">Page through large lists of containers or objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/serialized-response-formats.html">Serialized response formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/static-website.html">Create static website</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/object-expiration.html">Object expiration</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/bulk-delete.html">Bulk delete</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="s3_compat.html">S3/Swift REST API Comparison Matrix</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ring.html">Partitioned Consistent Hash Ring</a></li>
<li class="toctree-l1"><a class="reference internal" href="proxy.html">Proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="account.html">Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="container.html">Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="db.html">Account DB and Container DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="object.html">Object</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Misc</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#acls">ACLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.common.bufferedhttp">Buffered HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="#constraints">Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.common.container_sync_realms">Container Sync Realms</a></li>
<li class="toctree-l2"><a class="reference internal" href="#digest">Digest</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.common.direct_client">Direct Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exceptions">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.common.internal_client">Internal Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.common.manager">Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.common.memcached">MemCacheD</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.common.registry">Middleware Registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.common.request_helpers">Request Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#swob">Swob</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utils">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wsgi">WSGI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.common.storage_policy">Storage Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="audit_watchers.html">Object Audit Watchers</a></li>
</ul>

    </div>

  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="local-table-of-contents">
      <h4 class="docs-sidebar-section-title">Page Contents</h4>
      <ul>
<li><a class="reference internal" href="#">Misc</a><ul>
<li><a class="reference internal" href="#acls">ACLs</a><ul>
<li><a class="reference internal" href="#swift.common.middleware.acl.acls_from_account_info"><code class="docutils literal notranslate"><span class="pre">acls_from_account_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.middleware.acl.clean_acl"><code class="docutils literal notranslate"><span class="pre">clean_acl()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.middleware.acl.format_acl"><code class="docutils literal notranslate"><span class="pre">format_acl()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.middleware.acl.format_acl_v1"><code class="docutils literal notranslate"><span class="pre">format_acl_v1()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.middleware.acl.format_acl_v2"><code class="docutils literal notranslate"><span class="pre">format_acl_v2()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.middleware.acl.parse_acl"><code class="docutils literal notranslate"><span class="pre">parse_acl()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.middleware.acl.parse_acl_v1"><code class="docutils literal notranslate"><span class="pre">parse_acl_v1()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.middleware.acl.parse_acl_v2"><code class="docutils literal notranslate"><span class="pre">parse_acl_v2()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.middleware.acl.referrer_allowed"><code class="docutils literal notranslate"><span class="pre">referrer_allowed()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.common.bufferedhttp">Buffered HTTP</a><ul>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPConnection"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPConnection</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPConnection.connect"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPConnection.connect()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPConnection.getresponse"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPConnection.getresponse()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPConnection.putheader"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPConnection.putheader()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPConnection.putrequest"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPConnection.putrequest()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPConnection.response_class"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPConnection.response_class</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPResponse"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPResponse</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPResponse.close"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPResponse.close()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPResponse.nuke_from_orbit"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPResponse.nuke_from_orbit()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPResponse.read"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPResponse.read()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.bufferedhttp.BufferedHTTPResponse.readline"><code class="docutils literal notranslate"><span class="pre">BufferedHTTPResponse.readline()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.bufferedhttp.http_connect"><code class="docutils literal notranslate"><span class="pre">http_connect()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.bufferedhttp.http_connect_raw"><code class="docutils literal notranslate"><span class="pre">http_connect_raw()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#constraints">Constraints</a><ul>
<li><a class="reference internal" href="#swift.common.constraints.check_account_format"><code class="docutils literal notranslate"><span class="pre">check_account_format()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.check_container_format"><code class="docutils literal notranslate"><span class="pre">check_container_format()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.check_delete_headers"><code class="docutils literal notranslate"><span class="pre">check_delete_headers()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.check_dir"><code class="docutils literal notranslate"><span class="pre">check_dir()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.check_drive"><code class="docutils literal notranslate"><span class="pre">check_drive()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.check_float"><code class="docutils literal notranslate"><span class="pre">check_float()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.check_metadata"><code class="docutils literal notranslate"><span class="pre">check_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.check_mount"><code class="docutils literal notranslate"><span class="pre">check_mount()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.check_name_format"><code class="docutils literal notranslate"><span class="pre">check_name_format()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.check_object_creation"><code class="docutils literal notranslate"><span class="pre">check_object_creation()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.check_utf8"><code class="docutils literal notranslate"><span class="pre">check_utf8()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.reload_constraints"><code class="docutils literal notranslate"><span class="pre">reload_constraints()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.valid_api_version"><code class="docutils literal notranslate"><span class="pre">valid_api_version()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.constraints.valid_timestamp"><code class="docutils literal notranslate"><span class="pre">valid_timestamp()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.common.container_sync_realms">Container Sync Realms</a><ul>
<li><a class="reference internal" href="#swift.common.container_sync_realms.ContainerSyncRealms"><code class="docutils literal notranslate"><span class="pre">ContainerSyncRealms</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.container_sync_realms.ContainerSyncRealms.clusters"><code class="docutils literal notranslate"><span class="pre">ContainerSyncRealms.clusters()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.container_sync_realms.ContainerSyncRealms.endpoint"><code class="docutils literal notranslate"><span class="pre">ContainerSyncRealms.endpoint()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.container_sync_realms.ContainerSyncRealms.get_sig"><code class="docutils literal notranslate"><span class="pre">ContainerSyncRealms.get_sig()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.container_sync_realms.ContainerSyncRealms.key"><code class="docutils literal notranslate"><span class="pre">ContainerSyncRealms.key()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.container_sync_realms.ContainerSyncRealms.key2"><code class="docutils literal notranslate"><span class="pre">ContainerSyncRealms.key2()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.container_sync_realms.ContainerSyncRealms.realms"><code class="docutils literal notranslate"><span class="pre">ContainerSyncRealms.realms()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.container_sync_realms.ContainerSyncRealms.reload"><code class="docutils literal notranslate"><span class="pre">ContainerSyncRealms.reload()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#digest">Digest</a><ul>
<li><a class="reference internal" href="#swift.common.digest.extract_digest_and_algorithm"><code class="docutils literal notranslate"><span class="pre">extract_digest_and_algorithm()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.digest.get_allowed_digests"><code class="docutils literal notranslate"><span class="pre">get_allowed_digests()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.digest.get_hmac"><code class="docutils literal notranslate"><span class="pre">get_hmac()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.common.direct_client">Direct Client</a><ul>
<li><a class="reference internal" href="#swift.common.direct_client.DirectClientException"><code class="docutils literal notranslate"><span class="pre">DirectClientException</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.DirectClientReconException"><code class="docutils literal notranslate"><span class="pre">DirectClientReconException</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_delete_account"><code class="docutils literal notranslate"><span class="pre">direct_delete_account()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_delete_container"><code class="docutils literal notranslate"><span class="pre">direct_delete_container()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_delete_container_object"><code class="docutils literal notranslate"><span class="pre">direct_delete_container_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_delete_object"><code class="docutils literal notranslate"><span class="pre">direct_delete_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_get_account"><code class="docutils literal notranslate"><span class="pre">direct_get_account()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_get_container"><code class="docutils literal notranslate"><span class="pre">direct_get_container()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_get_object"><code class="docutils literal notranslate"><span class="pre">direct_get_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_get_recon"><code class="docutils literal notranslate"><span class="pre">direct_get_recon()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_get_suffix_hashes"><code class="docutils literal notranslate"><span class="pre">direct_get_suffix_hashes()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_head_container"><code class="docutils literal notranslate"><span class="pre">direct_head_container()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_head_object"><code class="docutils literal notranslate"><span class="pre">direct_head_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_post_object"><code class="docutils literal notranslate"><span class="pre">direct_post_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_put_container"><code class="docutils literal notranslate"><span class="pre">direct_put_container()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_put_container_object"><code class="docutils literal notranslate"><span class="pre">direct_put_container_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.direct_put_object"><code class="docutils literal notranslate"><span class="pre">direct_put_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.gen_headers"><code class="docutils literal notranslate"><span class="pre">gen_headers()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.direct_client.retry"><code class="docutils literal notranslate"><span class="pre">retry()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#exceptions">Exceptions</a><ul>
<li><a class="reference internal" href="#swift.common.exceptions.APIVersionError"><code class="docutils literal notranslate"><span class="pre">APIVersionError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ChunkReadError"><code class="docutils literal notranslate"><span class="pre">ChunkReadError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ChunkReadTimeout"><code class="docutils literal notranslate"><span class="pre">ChunkReadTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ChunkWriteTimeout"><code class="docutils literal notranslate"><span class="pre">ChunkWriteTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ClientException"><code class="docutils literal notranslate"><span class="pre">ClientException</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ConnectionTimeout"><code class="docutils literal notranslate"><span class="pre">ConnectionTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DatabaseAuditorException"><code class="docutils literal notranslate"><span class="pre">DatabaseAuditorException</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DeviceUnavailable"><code class="docutils literal notranslate"><span class="pre">DeviceUnavailable</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileBadMetadataChecksum"><code class="docutils literal notranslate"><span class="pre">DiskFileBadMetadataChecksum</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileCollision"><code class="docutils literal notranslate"><span class="pre">DiskFileCollision</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileDeleted"><code class="docutils literal notranslate"><span class="pre">DiskFileDeleted</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileDeviceUnavailable"><code class="docutils literal notranslate"><span class="pre">DiskFileDeviceUnavailable</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileError"><code class="docutils literal notranslate"><span class="pre">DiskFileError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileExpired"><code class="docutils literal notranslate"><span class="pre">DiskFileExpired</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileNoSpace"><code class="docutils literal notranslate"><span class="pre">DiskFileNoSpace</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileNotExist"><code class="docutils literal notranslate"><span class="pre">DiskFileNotExist</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileNotOpen"><code class="docutils literal notranslate"><span class="pre">DiskFileNotOpen</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileQuarantined"><code class="docutils literal notranslate"><span class="pre">DiskFileQuarantined</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DiskFileXattrNotSupported"><code class="docutils literal notranslate"><span class="pre">DiskFileXattrNotSupported</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DriveNotMounted"><code class="docutils literal notranslate"><span class="pre">DriveNotMounted</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.DuplicateDeviceError"><code class="docutils literal notranslate"><span class="pre">DuplicateDeviceError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.EmptyRingError"><code class="docutils literal notranslate"><span class="pre">EmptyRingError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.EncryptionException"><code class="docutils literal notranslate"><span class="pre">EncryptionException</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.FileNotFoundError"><code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.FooterNotSupported"><code class="docutils literal notranslate"><span class="pre">FooterNotSupported</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.InsufficientStorage"><code class="docutils literal notranslate"><span class="pre">InsufficientStorage</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.InvalidAccountInfo"><code class="docutils literal notranslate"><span class="pre">InvalidAccountInfo</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.InvalidPidFileException"><code class="docutils literal notranslate"><span class="pre">InvalidPidFileException</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.InvalidTimestamp"><code class="docutils literal notranslate"><span class="pre">InvalidTimestamp</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.LinkIterError"><code class="docutils literal notranslate"><span class="pre">LinkIterError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ListingIterError"><code class="docutils literal notranslate"><span class="pre">ListingIterError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ListingIterNotAuthorized"><code class="docutils literal notranslate"><span class="pre">ListingIterNotAuthorized</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ListingIterNotFound"><code class="docutils literal notranslate"><span class="pre">ListingIterNotFound</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.LockTimeout"><code class="docutils literal notranslate"><span class="pre">LockTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.MessageTimeout"><code class="docutils literal notranslate"><span class="pre">MessageTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.MimeInvalid"><code class="docutils literal notranslate"><span class="pre">MimeInvalid</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.MultiphasePUTNotSupported"><code class="docutils literal notranslate"><span class="pre">MultiphasePUTNotSupported</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.PartitionLockTimeout"><code class="docutils literal notranslate"><span class="pre">PartitionLockTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.PathNotDir"><code class="docutils literal notranslate"><span class="pre">PathNotDir</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.PermissionError"><code class="docutils literal notranslate"><span class="pre">PermissionError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.PutterConnectError"><code class="docutils literal notranslate"><span class="pre">PutterConnectError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.QuarantineRequest"><code class="docutils literal notranslate"><span class="pre">QuarantineRequest</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.RangeAlreadyComplete"><code class="docutils literal notranslate"><span class="pre">RangeAlreadyComplete</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ReplicationException"><code class="docutils literal notranslate"><span class="pre">ReplicationException</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ReplicationLockTimeout"><code class="docutils literal notranslate"><span class="pre">ReplicationLockTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ResponseTimeout"><code class="docutils literal notranslate"><span class="pre">ResponseTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.RingBuilderError"><code class="docutils literal notranslate"><span class="pre">RingBuilderError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.RingLoadError"><code class="docutils literal notranslate"><span class="pre">RingLoadError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.RingValidationError"><code class="docutils literal notranslate"><span class="pre">RingValidationError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.SegmentError"><code class="docutils literal notranslate"><span class="pre">SegmentError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.ShortReadError"><code class="docutils literal notranslate"><span class="pre">ShortReadError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.SuffixSyncError"><code class="docutils literal notranslate"><span class="pre">SuffixSyncError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.SwiftException"><code class="docutils literal notranslate"><span class="pre">SwiftException</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.UnPicklingError"><code class="docutils literal notranslate"><span class="pre">UnPicklingError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.exceptions.UnknownSecretIdError"><code class="docutils literal notranslate"><span class="pre">UnknownSecretIdError</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.common.internal_client">Internal Client</a><ul>
<li><a class="reference internal" href="#swift.common.internal_client.CompressingFileReader"><code class="docutils literal notranslate"><span class="pre">CompressingFileReader</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.internal_client.CompressingFileReader.next"><code class="docutils literal notranslate"><span class="pre">CompressingFileReader.next()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.CompressingFileReader.read"><code class="docutils literal notranslate"><span class="pre">CompressingFileReader.read()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.CompressingFileReader.seek"><code class="docutils literal notranslate"><span class="pre">CompressingFileReader.seek()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.CompressingFileReader.set_initial_state"><code class="docutils literal notranslate"><span class="pre">CompressingFileReader.set_initial_state()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient"><code class="docutils literal notranslate"><span class="pre">InternalClient</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.container_exists"><code class="docutils literal notranslate"><span class="pre">InternalClient.container_exists()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.create_account"><code class="docutils literal notranslate"><span class="pre">InternalClient.create_account()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.create_container"><code class="docutils literal notranslate"><span class="pre">InternalClient.create_container()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.delete_account"><code class="docutils literal notranslate"><span class="pre">InternalClient.delete_account()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.delete_container"><code class="docutils literal notranslate"><span class="pre">InternalClient.delete_container()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.delete_object"><code class="docutils literal notranslate"><span class="pre">InternalClient.delete_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.get_account_info"><code class="docutils literal notranslate"><span class="pre">InternalClient.get_account_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.get_account_metadata"><code class="docutils literal notranslate"><span class="pre">InternalClient.get_account_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.get_container_metadata"><code class="docutils literal notranslate"><span class="pre">InternalClient.get_container_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.get_object"><code class="docutils literal notranslate"><span class="pre">InternalClient.get_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.get_object_metadata"><code class="docutils literal notranslate"><span class="pre">InternalClient.get_object_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.handle_request"><code class="docutils literal notranslate"><span class="pre">InternalClient.handle_request()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.iter_containers"><code class="docutils literal notranslate"><span class="pre">InternalClient.iter_containers()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.iter_object_lines"><code class="docutils literal notranslate"><span class="pre">InternalClient.iter_object_lines()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.iter_objects"><code class="docutils literal notranslate"><span class="pre">InternalClient.iter_objects()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.make_path"><code class="docutils literal notranslate"><span class="pre">InternalClient.make_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.make_request"><code class="docutils literal notranslate"><span class="pre">InternalClient.make_request()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.set_account_metadata"><code class="docutils literal notranslate"><span class="pre">InternalClient.set_account_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.set_container_metadata"><code class="docutils literal notranslate"><span class="pre">InternalClient.set_container_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.set_object_metadata"><code class="docutils literal notranslate"><span class="pre">InternalClient.set_object_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.InternalClient.upload_object"><code class="docutils literal notranslate"><span class="pre">InternalClient.upload_object()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.internal_client.SimpleClient"><code class="docutils literal notranslate"><span class="pre">SimpleClient</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.internal_client.SimpleClient.base_request"><code class="docutils literal notranslate"><span class="pre">SimpleClient.base_request()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.SimpleClient.get_account"><code class="docutils literal notranslate"><span class="pre">SimpleClient.get_account()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.SimpleClient.get_container"><code class="docutils literal notranslate"><span class="pre">SimpleClient.get_container()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.SimpleClient.put_container"><code class="docutils literal notranslate"><span class="pre">SimpleClient.put_container()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.SimpleClient.put_object"><code class="docutils literal notranslate"><span class="pre">SimpleClient.put_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.SimpleClient.retry_request"><code class="docutils literal notranslate"><span class="pre">SimpleClient.retry_request()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.internal_client.UnexpectedResponse"><code class="docutils literal notranslate"><span class="pre">UnexpectedResponse</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.delete_object"><code class="docutils literal notranslate"><span class="pre">delete_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.get_auth"><code class="docutils literal notranslate"><span class="pre">get_auth()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.head_object"><code class="docutils literal notranslate"><span class="pre">head_object()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.internal_client.put_object"><code class="docutils literal notranslate"><span class="pre">put_object()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.common.manager">Manager</a><ul>
<li><a class="reference internal" href="#swift.common.manager.Manager"><code class="docutils literal notranslate"><span class="pre">Manager</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.manager.Manager.force_reload"><code class="docutils literal notranslate"><span class="pre">Manager.force_reload()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.get_command"><code class="docutils literal notranslate"><span class="pre">Manager.get_command()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.kill"><code class="docutils literal notranslate"><span class="pre">Manager.kill()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.kill_child_pids"><code class="docutils literal notranslate"><span class="pre">Manager.kill_child_pids()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.list_commands"><code class="docutils literal notranslate"><span class="pre">Manager.list_commands()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.no_daemon"><code class="docutils literal notranslate"><span class="pre">Manager.no_daemon()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.no_wait"><code class="docutils literal notranslate"><span class="pre">Manager.no_wait()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.once"><code class="docutils literal notranslate"><span class="pre">Manager.once()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.reload"><code class="docutils literal notranslate"><span class="pre">Manager.reload()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.reload_seamless"><code class="docutils literal notranslate"><span class="pre">Manager.reload_seamless()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.restart"><code class="docutils literal notranslate"><span class="pre">Manager.restart()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.run_command"><code class="docutils literal notranslate"><span class="pre">Manager.run_command()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.shutdown"><code class="docutils literal notranslate"><span class="pre">Manager.shutdown()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.start"><code class="docutils literal notranslate"><span class="pre">Manager.start()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.status"><code class="docutils literal notranslate"><span class="pre">Manager.status()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Manager.stop"><code class="docutils literal notranslate"><span class="pre">Manager.stop()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.manager.Server"><code class="docutils literal notranslate"><span class="pre">Server</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.manager.Server.conf_files"><code class="docutils literal notranslate"><span class="pre">Server.conf_files()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.get_conf_file_name"><code class="docutils literal notranslate"><span class="pre">Server.get_conf_file_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.get_pid_file_name"><code class="docutils literal notranslate"><span class="pre">Server.get_pid_file_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.get_running_pids"><code class="docutils literal notranslate"><span class="pre">Server.get_running_pids()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.interact"><code class="docutils literal notranslate"><span class="pre">Server.interact()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.iter_pid_files"><code class="docutils literal notranslate"><span class="pre">Server.iter_pid_files()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.kill_child_pids"><code class="docutils literal notranslate"><span class="pre">Server.kill_child_pids()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.kill_running_pids"><code class="docutils literal notranslate"><span class="pre">Server.kill_running_pids()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.launch"><code class="docutils literal notranslate"><span class="pre">Server.launch()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.pid_files"><code class="docutils literal notranslate"><span class="pre">Server.pid_files()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.signal_children"><code class="docutils literal notranslate"><span class="pre">Server.signal_children()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.signal_pids"><code class="docutils literal notranslate"><span class="pre">Server.signal_pids()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.spawn"><code class="docutils literal notranslate"><span class="pre">Server.spawn()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.status"><code class="docutils literal notranslate"><span class="pre">Server.status()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.stop"><code class="docutils literal notranslate"><span class="pre">Server.stop()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.Server.wait"><code class="docutils literal notranslate"><span class="pre">Server.wait()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.manager.UnknownCommandError"><code class="docutils literal notranslate"><span class="pre">UnknownCommandError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.command"><code class="docutils literal notranslate"><span class="pre">command()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.format_server_name"><code class="docutils literal notranslate"><span class="pre">format_server_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.kill_group"><code class="docutils literal notranslate"><span class="pre">kill_group()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.safe_kill"><code class="docutils literal notranslate"><span class="pre">safe_kill()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.setup_env"><code class="docutils literal notranslate"><span class="pre">setup_env()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.verify_server"><code class="docutils literal notranslate"><span class="pre">verify_server()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.manager.watch_server_pids"><code class="docutils literal notranslate"><span class="pre">watch_server_pids()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.common.memcached">MemCacheD</a><ul>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheConnPool"><code class="docutils literal notranslate"><span class="pre">MemcacheConnPool</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheConnPool.create"><code class="docutils literal notranslate"><span class="pre">MemcacheConnPool.create()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheConnPool.get"><code class="docutils literal notranslate"><span class="pre">MemcacheConnPool.get()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheConnectionError"><code class="docutils literal notranslate"><span class="pre">MemcacheConnectionError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.memcached.MemcachePoolTimeout"><code class="docutils literal notranslate"><span class="pre">MemcachePoolTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheRing"><code class="docutils literal notranslate"><span class="pre">MemcacheRing</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheRing.decr"><code class="docutils literal notranslate"><span class="pre">MemcacheRing.decr()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheRing.delete"><code class="docutils literal notranslate"><span class="pre">MemcacheRing.delete()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheRing.get"><code class="docutils literal notranslate"><span class="pre">MemcacheRing.get()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheRing.get_multi"><code class="docutils literal notranslate"><span class="pre">MemcacheRing.get_multi()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheRing.incr"><code class="docutils literal notranslate"><span class="pre">MemcacheRing.incr()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheRing.set"><code class="docutils literal notranslate"><span class="pre">MemcacheRing.set()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.memcached.MemcacheRing.set_multi"><code class="docutils literal notranslate"><span class="pre">MemcacheRing.set_multi()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.memcached.load_memcache"><code class="docutils literal notranslate"><span class="pre">load_memcache()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.memcached.sanitize_timeout"><code class="docutils literal notranslate"><span class="pre">sanitize_timeout()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.common.registry">Middleware Registry</a><ul>
<li><a class="reference internal" href="#swift.common.registry.get_sensitive_headers"><code class="docutils literal notranslate"><span class="pre">get_sensitive_headers()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.registry.get_sensitive_params"><code class="docutils literal notranslate"><span class="pre">get_sensitive_params()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.registry.get_swift_info"><code class="docutils literal notranslate"><span class="pre">get_swift_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.registry.register_sensitive_header"><code class="docutils literal notranslate"><span class="pre">register_sensitive_header()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.registry.register_sensitive_param"><code class="docutils literal notranslate"><span class="pre">register_sensitive_param()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.registry.register_swift_info"><code class="docutils literal notranslate"><span class="pre">register_swift_info()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.common.request_helpers">Request Helpers</a><ul>
<li><a class="reference internal" href="#swift.common.request_helpers.SegmentedIterable"><code class="docutils literal notranslate"><span class="pre">SegmentedIterable</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.request_helpers.SegmentedIterable.app_iter_range"><code class="docutils literal notranslate"><span class="pre">SegmentedIterable.app_iter_range()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.SegmentedIterable.app_iter_ranges"><code class="docutils literal notranslate"><span class="pre">SegmentedIterable.app_iter_ranges()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.SegmentedIterable.close"><code class="docutils literal notranslate"><span class="pre">SegmentedIterable.close()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.SegmentedIterable.validate_first_segment"><code class="docutils literal notranslate"><span class="pre">SegmentedIterable.validate_first_segment()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.request_helpers.check_path_header"><code class="docutils literal notranslate"><span class="pre">check_path_header()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.constrain_req_limit"><code class="docutils literal notranslate"><span class="pre">constrain_req_limit()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.copy_header_subset"><code class="docutils literal notranslate"><span class="pre">copy_header_subset()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.get_container_update_override_key"><code class="docutils literal notranslate"><span class="pre">get_container_update_override_key()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.get_ip_port"><code class="docutils literal notranslate"><span class="pre">get_ip_port()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.get_name_and_placement"><code class="docutils literal notranslate"><span class="pre">get_name_and_placement()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.get_object_transient_sysmeta"><code class="docutils literal notranslate"><span class="pre">get_object_transient_sysmeta()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.get_param"><code class="docutils literal notranslate"><span class="pre">get_param()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.get_reserved_name"><code class="docutils literal notranslate"><span class="pre">get_reserved_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.get_sys_meta_prefix"><code class="docutils literal notranslate"><span class="pre">get_sys_meta_prefix()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.get_user_meta_prefix"><code class="docutils literal notranslate"><span class="pre">get_user_meta_prefix()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.http_response_to_document_iters"><code class="docutils literal notranslate"><span class="pre">http_response_to_document_iters()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.is_object_transient_sysmeta"><code class="docutils literal notranslate"><span class="pre">is_object_transient_sysmeta()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.is_sys_meta"><code class="docutils literal notranslate"><span class="pre">is_sys_meta()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.is_sys_or_user_meta"><code class="docutils literal notranslate"><span class="pre">is_sys_or_user_meta()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.is_use_replication_network"><code class="docutils literal notranslate"><span class="pre">is_use_replication_network()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.is_user_meta"><code class="docutils literal notranslate"><span class="pre">is_user_meta()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.remove_items"><code class="docutils literal notranslate"><span class="pre">remove_items()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.resolve_etag_is_at_header"><code class="docutils literal notranslate"><span class="pre">resolve_etag_is_at_header()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.split_and_validate_path"><code class="docutils literal notranslate"><span class="pre">split_and_validate_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.split_reserved_name"><code class="docutils literal notranslate"><span class="pre">split_reserved_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.strip_object_transient_sysmeta_prefix"><code class="docutils literal notranslate"><span class="pre">strip_object_transient_sysmeta_prefix()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.strip_sys_meta_prefix"><code class="docutils literal notranslate"><span class="pre">strip_sys_meta_prefix()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.strip_user_meta_prefix"><code class="docutils literal notranslate"><span class="pre">strip_user_meta_prefix()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.update_etag_is_at_header"><code class="docutils literal notranslate"><span class="pre">update_etag_is_at_header()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.update_ignore_range_header"><code class="docutils literal notranslate"><span class="pre">update_ignore_range_header()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.validate_container_params"><code class="docutils literal notranslate"><span class="pre">validate_container_params()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.validate_internal_account"><code class="docutils literal notranslate"><span class="pre">validate_internal_account()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.validate_internal_container"><code class="docutils literal notranslate"><span class="pre">validate_internal_container()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.validate_internal_obj"><code class="docutils literal notranslate"><span class="pre">validate_internal_obj()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.request_helpers.validate_params"><code class="docutils literal notranslate"><span class="pre">validate_params()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swob">Swob</a><ul>
<li><a class="reference internal" href="#swift.common.swob.Accept"><code class="docutils literal notranslate"><span class="pre">Accept</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.swob.Accept.best_match"><code class="docutils literal notranslate"><span class="pre">Accept.best_match()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.swob.HTTPException"><code class="docutils literal notranslate"><span class="pre">HTTPException</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.HeaderEnvironProxy"><code class="docutils literal notranslate"><span class="pre">HeaderEnvironProxy</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.swob.HeaderEnvironProxy.keys"><code class="docutils literal notranslate"><span class="pre">HeaderEnvironProxy.keys()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.swob.Match"><code class="docutils literal notranslate"><span class="pre">Match</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Range"><code class="docutils literal notranslate"><span class="pre">Range</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.swob.Range.ranges_for_length"><code class="docutils literal notranslate"><span class="pre">Range.ranges_for_length()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.swob.Request"><code class="docutils literal notranslate"><span class="pre">Request</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.swob.Request.accept"><code class="docutils literal notranslate"><span class="pre">Request.accept</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.acl"><code class="docutils literal notranslate"><span class="pre">Request.acl</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.blank"><code class="docutils literal notranslate"><span class="pre">Request.blank()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.body"><code class="docutils literal notranslate"><span class="pre">Request.body</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.body_file"><code class="docutils literal notranslate"><span class="pre">Request.body_file</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.call_application"><code class="docutils literal notranslate"><span class="pre">Request.call_application()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.content_length"><code class="docutils literal notranslate"><span class="pre">Request.content_length</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.copy_get"><code class="docutils literal notranslate"><span class="pre">Request.copy_get()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.ensure_x_timestamp"><code class="docutils literal notranslate"><span class="pre">Request.ensure_x_timestamp()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.get_response"><code class="docutils literal notranslate"><span class="pre">Request.get_response()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.host"><code class="docutils literal notranslate"><span class="pre">Request.host</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.host_url"><code class="docutils literal notranslate"><span class="pre">Request.host_url</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.if_match"><code class="docutils literal notranslate"><span class="pre">Request.if_match</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.if_modified_since"><code class="docutils literal notranslate"><span class="pre">Request.if_modified_since</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.if_none_match"><code class="docutils literal notranslate"><span class="pre">Request.if_none_match</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.if_unmodified_since"><code class="docutils literal notranslate"><span class="pre">Request.if_unmodified_since</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.message_length"><code class="docutils literal notranslate"><span class="pre">Request.message_length()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.method"><code class="docutils literal notranslate"><span class="pre">Request.method</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.params"><code class="docutils literal notranslate"><span class="pre">Request.params</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.path"><code class="docutils literal notranslate"><span class="pre">Request.path</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.path_info"><code class="docutils literal notranslate"><span class="pre">Request.path_info</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.path_info_pop"><code class="docutils literal notranslate"><span class="pre">Request.path_info_pop()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.path_qs"><code class="docutils literal notranslate"><span class="pre">Request.path_qs</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.query_string"><code class="docutils literal notranslate"><span class="pre">Request.query_string</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.range"><code class="docutils literal notranslate"><span class="pre">Request.range</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.referer"><code class="docutils literal notranslate"><span class="pre">Request.referer</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.referrer"><code class="docutils literal notranslate"><span class="pre">Request.referrer</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.remote_addr"><code class="docutils literal notranslate"><span class="pre">Request.remote_addr</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.remote_user"><code class="docutils literal notranslate"><span class="pre">Request.remote_user</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.script_name"><code class="docutils literal notranslate"><span class="pre">Request.script_name</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.split_path"><code class="docutils literal notranslate"><span class="pre">Request.split_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.str_params"><code class="docutils literal notranslate"><span class="pre">Request.str_params</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.swift_entity_path"><code class="docutils literal notranslate"><span class="pre">Request.swift_entity_path</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.timestamp"><code class="docutils literal notranslate"><span class="pre">Request.timestamp</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.url"><code class="docutils literal notranslate"><span class="pre">Request.url</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Request.user_agent"><code class="docutils literal notranslate"><span class="pre">Request.user_agent</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.swob.Response"><code class="docutils literal notranslate"><span class="pre">Response</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.swob.Response.__call__"><code class="docutils literal notranslate"><span class="pre">Response.__call__()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.absolute_location"><code class="docutils literal notranslate"><span class="pre">Response.absolute_location()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.accept_ranges"><code class="docutils literal notranslate"><span class="pre">Response.accept_ranges</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.app_iter"><code class="docutils literal notranslate"><span class="pre">Response.app_iter</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.body"><code class="docutils literal notranslate"><span class="pre">Response.body</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.charset"><code class="docutils literal notranslate"><span class="pre">Response.charset</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.conditional_etag"><code class="docutils literal notranslate"><span class="pre">Response.conditional_etag</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.content_length"><code class="docutils literal notranslate"><span class="pre">Response.content_length</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.content_range"><code class="docutils literal notranslate"><span class="pre">Response.content_range</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.content_type"><code class="docutils literal notranslate"><span class="pre">Response.content_type</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.etag"><code class="docutils literal notranslate"><span class="pre">Response.etag</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.fix_conditional_response"><code class="docutils literal notranslate"><span class="pre">Response.fix_conditional_response()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.host_url"><code class="docutils literal notranslate"><span class="pre">Response.host_url</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.last_modified"><code class="docutils literal notranslate"><span class="pre">Response.last_modified</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.location"><code class="docutils literal notranslate"><span class="pre">Response.location</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.status"><code class="docutils literal notranslate"><span class="pre">Response.status</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.Response.www_authenticate"><code class="docutils literal notranslate"><span class="pre">Response.www_authenticate()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.swob.StatusMap"><code class="docutils literal notranslate"><span class="pre">StatusMap</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.WsgiBytesIO"><code class="docutils literal notranslate"><span class="pre">WsgiBytesIO</span></code></a></li>
<li><a class="reference internal" href="#swift.common.swob.wsgify"><code class="docutils literal notranslate"><span class="pre">wsgify()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#utils">Utils</a><ul>
<li><a class="reference internal" href="#swift.common.utils.ATTRIBUTES_RE"><code class="docutils literal notranslate"><span class="pre">ATTRIBUTES_RE</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.CloseableChain"><code class="docutils literal notranslate"><span class="pre">CloseableChain</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ContextPool"><code class="docutils literal notranslate"><span class="pre">ContextPool</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.Everything"><code class="docutils literal notranslate"><span class="pre">Everything</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.GreenAsyncPile"><code class="docutils literal notranslate"><span class="pre">GreenAsyncPile</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.GreenAsyncPile.spawn"><code class="docutils literal notranslate"><span class="pre">GreenAsyncPile.spawn()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.GreenAsyncPile.waitall"><code class="docutils literal notranslate"><span class="pre">GreenAsyncPile.waitall()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.GreenAsyncPile.waitfirst"><code class="docutils literal notranslate"><span class="pre">GreenAsyncPile.waitfirst()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.GreenAsyncPileWaitallTimeout"><code class="docutils literal notranslate"><span class="pre">GreenAsyncPileWaitallTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.GreenthreadSafeIterator"><code class="docutils literal notranslate"><span class="pre">GreenthreadSafeIterator</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.InputProxy"><code class="docutils literal notranslate"><span class="pre">InputProxy</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.InputProxy.read"><code class="docutils literal notranslate"><span class="pre">InputProxy.read()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.InputProxy.readline"><code class="docutils literal notranslate"><span class="pre">InputProxy.readline()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.InvalidHashPathConfigError"><code class="docutils literal notranslate"><span class="pre">InvalidHashPathConfigError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.LRUCache"><code class="docutils literal notranslate"><span class="pre">LRUCache</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.LogAdapter"><code class="docutils literal notranslate"><span class="pre">LogAdapter</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.LogAdapter.exception"><code class="docutils literal notranslate"><span class="pre">LogAdapter.exception()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.LogAdapter.getEffectiveLevel"><code class="docutils literal notranslate"><span class="pre">LogAdapter.getEffectiveLevel()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.LogAdapter.notice"><code class="docutils literal notranslate"><span class="pre">LogAdapter.notice()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.LogAdapter.process"><code class="docutils literal notranslate"><span class="pre">LogAdapter.process()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.LogAdapter.set_statsd_prefix"><code class="docutils literal notranslate"><span class="pre">LogAdapter.set_statsd_prefix()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.LogAdapter.statsd_delegate"><code class="docutils literal notranslate"><span class="pre">LogAdapter.statsd_delegate()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.LogLevelFilter"><code class="docutils literal notranslate"><span class="pre">LogLevelFilter</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.MetricsPrefixLoggerAdapter"><code class="docutils literal notranslate"><span class="pre">MetricsPrefixLoggerAdapter</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.NR_ioprio_set"><code class="docutils literal notranslate"><span class="pre">NR_ioprio_set()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.NicerInterpolation"><code class="docutils literal notranslate"><span class="pre">NicerInterpolation</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.NoopMutex"><code class="docutils literal notranslate"><span class="pre">NoopMutex</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.NullLogger"><code class="docutils literal notranslate"><span class="pre">NullLogger</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.OverrideOptions"><code class="docutils literal notranslate"><span class="pre">OverrideOptions</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.OverrideOptions.devices"><code class="docutils literal notranslate"><span class="pre">OverrideOptions.devices</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.OverrideOptions.partitions"><code class="docutils literal notranslate"><span class="pre">OverrideOptions.partitions</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.OverrideOptions.policies"><code class="docutils literal notranslate"><span class="pre">OverrideOptions.policies</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.PipeMutex"><code class="docutils literal notranslate"><span class="pre">PipeMutex</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.PipeMutex.acquire"><code class="docutils literal notranslate"><span class="pre">PipeMutex.acquire()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.PipeMutex.close"><code class="docutils literal notranslate"><span class="pre">PipeMutex.close()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.PipeMutex.release"><code class="docutils literal notranslate"><span class="pre">PipeMutex.release()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.PrefixLoggerAdapter"><code class="docutils literal notranslate"><span class="pre">PrefixLoggerAdapter</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.PrefixLoggerAdapter.exception"><code class="docutils literal notranslate"><span class="pre">PrefixLoggerAdapter.exception()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.PrefixLoggerAdapter.process"><code class="docutils literal notranslate"><span class="pre">PrefixLoggerAdapter.process()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.RateLimitedIterator"><code class="docutils literal notranslate"><span class="pre">RateLimitedIterator</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardName"><code class="docutils literal notranslate"><span class="pre">ShardName</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.ShardName.create"><code class="docutils literal notranslate"><span class="pre">ShardName.create()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardName.hash_container_name"><code class="docutils literal notranslate"><span class="pre">ShardName.hash_container_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardName.parse"><code class="docutils literal notranslate"><span class="pre">ShardName.parse()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange"><code class="docutils literal notranslate"><span class="pre">ShardRange</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.MaxBound"><code class="docutils literal notranslate"><span class="pre">ShardRange.MaxBound</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.MinBound"><code class="docutils literal notranslate"><span class="pre">ShardRange.MinBound</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.copy"><code class="docutils literal notranslate"><span class="pre">ShardRange.copy()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.entire_namespace"><code class="docutils literal notranslate"><span class="pre">ShardRange.entire_namespace()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.expand"><code class="docutils literal notranslate"><span class="pre">ShardRange.expand()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.find_ancestors"><code class="docutils literal notranslate"><span class="pre">ShardRange.find_ancestors()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.find_root"><code class="docutils literal notranslate"><span class="pre">ShardRange.find_root()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.from_dict"><code class="docutils literal notranslate"><span class="pre">ShardRange.from_dict()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.includes"><code class="docutils literal notranslate"><span class="pre">ShardRange.includes()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.increment_meta"><code class="docutils literal notranslate"><span class="pre">ShardRange.increment_meta()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.is_child_of"><code class="docutils literal notranslate"><span class="pre">ShardRange.is_child_of()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.make_path"><code class="docutils literal notranslate"><span class="pre">ShardRange.make_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.overlaps"><code class="docutils literal notranslate"><span class="pre">ShardRange.overlaps()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.resolve_state"><code class="docutils literal notranslate"><span class="pre">ShardRange.resolve_state()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.row_count"><code class="docutils literal notranslate"><span class="pre">ShardRange.row_count</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.set_deleted"><code class="docutils literal notranslate"><span class="pre">ShardRange.set_deleted()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.update_meta"><code class="docutils literal notranslate"><span class="pre">ShardRange.update_meta()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.update_state"><code class="docutils literal notranslate"><span class="pre">ShardRange.update_state()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRange.update_tombstones"><code class="docutils literal notranslate"><span class="pre">ShardRange.update_tombstones()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.ShardRangeList"><code class="docutils literal notranslate"><span class="pre">ShardRangeList</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.ShardRangeList.bytes_used"><code class="docutils literal notranslate"><span class="pre">ShardRangeList.bytes_used</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRangeList.filter"><code class="docutils literal notranslate"><span class="pre">ShardRangeList.filter()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRangeList.find_lower"><code class="docutils literal notranslate"><span class="pre">ShardRangeList.find_lower()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRangeList.includes"><code class="docutils literal notranslate"><span class="pre">ShardRangeList.includes()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRangeList.lower"><code class="docutils literal notranslate"><span class="pre">ShardRangeList.lower</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRangeList.object_count"><code class="docutils literal notranslate"><span class="pre">ShardRangeList.object_count</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRangeList.row_count"><code class="docutils literal notranslate"><span class="pre">ShardRangeList.row_count</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ShardRangeList.upper"><code class="docutils literal notranslate"><span class="pre">ShardRangeList.upper</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.ShardRangeOuterBound"><code class="docutils literal notranslate"><span class="pre">ShardRangeOuterBound</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.Spliterator"><code class="docutils literal notranslate"><span class="pre">Spliterator</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.StrAnonymizer"><code class="docutils literal notranslate"><span class="pre">StrAnonymizer</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.StrFormatTime"><code class="docutils literal notranslate"><span class="pre">StrFormatTime</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.StreamingPile"><code class="docutils literal notranslate"><span class="pre">StreamingPile</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.StreamingPile.asyncstarmap"><code class="docutils literal notranslate"><span class="pre">StreamingPile.asyncstarmap()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.SwiftLogFormatter"><code class="docutils literal notranslate"><span class="pre">SwiftLogFormatter</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.SwiftLogFormatter.format"><code class="docutils literal notranslate"><span class="pre">SwiftLogFormatter.format()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.SwiftLoggerAdapter"><code class="docutils literal notranslate"><span class="pre">SwiftLoggerAdapter</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.SwiftLoggerAdapter.exception"><code class="docutils literal notranslate"><span class="pre">SwiftLoggerAdapter.exception()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.ThreadSafeSysLogHandler"><code class="docutils literal notranslate"><span class="pre">ThreadSafeSysLogHandler</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.ThreadSafeSysLogHandler.createLock"><code class="docutils literal notranslate"><span class="pre">ThreadSafeSysLogHandler.createLock()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.Timestamp"><code class="docutils literal notranslate"><span class="pre">Timestamp</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.Timestamp.ceil"><code class="docutils literal notranslate"><span class="pre">Timestamp.ceil()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.Timestamp.from_isoformat"><code class="docutils literal notranslate"><span class="pre">Timestamp.from_isoformat()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.Timestamp.isoformat"><code class="docutils literal notranslate"><span class="pre">Timestamp.isoformat</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.Watchdog"><code class="docutils literal notranslate"><span class="pre">Watchdog</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.utils.Watchdog.spawn"><code class="docutils literal notranslate"><span class="pre">Watchdog.spawn()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.Watchdog.start"><code class="docutils literal notranslate"><span class="pre">Watchdog.start()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.Watchdog.stop"><code class="docutils literal notranslate"><span class="pre">Watchdog.stop()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.utils.WatchdogTimeout"><code class="docutils literal notranslate"><span class="pre">WatchdogTimeout</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.affinity_key_function"><code class="docutils literal notranslate"><span class="pre">affinity_key_function()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.affinity_locality_predicate"><code class="docutils literal notranslate"><span class="pre">affinity_locality_predicate()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.audit_location_generator"><code class="docutils literal notranslate"><span class="pre">audit_location_generator()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.backward"><code class="docutils literal notranslate"><span class="pre">backward()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.cache_from_env"><code class="docutils literal notranslate"><span class="pre">cache_from_env()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.capture_stdio"><code class="docutils literal notranslate"><span class="pre">capture_stdio()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.closing_if_possible"><code class="docutils literal notranslate"><span class="pre">closing_if_possible()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.compute_eta"><code class="docutils literal notranslate"><span class="pre">compute_eta()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.config_auto_int_value"><code class="docutils literal notranslate"><span class="pre">config_auto_int_value()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.config_fallocate_value"><code class="docutils literal notranslate"><span class="pre">config_fallocate_value()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.config_positive_int_value"><code class="docutils literal notranslate"><span class="pre">config_positive_int_value()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.config_read_prefixed_options"><code class="docutils literal notranslate"><span class="pre">config_read_prefixed_options()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.config_read_reseller_options"><code class="docutils literal notranslate"><span class="pre">config_read_reseller_options()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.config_true_value"><code class="docutils literal notranslate"><span class="pre">config_true_value()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.csv_append"><code class="docutils literal notranslate"><span class="pre">csv_append()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.decode_timestamps"><code class="docutils literal notranslate"><span class="pre">decode_timestamps()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.distribute_evenly"><code class="docutils literal notranslate"><span class="pre">distribute_evenly()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.document_iters_to_http_response_body"><code class="docutils literal notranslate"><span class="pre">document_iters_to_http_response_body()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.document_iters_to_multipart_byteranges"><code class="docutils literal notranslate"><span class="pre">document_iters_to_multipart_byteranges()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.drain_and_close"><code class="docutils literal notranslate"><span class="pre">drain_and_close()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.drop_buffer_cache"><code class="docutils literal notranslate"><span class="pre">drop_buffer_cache()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.drop_privileges"><code class="docutils literal notranslate"><span class="pre">drop_privileges()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.dump_recon_cache"><code class="docutils literal notranslate"><span class="pre">dump_recon_cache()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.encode_timestamps"><code class="docutils literal notranslate"><span class="pre">encode_timestamps()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.eventlet_monkey_patch"><code class="docutils literal notranslate"><span class="pre">eventlet_monkey_patch()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.expand_ipv6"><code class="docutils literal notranslate"><span class="pre">expand_ipv6()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.extract_swift_bytes"><code class="docutils literal notranslate"><span class="pre">extract_swift_bytes()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.fallocate"><code class="docutils literal notranslate"><span class="pre">fallocate()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.fdatasync"><code class="docutils literal notranslate"><span class="pre">fdatasync()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.filter_shard_ranges"><code class="docutils literal notranslate"><span class="pre">filter_shard_ranges()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.find_shard_range"><code class="docutils literal notranslate"><span class="pre">find_shard_range()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.fs_has_free_space"><code class="docutils literal notranslate"><span class="pre">fs_has_free_space()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.fsync"><code class="docutils literal notranslate"><span class="pre">fsync()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.fsync_dir"><code class="docutils literal notranslate"><span class="pre">fsync_dir()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_db_files"><code class="docutils literal notranslate"><span class="pre">get_db_files()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_expirer_container"><code class="docutils literal notranslate"><span class="pre">get_expirer_container()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_hub"><code class="docutils literal notranslate"><span class="pre">get_hub()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_log_line"><code class="docutils literal notranslate"><span class="pre">get_log_line()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_md5_socket"><code class="docutils literal notranslate"><span class="pre">get_md5_socket()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_partition_for_hash"><code class="docutils literal notranslate"><span class="pre">get_partition_for_hash()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_partition_from_path"><code class="docutils literal notranslate"><span class="pre">get_partition_from_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_policy_index"><code class="docutils literal notranslate"><span class="pre">get_policy_index()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_redirect_data"><code class="docutils literal notranslate"><span class="pre">get_redirect_data()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_time_units"><code class="docutils literal notranslate"><span class="pre">get_time_units()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_valid_utf8_str"><code class="docutils literal notranslate"><span class="pre">get_valid_utf8_str()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.get_zero_indexed_base_string"><code class="docutils literal notranslate"><span class="pre">get_zero_indexed_base_string()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.hash_path"><code class="docutils literal notranslate"><span class="pre">hash_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.human_readable"><code class="docutils literal notranslate"><span class="pre">human_readable()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.is_file_older"><code class="docutils literal notranslate"><span class="pre">is_file_older()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.is_valid_ip"><code class="docutils literal notranslate"><span class="pre">is_valid_ip()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.is_valid_ipv4"><code class="docutils literal notranslate"><span class="pre">is_valid_ipv4()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.is_valid_ipv6"><code class="docutils literal notranslate"><span class="pre">is_valid_ipv6()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ismount"><code class="docutils literal notranslate"><span class="pre">ismount()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ismount_raw"><code class="docutils literal notranslate"><span class="pre">ismount_raw()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.item_from_env"><code class="docutils literal notranslate"><span class="pre">item_from_env()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.iter_multipart_mime_documents"><code class="docutils literal notranslate"><span class="pre">iter_multipart_mime_documents()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.last_modified_date_to_timestamp"><code class="docutils literal notranslate"><span class="pre">last_modified_date_to_timestamp()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.link_fd_to_path"><code class="docutils literal notranslate"><span class="pre">link_fd_to_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.list_from_csv"><code class="docutils literal notranslate"><span class="pre">list_from_csv()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.load_libc_function"><code class="docutils literal notranslate"><span class="pre">load_libc_function()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.load_recon_cache"><code class="docutils literal notranslate"><span class="pre">load_recon_cache()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.lock_file"><code class="docutils literal notranslate"><span class="pre">lock_file()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.lock_parent_directory"><code class="docutils literal notranslate"><span class="pre">lock_parent_directory()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.lock_path"><code class="docutils literal notranslate"><span class="pre">lock_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.make_db_file_path"><code class="docutils literal notranslate"><span class="pre">make_db_file_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.makedirs_count"><code class="docutils literal notranslate"><span class="pre">makedirs_count()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.maybe_multipart_byteranges_to_document_iters"><code class="docutils literal notranslate"><span class="pre">maybe_multipart_byteranges_to_document_iters()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.md5"><code class="docutils literal notranslate"><span class="pre">md5()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.md5_hash_for_file"><code class="docutils literal notranslate"><span class="pre">md5_hash_for_file()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.memcached_timing_stats"><code class="docutils literal notranslate"><span class="pre">memcached_timing_stats()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.mime_to_document_iters"><code class="docutils literal notranslate"><span class="pre">mime_to_document_iters()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.mkdirs"><code class="docutils literal notranslate"><span class="pre">mkdirs()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.modify_priority"><code class="docutils literal notranslate"><span class="pre">modify_priority()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.multipart_byteranges_to_document_iters"><code class="docutils literal notranslate"><span class="pre">multipart_byteranges_to_document_iters()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.node_to_string"><code class="docutils literal notranslate"><span class="pre">node_to_string()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.non_negative_float"><code class="docutils literal notranslate"><span class="pre">non_negative_float()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.non_negative_int"><code class="docutils literal notranslate"><span class="pre">non_negative_int()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.normalize_delete_at_timestamp"><code class="docutils literal notranslate"><span class="pre">normalize_delete_at_timestamp()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.normalize_timestamp"><code class="docutils literal notranslate"><span class="pre">normalize_timestamp()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.override_bytes_from_content_type"><code class="docutils literal notranslate"><span class="pre">override_bytes_from_content_type()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.pairs"><code class="docutils literal notranslate"><span class="pre">pairs()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.parse_content_disposition"><code class="docutils literal notranslate"><span class="pre">parse_content_disposition()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.parse_content_range"><code class="docutils literal notranslate"><span class="pre">parse_content_range()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.parse_content_type"><code class="docutils literal notranslate"><span class="pre">parse_content_type()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.parse_db_filename"><code class="docutils literal notranslate"><span class="pre">parse_db_filename()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.parse_mime_headers"><code class="docutils literal notranslate"><span class="pre">parse_mime_headers()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.parse_options"><code class="docutils literal notranslate"><span class="pre">parse_options()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.parse_override_options"><code class="docutils literal notranslate"><span class="pre">parse_override_options()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.parse_prefixed_conf"><code class="docutils literal notranslate"><span class="pre">parse_prefixed_conf()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.parse_socket_string"><code class="docutils literal notranslate"><span class="pre">parse_socket_string()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.private"><code class="docutils literal notranslate"><span class="pre">private()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.public"><code class="docutils literal notranslate"><span class="pre">public()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.punch_hole"><code class="docutils literal notranslate"><span class="pre">punch_hole()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.put_recon_cache_entry"><code class="docutils literal notranslate"><span class="pre">put_recon_cache_entry()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.quorum_size"><code class="docutils literal notranslate"><span class="pre">quorum_size()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.quote"><code class="docutils literal notranslate"><span class="pre">quote()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.random"><code class="docutils literal notranslate"><span class="pre">random()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.ratelimit_sleep"><code class="docutils literal notranslate"><span class="pre">ratelimit_sleep()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.readconf"><code class="docutils literal notranslate"><span class="pre">readconf()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.reiterate"><code class="docutils literal notranslate"><span class="pre">reiterate()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.remove_directory"><code class="docutils literal notranslate"><span class="pre">remove_directory()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.remove_file"><code class="docutils literal notranslate"><span class="pre">remove_file()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.renamer"><code class="docutils literal notranslate"><span class="pre">renamer()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.replace_partition_in_path"><code class="docutils literal notranslate"><span class="pre">replace_partition_in_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.replication"><code class="docutils literal notranslate"><span class="pre">replication()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.round_robin_iter"><code class="docutils literal notranslate"><span class="pre">round_robin_iter()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.rsync_ip"><code class="docutils literal notranslate"><span class="pre">rsync_ip()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.rsync_module_interpolation"><code class="docutils literal notranslate"><span class="pre">rsync_module_interpolation()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.search_tree"><code class="docutils literal notranslate"><span class="pre">search_tree()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.select_ip_port"><code class="docutils literal notranslate"><span class="pre">select_ip_port()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.set_swift_dir"><code class="docutils literal notranslate"><span class="pre">set_swift_dir()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.sockaddr_alg"><code class="docutils literal notranslate"><span class="pre">sockaddr_alg</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.split_path"><code class="docutils literal notranslate"><span class="pre">split_path()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.storage_directory"><code class="docutils literal notranslate"><span class="pre">storage_directory()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.streq_const_time"><code class="docutils literal notranslate"><span class="pre">streq_const_time()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.strict_b64decode"><code class="docutils literal notranslate"><span class="pre">strict_b64decode()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.systemd_notify"><code class="docutils literal notranslate"><span class="pre">systemd_notify()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.timing_stats"><code class="docutils literal notranslate"><span class="pre">timing_stats()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.unlink_older_than"><code class="docutils literal notranslate"><span class="pre">unlink_older_than()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.unlink_paths_older_than"><code class="docutils literal notranslate"><span class="pre">unlink_paths_older_than()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.validate_device_partition"><code class="docutils literal notranslate"><span class="pre">validate_device_partition()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.validate_sync_to"><code class="docutils literal notranslate"><span class="pre">validate_sync_to()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.whataremyips"><code class="docutils literal notranslate"><span class="pre">whataremyips()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.write_file"><code class="docutils literal notranslate"><span class="pre">write_file()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.utils.write_pickle"><code class="docutils literal notranslate"><span class="pre">write_pickle()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#wsgi">WSGI</a><ul>
<li><a class="reference internal" href="#swift.common.wsgi.ConfigDirLoader"><code class="docutils literal notranslate"><span class="pre">ConfigDirLoader</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.ConfigFileError"><code class="docutils literal notranslate"><span class="pre">ConfigFileError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.ConfigFilePortError"><code class="docutils literal notranslate"><span class="pre">ConfigFilePortError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.ConfigString"><code class="docutils literal notranslate"><span class="pre">ConfigString</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.NamedConfigLoader"><code class="docutils literal notranslate"><span class="pre">NamedConfigLoader</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.PipelineWrapper"><code class="docutils literal notranslate"><span class="pre">PipelineWrapper</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.wsgi.PipelineWrapper.create_filter"><code class="docutils literal notranslate"><span class="pre">PipelineWrapper.create_filter()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.PipelineWrapper.index"><code class="docutils literal notranslate"><span class="pre">PipelineWrapper.index()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.PipelineWrapper.insert_filter"><code class="docutils literal notranslate"><span class="pre">PipelineWrapper.insert_filter()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.PipelineWrapper.startswith"><code class="docutils literal notranslate"><span class="pre">PipelineWrapper.startswith()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.wsgi.RestrictedGreenPool"><code class="docutils literal notranslate"><span class="pre">RestrictedGreenPool</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.wsgi.RestrictedGreenPool.spawn_n"><code class="docutils literal notranslate"><span class="pre">RestrictedGreenPool.spawn_n()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy"><code class="docutils literal notranslate"><span class="pre">ServersPerPortStrategy</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy.iter_sockets"><code class="docutils literal notranslate"><span class="pre">ServersPerPortStrategy.iter_sockets()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy.log_sock_exit"><code class="docutils literal notranslate"><span class="pre">ServersPerPortStrategy.log_sock_exit()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy.loop_timeout"><code class="docutils literal notranslate"><span class="pre">ServersPerPortStrategy.loop_timeout()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy.new_worker_socks"><code class="docutils literal notranslate"><span class="pre">ServersPerPortStrategy.new_worker_socks()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy.no_fork_sock"><code class="docutils literal notranslate"><span class="pre">ServersPerPortStrategy.no_fork_sock()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy.register_worker_exit"><code class="docutils literal notranslate"><span class="pre">ServersPerPortStrategy.register_worker_exit()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.ServersPerPortStrategy.register_worker_start"><code class="docutils literal notranslate"><span class="pre">ServersPerPortStrategy.register_worker_start()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.wsgi.StrategyBase"><code class="docutils literal notranslate"><span class="pre">StrategyBase</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.wsgi.StrategyBase.post_fork_hook"><code class="docutils literal notranslate"><span class="pre">StrategyBase.post_fork_hook()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.StrategyBase.set_close_on_exec_on_listen_sockets"><code class="docutils literal notranslate"><span class="pre">StrategyBase.set_close_on_exec_on_listen_sockets()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.StrategyBase.shutdown_sockets"><code class="docutils literal notranslate"><span class="pre">StrategyBase.shutdown_sockets()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.StrategyBase.signal_ready"><code class="docutils literal notranslate"><span class="pre">StrategyBase.signal_ready()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.wsgi.WSGIContext"><code class="docutils literal notranslate"><span class="pre">WSGIContext</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.WorkersStrategy"><code class="docutils literal notranslate"><span class="pre">WorkersStrategy</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.wsgi.WorkersStrategy.iter_sockets"><code class="docutils literal notranslate"><span class="pre">WorkersStrategy.iter_sockets()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.WorkersStrategy.log_sock_exit"><code class="docutils literal notranslate"><span class="pre">WorkersStrategy.log_sock_exit()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.WorkersStrategy.loop_timeout"><code class="docutils literal notranslate"><span class="pre">WorkersStrategy.loop_timeout()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.WorkersStrategy.new_worker_socks"><code class="docutils literal notranslate"><span class="pre">WorkersStrategy.new_worker_socks()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.WorkersStrategy.no_fork_sock"><code class="docutils literal notranslate"><span class="pre">WorkersStrategy.no_fork_sock()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.WorkersStrategy.register_worker_exit"><code class="docutils literal notranslate"><span class="pre">WorkersStrategy.register_worker_exit()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.WorkersStrategy.register_worker_start"><code class="docutils literal notranslate"><span class="pre">WorkersStrategy.register_worker_start()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.wsgi.get_socket"><code class="docutils literal notranslate"><span class="pre">get_socket()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.init_request_processor"><code class="docutils literal notranslate"><span class="pre">init_request_processor()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.load_app_config"><code class="docutils literal notranslate"><span class="pre">load_app_config()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.loadapp"><code class="docutils literal notranslate"><span class="pre">loadapp()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.make_env"><code class="docutils literal notranslate"><span class="pre">make_env()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.make_pre_authed_env"><code class="docutils literal notranslate"><span class="pre">make_pre_authed_env()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.make_pre_authed_request"><code class="docutils literal notranslate"><span class="pre">make_pre_authed_request()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.make_subrequest"><code class="docutils literal notranslate"><span class="pre">make_subrequest()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.run_wsgi"><code class="docutils literal notranslate"><span class="pre">run_wsgi()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.wsgi.wrap_conf_type"><code class="docutils literal notranslate"><span class="pre">wrap_conf_type()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.common.storage_policy">Storage Policy</a><ul>
<li><a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy"><code class="docutils literal notranslate"><span class="pre">BaseStoragePolicy</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy.add_name"><code class="docutils literal notranslate"><span class="pre">BaseStoragePolicy.add_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy.change_primary_name"><code class="docutils literal notranslate"><span class="pre">BaseStoragePolicy.change_primary_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy.get_diskfile_manager"><code class="docutils literal notranslate"><span class="pre">BaseStoragePolicy.get_diskfile_manager()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy.get_info"><code class="docutils literal notranslate"><span class="pre">BaseStoragePolicy.get_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy.load_ring"><code class="docutils literal notranslate"><span class="pre">BaseStoragePolicy.load_ring()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy.quorum"><code class="docutils literal notranslate"><span class="pre">BaseStoragePolicy.quorum</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy.register"><code class="docutils literal notranslate"><span class="pre">BaseStoragePolicy.register()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy.remove_name"><code class="docutils literal notranslate"><span class="pre">BaseStoragePolicy.remove_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.BaseStoragePolicy.validate_ring_data"><code class="docutils literal notranslate"><span class="pre">BaseStoragePolicy.validate_ring_data()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.storage_policy.ECStoragePolicy"><code class="docutils literal notranslate"><span class="pre">ECStoragePolicy</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.storage_policy.ECStoragePolicy.ec_scheme_description"><code class="docutils literal notranslate"><span class="pre">ECStoragePolicy.ec_scheme_description</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.ECStoragePolicy.fragment_size"><code class="docutils literal notranslate"><span class="pre">ECStoragePolicy.fragment_size</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.ECStoragePolicy.get_backend_index"><code class="docutils literal notranslate"><span class="pre">ECStoragePolicy.get_backend_index()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.ECStoragePolicy.get_info"><code class="docutils literal notranslate"><span class="pre">ECStoragePolicy.get_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.ECStoragePolicy.quorum"><code class="docutils literal notranslate"><span class="pre">ECStoragePolicy.quorum</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.ECStoragePolicy.validate_ring_data"><code class="docutils literal notranslate"><span class="pre">ECStoragePolicy.validate_ring_data()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.storage_policy.PolicyError"><code class="docutils literal notranslate"><span class="pre">PolicyError</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicy"><code class="docutils literal notranslate"><span class="pre">StoragePolicy</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicy.quorum"><code class="docutils literal notranslate"><span class="pre">StoragePolicy.quorum</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection"><code class="docutils literal notranslate"><span class="pre">StoragePolicyCollection</span></code></a><ul>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection.add_policy_alias"><code class="docutils literal notranslate"><span class="pre">StoragePolicyCollection.add_policy_alias()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection.change_policy_primary_name"><code class="docutils literal notranslate"><span class="pre">StoragePolicyCollection.change_policy_primary_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection.get_by_index"><code class="docutils literal notranslate"><span class="pre">StoragePolicyCollection.get_by_index()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection.get_by_name"><code class="docutils literal notranslate"><span class="pre">StoragePolicyCollection.get_by_name()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection.get_object_ring"><code class="docutils literal notranslate"><span class="pre">StoragePolicyCollection.get_object_ring()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection.get_policy_info"><code class="docutils literal notranslate"><span class="pre">StoragePolicyCollection.get_policy_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicyCollection.remove_policy_alias"><code class="docutils literal notranslate"><span class="pre">StoragePolicyCollection.remove_policy_alias()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.common.storage_policy.StoragePolicySingleton"><code class="docutils literal notranslate"><span class="pre">StoragePolicySingleton</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.get_policy_string"><code class="docutils literal notranslate"><span class="pre">get_policy_string()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.parse_storage_policies"><code class="docutils literal notranslate"><span class="pre">parse_storage_policies()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.reload_storage_policies"><code class="docutils literal notranslate"><span class="pre">reload_storage_policies()</span></code></a></li>
<li><a class="reference internal" href="#swift.common.storage_policy.split_policy_string"><code class="docutils literal notranslate"><span class="pre">split_policy_string()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
  </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="https://openstack.org/projects/">Projects</a></li>
          <li><a href="https://www.openstack.org/software/security/">OpenStack Security</a></li>
          <li><a href="https://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="https://openstack.org/blog/">Blog</a></li>g
          <li><a href="https://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="https://openstack.org/community/">User Groups</a></li>
          <li><a href="https://openstack.org/community/events/">Events</a></li>
          <li><a href="https://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="https://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="https://docs.openstack.org/contributors">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="https://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="https://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="https://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="https://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="https://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="https://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="https://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-3.2.1.min.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.min.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- standard sphinx include libraries, which allow search highlighting -->
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="_static/searchtools.js"></script>
<script type="text/javascript" src="_static/language_data.js"></script>

<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.1.0.dev10162',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      LINK_SUFFIX: '.html',
      SOURCELINK_SUFFIX: '.txt',
      HAS_SOURCE:  true
    };
</script>

<!-- Javascript for page -->
<script language="JavaScript">
  /* Build a description of this page including SHA, source location on git
   * repo, build time and the project's launchpad bug tag. Set the HREF of the
   * bug buttons
   */
    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
    /* "giturl" is the URL of the source file on Git and is auto-generated by
     * openstackdocstheme.
     *
     * "pagename" is a standard sphinx parameter containing the name of
     * the source file, without extension.
     */

    var sourceFile = "misc" + ".rst";
    gitURL = "Source: https://opendev.org/openstack/swift/src/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: c25d961319e59efe02c05374924ba82b873992e1";
    var repositoryName = "openstack/swift";
    var bugProject = "swift";
    var bugTitle = "Misc in Swift";
    var fieldTags = "";
    var useStoryboard = "";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.1.0.dev10162 on 2022-04-19 15:26:11";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags, repositoryName, useStoryboard);
    var currentSourceFile = "misc";
    var pdfFileName = "doc-swift.pdf";
    pdfLink(currentSourceFile, pdfFileName);
</script>


  </body>
</html>