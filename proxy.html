
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Proxy &#8212; Swift 0.1.0.dev10162 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/basic.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="canonical" href="/openstack-swift/proxy.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Account" href="account.html" />
    <link rel="prev" title="Partitioned Consistent Hash Ring" href="ring.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.min.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">

<!-- Search CSS -->
<link href="_static/css/search.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/pygments.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


  </head><body>

<!-- SOURCE_FILE: https://opendev.org/openstack/swift/src/doc/source/proxy.rst -->

<script>
    (function (window, document) {
        var loader = function () {
            var script = document.createElement("script"), tag = document.getElementsByTagName("script")[0];
            script.src = "https://search.openstack.org/widget/embed.min.js?t="+Date.now();
            tag.parentNode.insertBefore(script, tag);
        };
        window.addEventListener ? window.addEventListener("load", loader, false) : window.attachEvent("onload", loader);
    })(window, document);
</script>

<nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="https://www.openstack.org/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
    <div class="openstack-search-bar" data-baseUrl="search.openstack.org" data-context="docs-openstack"></div>
</div>
      <ul class="nav navbar-nav navbar-main show">
        <li class="search-container-mobile">
    <div class="openstack-search-bar" data-baseUrl="search.openstack.org" data-context="docs-openstack"></div>
</li>
        <li> <!--Software -->
          <a href="https://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/openstack-components">OpenStack Components</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/sdks">SDKs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/deployment-tools">Deployment Tools</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/assets/software/projectmap/openstack-map.pdf" target="_blank">OpenStack Map</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
          </ul>
        </li>
        <li> <!-- Use Cases -->
          <a href="https://www.openstack.org/use-cases/" class="drop" id="dropdownMenuUsers">Use Cases <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/">Users in Production</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/bare-metal/">Ironic Bare Metal</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/edge-computing/">Edge Computing</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/telecoms-and-nfv/">Telecom & NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/science/">Science and HPC</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/containers/">Containers</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/use-cases/enterprise/">Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li> <!-- Events -->
          <a href="https://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">Open Infrastructure Summits</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/ptg/">Project Teams Gathering</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/opendev-2020/">OpenDev</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/community-events/">Community Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/events/openstackdays">OpenStack & OpenInfra Days</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
          </ul>
        </li>
        <li><!-- Community -->
          <a href="https://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/tech-committee">OpenStack Technical Committee</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/coa/">Get Certified (COA)</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketing/">Marketing Resources</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/news/">Community News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/supporting-organizations/">OpenInfra Foundation Supporting Organizations</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev">Open Infrastructure Foundation (OpenInfra Foundation)</a></li>
          </ul>
        </li>
        <li><!-- Marketplace -->
          <a href="https://www.openstack.orgmarketplace/" class="drop" id="dropdownMenuLearn">Marketplace <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/distros/">Distros & Appliances</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/public-clouds/">Public Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/hosted-private-clouds/">Hosted Private Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/remotely-managed-private-clouds/">Remotely Managed Private Clouds</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/consulting/">Consulting & Integrators</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/drivers/">Drivers</a></li>
          </ul>
        </li>
        <li><!-- Blog -->
          <a href="https://www.openstack.org/blog/">Blog</a>
        </li>
        <li><!-- Docs -->
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
        <li> <!-- Join -->
            <li class="join-nav-section">
              <a href="https://openinfra.dev/join/" id="dropdownMenuJoin">Join <i class="fa fa-caret-down"></i></a>
              <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuJoin" style="display: none;">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev/join/">Sign up for Foundation Membership</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev/join/">Sponsor the Foundation</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="https://openinfra.dev">More about the Foundation</a></li>
              </ul>
            </li>
            <li>
              <a href="https://www.openstack.org/Security/login/?BackURL=/home/" class="sign-in-btn">Log In</a>
            </li>
        </li>
      </ul>
    </div>
  </div>
  <!-- /.container -->
</nav>

    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row docs-title">
  <div class="col-lg-8">
      <h1>Proxy</h1>
    
  </div>
  <div class="docs-actions">
    
    <a href="ring.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Partitioned Consistent Hash Ring"></i></a>
    
    
    <a href="account.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Account"></i></a>
    
    <a id="pdfLink1" href="" target="_blank" title="Download the manuals as PDF"><i class="fa fa-file-pdf-o" data-toggle="tooltip" data-placement="top" title="Download PDF"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
    
  </div>
</div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-body" role="main">

  <section id="proxy">
<span id="id1"></span><h1>Proxy<a class="headerlink" href="#proxy" title="Permalink to this heading">¶</a></h1>
<section id="proxy-controllers">
<span id="id2"></span><h2>Proxy Controllers<a class="headerlink" href="#proxy-controllers" title="Permalink to this heading">¶</a></h2>
<section id="module-swift.proxy.controllers.base">
<span id="base"></span><h3>Base<a class="headerlink" href="#module-swift.proxy.controllers.base" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.ByteCountEnforcer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">ByteCountEnforcer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_like</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbytes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.ByteCountEnforcer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Enforces that successive calls to file_like.read() give at least
&lt;nbytes&gt; bytes before exhaustion.</p>
<p>If file_like fails to do so, ShortReadError is raised.</p>
<p>If more than &lt;nbytes&gt; bytes are read, we don’t care.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.ByteCountEnforcer.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">amt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.ByteCountEnforcer.read" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">Controller</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base WSGI controller class for the proxy</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.GET">
<span class="sig-name descname"><span class="pre">GET</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.GET" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP GET requests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>req</strong> – The client request</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the response to the client</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.GETorHEAD_base">
<span class="sig-name descname"><span class="pre">GETorHEAD_base</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concurrency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.GETorHEAD_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Base handler for HTTP GET or HEAD requests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – swob.Request object</p></li>
<li><p><strong>server_type</strong> – server type used in logging</p></li>
<li><p><strong>node_iter</strong> – an iterator to obtain nodes from</p></li>
<li><p><strong>partition</strong> – partition</p></li>
<li><p><strong>path</strong> – path for the request</p></li>
<li><p><strong>concurrency</strong> – number of requests to run concurrently</p></li>
<li><p><strong>policy</strong> – the policy instance, or None if Account or Container</p></li>
<li><p><strong>client_chunk_size</strong> – chunk size for response body iterator</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>swob.Response object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.HEAD">
<span class="sig-name descname"><span class="pre">HEAD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.HEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP HEAD requests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>req</strong> – The client request</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the response to the client</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.OPTIONS">
<span class="sig-name descname"><span class="pre">OPTIONS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.OPTIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>Base handler for OPTIONS requests</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>req</strong> – swob.Request object</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>swob.Response object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.account_info">
<span class="sig-name descname"><span class="pre">account_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.account_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get account information, and also verify that the account exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – native str name of the account to get the info for</p></li>
<li><p><strong>req</strong> – caller’s HTTP request context object</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple of (account partition, account nodes, container_count)
or (None, None, None) if it does not exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.allowed_methods">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">allowed_methods</span></span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.allowed_methods" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.autocreate_account">
<span class="sig-name descname"><span class="pre">autocreate_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.autocreate_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Autocreate an account</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – request leading to this autocreate</p></li>
<li><p><strong>account</strong> – the unquoted account name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.best_response">
<span class="sig-name descname"><span class="pre">best_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statuses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reasons</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bodies</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">etag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overrides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quorum_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.best_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of responses from several servers, choose the best to
return to the API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – swob.Request object</p></li>
<li><p><strong>statuses</strong> – list of statuses returned</p></li>
<li><p><strong>reasons</strong> – list of reasons for each status</p></li>
<li><p><strong>bodies</strong> – bodies of each response</p></li>
<li><p><strong>server_type</strong> – type of server the responses came from</p></li>
<li><p><strong>etag</strong> – etag</p></li>
<li><p><strong>headers</strong> – headers of each response</p></li>
<li><p><strong>overrides</strong> – overrides to apply when lacking quorum</p></li>
<li><p><strong>quorum_size</strong> – quorum size to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>swob.Response object with the correct status, body, etc. set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.container_info">
<span class="sig-name descname"><span class="pre">container_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.container_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get container information and thusly verify container existence.
This will also verify account existence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – native-str account name for the container</p></li>
<li><p><strong>container</strong> – native-str container name to look up</p></li>
<li><p><strong>req</strong> – caller’s HTTP request context object</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dict containing at least container partition (‘partition’),
container nodes (‘containers’), container read
acl (‘read_acl’), container write acl (‘write_acl’),
and container sync key (‘sync_key’).
Values are set to None if the container does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.generate_request_headers">
<span class="sig-name descname"><span class="pre">generate_request_headers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orig_req</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transfer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.generate_request_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a list of headers to be used in backend requests</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>orig_req</strong> – the original request sent by the client to the proxy</p></li>
<li><p><strong>additional</strong> – additional headers to send to the backend</p></li>
<li><p><strong>transfer</strong> – If True, transfer headers from original client request</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dictionary of headers</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.get_name_length_limit">
<span class="sig-name descname"><span class="pre">get_name_length_limit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.get_name_length_limit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.have_quorum">
<span class="sig-name descname"><span class="pre">have_quorum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statuses</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quorum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.have_quorum" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of statuses from several requests, determine if
a quorum response can already be decided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>statuses</strong> – list of statuses returned</p></li>
<li><p><strong>node_count</strong> – number of nodes being queried (basically ring count)</p></li>
<li><p><strong>quorum</strong> – number of statuses required for quorum</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True or False, depending on if quorum is established</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.is_origin_allowed">
<span class="sig-name descname"><span class="pre">is_origin_allowed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cors_info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.is_origin_allowed" title="Permalink to this definition">¶</a></dt>
<dd><p>Is the given Origin allowed to make requests to this resource</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cors_info</strong> – the resource’s CORS related metadata headers</p></li>
<li><p><strong>origin</strong> – the origin making the request</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True or False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.make_requests">
<span class="sig-name descname"><span class="pre">make_requests</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overrides</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_iterator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.make_requests" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends an HTTP request to multiple nodes and aggregates the results.
It attempts the primary nodes concurrently, then iterates over the
handoff nodes as needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>req</strong> – a request sent by the client</p></li>
<li><p><strong>ring</strong> – the ring used for finding backend servers</p></li>
<li><p><strong>part</strong> – the partition number</p></li>
<li><p><strong>method</strong> – the method to send to the backend</p></li>
<li><p><strong>path</strong> – the path to send to the backend
(full path ends up being  /&lt;$device&gt;/&lt;$part&gt;/&lt;$path&gt;)</p></li>
<li><p><strong>headers</strong> – a list of dicts, where each dict represents one
backend request that should be made.</p></li>
<li><p><strong>query_string</strong> – optional query string to send to the backend</p></li>
<li><p><strong>overrides</strong> – optional return status override map used to override
the returned status of a request.</p></li>
<li><p><strong>node_count</strong> – optional number of nodes to send request to.</p></li>
<li><p><strong>node_iterator</strong> – optional node iterator.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a swob.Response object</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.pass_through_headers">
<span class="sig-name descname"><span class="pre">pass_through_headers</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#swift.proxy.controllers.base.Controller.pass_through_headers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.private_methods">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">private_methods</span></span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.private_methods" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.server_type">
<span class="sig-name descname"><span class="pre">server_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Base'</span></em><a class="headerlink" href="#swift.proxy.controllers.base.Controller.server_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.Controller.transfer_headers">
<span class="sig-name descname"><span class="pre">transfer_headers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_headers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.transfer_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfer legal headers from an original client request to dictionary
that will be used as headers by the backend request</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_headers</strong> – A dictionary of the original client request headers</p></li>
<li><p><strong>dst_headers</strong> – A dictionary of the backend request headers</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.GetOrHeadHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">GetOrHeadHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concurrency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.GetOrHeadHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.GetOrHeadHandler.fast_forward">
<span class="sig-name descname"><span class="pre">fast_forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_bytes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.GetOrHeadHandler.fast_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Will skip num_bytes into the current ranges.</p>
<dl class="field-list simple">
<dt class="field-odd">Params num_bytes<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes that have already been read on
this request. This will change the Range header
so that the next req will start where it left off.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>HTTPRequestedRangeNotSatisfiable</strong> – if begin + num_bytes
&gt; end of range + 1</p></li>
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.RangeAlreadyComplete" title="swift.common.exceptions.RangeAlreadyComplete"><strong>RangeAlreadyComplete</strong></a> – if begin + num_bytes == end of range + 1</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.GetOrHeadHandler.get_working_response">
<span class="sig-name descname"><span class="pre">get_working_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.GetOrHeadHandler.get_working_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.GetOrHeadHandler.is_good_source">
<span class="sig-name descname"><span class="pre">is_good_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.GetOrHeadHandler.is_good_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether or not the request made to the backend found
what it was looking for.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>src</strong> – the response from the backend</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if found, False if not</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.GetOrHeadHandler.last_headers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">last_headers</span></span><a class="headerlink" href="#swift.proxy.controllers.base.GetOrHeadHandler.last_headers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.GetOrHeadHandler.last_status">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">last_status</span></span><a class="headerlink" href="#swift.proxy.controllers.base.GetOrHeadHandler.last_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.GetOrHeadHandler.learn_size_from_content_range">
<span class="sig-name descname"><span class="pre">learn_size_from_content_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.GetOrHeadHandler.learn_size_from_content_range" title="Permalink to this definition">¶</a></dt>
<dd><p>If client_chunk_size is set, makes sure we yield things starting on
chunk boundaries based on the Content-Range header in the response.</p>
<p>Sets our Range header’s first byterange to the value learned from
the Content-Range header in the response; if we were given a
fully-specified range (e.g. “bytes=123-456”), this is a no-op.</p>
<p>If we were given a half-specified range (e.g. “bytes=123-” or
“bytes=-456”), then this changes the Range header to a
semantically-equivalent one <em>and</em> it lets us resume on a proper
boundary instead of just in the middle of a piece somewhere.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.GetOrHeadHandler.pop_range">
<span class="sig-name descname"><span class="pre">pop_range</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.GetOrHeadHandler.pop_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the first byterange from our Range header.</p>
<p>This is used after a byterange has been completely sent to the
client; this way, should we need to resume the download from another
object server, we do not re-fetch byteranges that the client already
has.</p>
<p>If we have no Range header, this is a no-op.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.NodeIter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">NodeIter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.NodeIter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Yields nodes for a ring partition, skipping over error
limited nodes and stopping at the configurable number of nodes. If a
node yielded subsequently gets error limited, an extra node will be
yielded to take its place.</p>
<p>Note that if you’re going to iterate over this concurrently from
multiple greenthreads, you’ll want to use a
swift.common.utils.GreenthreadSafeIterator to serialize access.
Otherwise, you may get ValueErrors from concurrent access. (You also
may not, depending on how logging is configured, the vagaries of
socket IO and eventlet, and the phase of the moon.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – a proxy app</p></li>
<li><p><strong>ring</strong> – ring to get yield nodes from</p></li>
<li><p><strong>partition</strong> – ring partition to yield nodes for</p></li>
<li><p><strong>logger</strong> – a logger instance</p></li>
<li><p><strong>request</strong> – yielded nodes will be annotated with <cite>use_replication</cite>
based on the <cite>request</cite> headers.</p></li>
<li><p><strong>node_iter</strong> – optional iterable of nodes to try. Useful if you
want to filter or reorder the nodes.</p></li>
<li><p><strong>policy</strong> – an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStoragePolicy</span></code>. This should be
None for an account or container ring.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.NodeIter.log_handoffs">
<span class="sig-name descname"><span class="pre">log_handoffs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handoffs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.NodeIter.log_handoffs" title="Permalink to this definition">¶</a></dt>
<dd><p>Log handoff requests if handoff logging is enabled and the
handoff was not expected.</p>
<p>We only log handoffs when we’ve pushed the handoff count further
than we would normally have expected under normal circumstances,
that is (request_node_count - num_primaries), when handoffs goes
higher than that it means one of the primaries must have been
skipped because of error limiting before we consumed all of our
nodes_left.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.NodeIter.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.NodeIter.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.NodeIter.primaries_left">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">primaries_left</span></span><a class="headerlink" href="#swift.proxy.controllers.base.NodeIter.primaries_left" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.NodeIter.set_node_provider">
<span class="sig-name descname"><span class="pre">set_node_provider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.NodeIter.set_node_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Install a callback function that will be used during a call to next()
to get an alternate node instead of returning the next node from the
iterator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>callback</strong> – A no argument function that should return a node dict
or None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.bytes_to_skip">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">bytes_to_skip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">range_start</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.bytes_to_skip" title="Permalink to this definition">¶</a></dt>
<dd><p>Assume an object is composed of N records, where the first N-1 are all
the same size and the last is at most that large, but may be smaller.</p>
<p>When a range request is made, it might start with a partial record. This
must be discarded, lest the consumer get bad data. This is particularly
true of suffix-byte-range requests, e.g. “Range: bytes=-12345” where the
size of the object is unknown at the time the request is made.</p>
<p>This function computes the number of bytes that must be discarded to
ensure only whole records are yielded. Erasure-code decoding needs this.</p>
<p>This function could have been inlined, but it took enough tries to get
right that some targeted unit tests were desirable, hence its extraction.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.clear_info_cache">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">clear_info_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.clear_info_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cached info in both memcache and env</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – the application object</p></li>
<li><p><strong>env</strong> – the WSGI environment</p></li>
<li><p><strong>account</strong> – the account name</p></li>
<li><p><strong>container</strong> – the container name if clearing info for containers, or
None</p></li>
<li><p><strong>shard</strong> – the sharding state if clearing info for container shard
ranges, or None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.close_swift_conn">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">close_swift_conn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.close_swift_conn" title="Permalink to this definition">¶</a></dt>
<dd><p>Force close the http connection to the backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>src</strong> – the response from the backend</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.cors_validation">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">cors_validation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.cors_validation" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to check if the request is a CORS request and if so, if it’s
valid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> – function to check</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.delay_denial">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">delay_denial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.delay_denial" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to declare which methods should have any swift.authorize call
delayed. This is so the method can load the Request object up with
additional information that may be needed by the authorization system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> – function for which authorization will be delayed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.get_account_info">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">get_account_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swift_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.get_account_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the info structure for an account, based on env and app.
This is useful to middlewares.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This call bypasses auth. Success does not imply that the request has
authorization to the account.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – when path doesn’t contain an account</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.get_cache_key">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">get_cache_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.get_cache_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the keys for both memcache and env[‘swift.infocache’] (cache_key)
where info about accounts, containers, and objects is cached</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account</strong> – The name of the account</p></li>
<li><p><strong>container</strong> – The name of the container (or None if account)</p></li>
<li><p><strong>obj</strong> – The name of the object (or None if account or container)</p></li>
<li><p><strong>shard</strong> – Sharding state for the container query; typically ‘updating’
or ‘listing’ (Requires account and container; cannot use
with obj)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a (native) string cache_key</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.get_container_info">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">get_container_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swift_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.get_container_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the info structure for a container, based on env and app.
This is useful to middlewares.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This call bypasses auth. Success does not imply that the request has
authorization to the container.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.get_info">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">get_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swift_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.get_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get info about accounts or containers</p>
<dl class="simple">
<dt>Note: This call bypasses auth. Success does not imply that the</dt><dd><p>request has authorization to the info.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – the application object</p></li>
<li><p><strong>env</strong> – the environment used by the current request</p></li>
<li><p><strong>account</strong> – The unquoted name of the account</p></li>
<li><p><strong>container</strong> – The unquoted name of the container (or None if account)</p></li>
<li><p><strong>swift_source</strong> – swift source logged for any subrequests made while
retrieving the account or container info</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>information about the specified entity in a dictionary. See
get_account_info and get_container_info for details on what’s in the
dictionary.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.get_object_info">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">get_object_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swift_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.get_object_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the info structure for an object, based on env and app.
This is useful to middlewares.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This call bypasses auth. Success does not imply that the request has
authorization to the object.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.headers_from_container_info">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">headers_from_container_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.headers_from_container_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a HeaderKeyDict from a container info dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>info</strong> – a dict of container metadata</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a HeaderKeyDict or None if info is None or any required headers
could not be constructed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.headers_to_account_info">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">headers_to_account_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_int</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.headers_to_account_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a cacheable dict of account info based on response headers.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.headers_to_container_info">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">headers_to_container_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_int</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.headers_to_container_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a cacheable dict of container info based on response headers.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.headers_to_object_info">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">headers_to_object_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_int</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.headers_to_object_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a cacheable dict of object info based on response headers.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.record_cache_op_metrics">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">record_cache_op_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.record_cache_op_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Record a single cache operation into its corresponding metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>logger</strong> – the metrics logger</p></li>
<li><p><strong>op_type</strong> – the name of the operation type, includes ‘shard_listing’,
‘shard_updating’, and etc.</p></li>
<li><p><strong>cache_state</strong> – the state of this cache operation. When it’s
‘infocache_hit’ or memcache ‘hit’, expect it succeeded and ‘resp’
will be None; for all other cases like memcache ‘miss’ or ‘skip’
which will make to backend, expect a valid ‘resp’.</p></li>
<li><p><strong>resp</strong> – the response from backend for all cases except cache hits.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.set_info_cache">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">set_info_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.set_info_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Cache info in both memcache and env.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – the application object</p></li>
<li><p><strong>account</strong> – the unquoted account name</p></li>
<li><p><strong>container</strong> – the unquoted container name or None</p></li>
<li><p><strong>resp</strong> – the response received or None if info cache should be cleared</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the info that was placed into the cache, or None if the
request status was not in (404, 410, 2xx).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.set_object_info_cache">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">set_object_info_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.set_object_info_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Cache object info in the WSGI environment, but not in memcache. Caching
in memcache would lead to cache pressure and mass evictions due to the
large number of objects in a typical Swift cluster. This is a
per-request cache only.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – the application object</p></li>
<li><p><strong>env</strong> – the environment used by the current request</p></li>
<li><p><strong>account</strong> – the unquoted account name</p></li>
<li><p><strong>container</strong> – the unquoted container name</p></li>
<li><p><strong>obj</strong> – the unquoted object name</p></li>
<li><p><strong>resp</strong> – a GET or HEAD response received from an object server, or
None if info cache should be cleared</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the object info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.source_key">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">source_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.source_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the timestamp of the swift http response as a floating
point value.  Used as a sort key.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>resp</strong> – bufferedhttp response object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.base.update_headers">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.base.</span></span><span class="sig-name descname"><span class="pre">update_headers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">response</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.update_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to update headers in the response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>response</strong> – swob.Response object</p></li>
<li><p><strong>headers</strong> – dictionary headers</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-swift.proxy.controllers.account">
<span id="account"></span><h3>Account<a class="headerlink" href="#module-swift.proxy.controllers.account" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.account.AccountController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.account.</span></span><span class="sig-name descname"><span class="pre">AccountController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.base.Controller" title="swift.proxy.controllers.base.Controller"><code class="xref py py-class docutils literal notranslate"><span class="pre">Controller</span></code></a></p>
<p>WSGI controller for account requests</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.account.AccountController.DELETE">
<span class="sig-name descname"><span class="pre">DELETE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.DELETE" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP DELETE request handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.account.AccountController.GETorHEAD">
<span class="sig-name descname"><span class="pre">GETorHEAD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.GETorHEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP GET/HEAD requests.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.account.AccountController.POST">
<span class="sig-name descname"><span class="pre">POST</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.POST" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP POST request handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.account.AccountController.PUT">
<span class="sig-name descname"><span class="pre">PUT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.PUT" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP PUT request handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.account.AccountController.add_acls_from_sys_metadata">
<span class="sig-name descname"><span class="pre">add_acls_from_sys_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.add_acls_from_sys_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.proxy.controllers.account.AccountController.server_type">
<span class="sig-name descname"><span class="pre">server_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Account'</span></em><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.server_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-swift.proxy.controllers.container">
<span id="container"></span><h3>Container<a class="headerlink" href="#module-swift.proxy.controllers.container" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.container.</span></span><span class="sig-name descname"><span class="pre">ContainerController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.base.Controller" title="swift.proxy.controllers.base.Controller"><code class="xref py py-class docutils literal notranslate"><span class="pre">Controller</span></code></a></p>
<p>WSGI controller for container requests</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController.DELETE">
<span class="sig-name descname"><span class="pre">DELETE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.DELETE" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP DELETE request handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController.GET">
<span class="sig-name descname"><span class="pre">GET</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.GET" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP GET requests.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController.GETorHEAD">
<span class="sig-name descname"><span class="pre">GETorHEAD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.GETorHEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP GET/HEAD requests.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController.HEAD">
<span class="sig-name descname"><span class="pre">HEAD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.HEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP HEAD requests.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController.POST">
<span class="sig-name descname"><span class="pre">POST</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.POST" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP POST request handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController.PUT">
<span class="sig-name descname"><span class="pre">PUT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.PUT" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP PUT request handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController.UPDATE">
<span class="sig-name descname"><span class="pre">UPDATE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.UPDATE" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP UPDATE request handler.</p>
<p>Method to perform bulk operations on container DBs,
similar to a merge_items REPLICATE request.</p>
<p>Not client facing; internal clients or middlewares must include
<code class="docutils literal notranslate"><span class="pre">X-Backend-Allow-Private-Methods:</span> <span class="pre">true</span></code> header to access.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController.clean_acls">
<span class="sig-name descname"><span class="pre">clean_acls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.clean_acls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController.pass_through_headers">
<span class="sig-name descname"><span class="pre">pass_through_headers</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['x-container-read',</span> <span class="pre">'x-container-write',</span> <span class="pre">'x-container-sync-key',</span> <span class="pre">'x-container-sync-to',</span> <span class="pre">'x-versions-location']</span></em><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.pass_through_headers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.proxy.controllers.container.ContainerController.server_type">
<span class="sig-name descname"><span class="pre">server_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Container'</span></em><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.server_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-swift.proxy.controllers.obj">
<span id="object"></span><h3>Object<a class="headerlink" href="#module-swift.proxy.controllers.obj" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.BaseObjectController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">BaseObjectController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.base.Controller" title="swift.proxy.controllers.base.Controller"><code class="xref py py-class docutils literal notranslate"><span class="pre">Controller</span></code></a></p>
<p>Base WSGI controller for object requests.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.BaseObjectController.DELETE">
<span class="sig-name descname"><span class="pre">DELETE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.DELETE" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP DELETE request handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.BaseObjectController.GET">
<span class="sig-name descname"><span class="pre">GET</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.GET" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP GET requests.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.BaseObjectController.GETorHEAD">
<span class="sig-name descname"><span class="pre">GETorHEAD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.GETorHEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle HTTP GET or HEAD requests.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.BaseObjectController.HEAD">
<span class="sig-name descname"><span class="pre">HEAD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.HEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP HEAD requests.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.BaseObjectController.POST">
<span class="sig-name descname"><span class="pre">POST</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.POST" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP POST request handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.BaseObjectController.PUT">
<span class="sig-name descname"><span class="pre">PUT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.PUT" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP PUT request handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.BaseObjectController.iter_nodes_local_first">
<span class="sig-name descname"><span class="pre">iter_nodes_local_first</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_handoffs_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.iter_nodes_local_first" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields nodes for a ring partition.</p>
<p>If the ‘write_affinity’ setting is non-empty, then this will yield N
local nodes (as defined by the write_affinity setting) first, then the
rest of the nodes as normal. It is a re-ordering of the nodes such
that the local ones come first; no node is omitted. The effect is
that the request will be serviced by local object servers first, but
nonlocal ones will be employed if not enough local ones are available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> – ring to get nodes from</p></li>
<li><p><strong>partition</strong> – ring partition to yield nodes for</p></li>
<li><p><strong>request</strong> – nodes will be annotated with <cite>use_replication</cite> based on
the <cite>request</cite> headers</p></li>
<li><p><strong>policy</strong> – optional, an instance of
<a class="reference internal" href="misc.html#swift.common.storage_policy.BaseStoragePolicy" title="swift.common.storage_policy.BaseStoragePolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStoragePolicy</span></code></a></p></li>
<li><p><strong>local_handoffs_first</strong> – optional, if True prefer primaries and
local handoff nodes first before looking elsewhere.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.BaseObjectController.server_type">
<span class="sig-name descname"><span class="pre">server_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'Object'</span></em><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.server_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECAppIter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">ECAppIter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">internal_parts_iters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">range_specs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fa_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>WSGI iterable that decodes EC fragment archives (or portions thereof)
into the original object (or portions thereof).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – object’s path, sans v1 (e.g. /a/c/o)</p></li>
<li><p><strong>policy</strong> – storage policy for this object</p></li>
<li><p><strong>internal_parts_iters</strong> – list of the response-document-parts
iterators for the backend GET responses. For an M+K erasure code,
the caller must supply M such iterables.</p></li>
<li><p><strong>range_specs</strong> – list of dictionaries describing the ranges requested
by the client. Each dictionary contains the start and end of the
client’s requested byte range as well as the start and end of the EC
segments containing that byte range.</p></li>
<li><p><strong>fa_length</strong> – length of the fragment archive, in bytes, if the
response is a 200. If it’s a 206, then this is ignored.</p></li>
<li><p><strong>obj_length</strong> – length of the object, in bytes. Learned from the
headers in the GET response from the object server.</p></li>
<li><p><strong>logger</strong> – a logger</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECAppIter.app_iter_range">
<span class="sig-name descname"><span class="pre">app_iter_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter.app_iter_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECAppIter.app_iter_ranges">
<span class="sig-name descname"><span class="pre">app_iter_ranges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ranges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter.app_iter_ranges" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECAppIter.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECAppIter.kickoff">
<span class="sig-name descname"><span class="pre">kickoff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter.kickoff" title="Permalink to this definition">¶</a></dt>
<dd><p>Start pulling data from the backends so that we can learn things like
the real Content-Type that might only be in the multipart/byteranges
response body. Update our response accordingly.</p>
<p>Also, this is the first point at which we can learn the MIME
boundary that our response has in the headers. We grab that so we
can also use it in the body.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="misc.html#swift.common.swob.HTTPException" title="swift.common.swob.HTTPException"><strong>HTTPException</strong></a> – on error</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECAppIter.next">
<span class="sig-name descname"><span class="pre">next</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECFragGetter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">ECFragGetter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header_provider</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger_thread_locals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECFragGetter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECFragGetter.fast_forward">
<span class="sig-name descname"><span class="pre">fast_forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_bytes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECFragGetter.fast_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Will skip num_bytes into the current ranges.</p>
<dl class="field-list simple">
<dt class="field-odd">Params num_bytes<span class="colon">:</span></dt>
<dd class="field-odd"><p>the number of bytes that have already been read on
this request. This will change the Range header
so that the next req will start where it left off.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>HTTPRequestedRangeNotSatisfiable</strong> – if begin + num_bytes
&gt; end of range + 1</p></li>
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.RangeAlreadyComplete" title="swift.common.exceptions.RangeAlreadyComplete"><strong>RangeAlreadyComplete</strong></a> – if begin + num_bytes == end of range + 1</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECFragGetter.last_headers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">last_headers</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ECFragGetter.last_headers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECFragGetter.last_status">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">last_status</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ECFragGetter.last_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECFragGetter.learn_size_from_content_range">
<span class="sig-name descname"><span class="pre">learn_size_from_content_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECFragGetter.learn_size_from_content_range" title="Permalink to this definition">¶</a></dt>
<dd><p>If client_chunk_size is set, makes sure we yield things starting on
chunk boundaries based on the Content-Range header in the response.</p>
<p>Sets our Range header’s first byterange to the value learned from
the Content-Range header in the response; if we were given a
fully-specified range (e.g. “bytes=123-456”), this is a no-op.</p>
<p>If we were given a half-specified range (e.g. “bytes=123-” or
“bytes=-456”), then this changes the Range header to a
semantically-equivalent one <em>and</em> it lets us resume on a proper
boundary instead of just in the middle of a piece somewhere.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECFragGetter.pop_range">
<span class="sig-name descname"><span class="pre">pop_range</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECFragGetter.pop_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the first byterange from our Range header.</p>
<p>This is used after a byterange has been completely sent to the
client; this way, should we need to resume the download from another
object server, we do not re-fetch byteranges that the client already
has.</p>
<p>If we have no Range header, this is a no-op.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECFragGetter.response_parts_iter">
<span class="sig-name descname"><span class="pre">response_parts_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECFragGetter.response_parts_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECFragGetter.source_and_node_iter">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">source_and_node_iter</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ECFragGetter.source_and_node_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseBucket">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">ECGetResponseBucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A helper class to encapsulate the properties of buckets in which fragment
getters and alternate nodes are collected.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseBucket.add_alternate_nodes">
<span class="sig-name descname"><span class="pre">add_alternate_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frag_indexes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.add_alternate_nodes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseBucket.add_response">
<span class="sig-name descname"><span class="pre">add_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">getter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parts_iter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.add_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Add another response to this bucket.  Response buckets can be for
fragments with the same timestamp, or for errors with the same status.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseBucket.close_conns">
<span class="sig-name descname"><span class="pre">close_conns</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.close_conns" title="Permalink to this definition">¶</a></dt>
<dd><p>Close bucket’s responses; they won’t be used for a client response.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseBucket.durable">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">durable</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.durable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseBucket.get_responses">
<span class="sig-name descname"><span class="pre">get_responses</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.get_responses" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all useful sources. Where there are multiple sources
associated with the same frag_index then only one is included.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of sources, each source being a tuple of form
(ECFragGetter, iter)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseBucket.set_durable">
<span class="sig-name descname"><span class="pre">set_durable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.set_durable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseBucket.shortfall">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shortfall</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.shortfall" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of additional responses needed to complete this bucket;
typically (ndata - resp_count).</p>
<p>If the bucket has no durable responses, shortfall is extended out to
replica count to ensure the proxy makes additional primary requests.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseBucket.shortfall_with_alts">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shortfall_with_alts</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.shortfall_with_alts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">ECGetResponseCollection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages all successful EC GET responses gathered by ECFragGetters.</p>
<p>A response comprises a tuple of (&lt;getter instance&gt;, &lt;parts iterator&gt;). All
responses having the same data timestamp are placed in an
ECGetResponseBucket for that timestamp. The buckets are stored in the
‘buckets’ dict which maps timestamp-&gt; bucket.</p>
<p>This class encapsulates logic for selecting the best bucket from the
collection, and for choosing alternate nodes.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.add_bad_resp">
<span class="sig-name descname"><span class="pre">add_bad_resp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parts_iter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.add_bad_resp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.add_good_response">
<span class="sig-name descname"><span class="pre">add_good_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parts_iter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.add_good_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.add_response">
<span class="sig-name descname"><span class="pre">add_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parts_iter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.add_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a response to the collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get</strong> – An instance of
<a class="reference internal" href="#swift.proxy.controllers.obj.ECFragGetter" title="swift.proxy.controllers.obj.ECFragGetter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ECFragGetter</span></code></a></p></li>
<li><p><strong>parts_iter</strong> – An iterator over response body parts</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if the response etag or status code values do not
match any values previously received for the same timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.best_bucket">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">best_bucket</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.best_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the “best” bucket in the collection.</p>
<p>The “best” bucket is the newest timestamp with sufficient getters, or
the closest to having sufficient getters, unless it is bettered by a
bucket with potential alternate nodes.</p>
<p>If there are no good buckets we return the “least_bad” bucket.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An instance of <a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket" title="swift.proxy.controllers.obj.ECGetResponseBucket"><code class="xref py py-class docutils literal notranslate"><span class="pre">ECGetResponseBucket</span></code></a> or None if there
are no buckets in the collection.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.choose_best_bucket">
<span class="sig-name descname"><span class="pre">choose_best_bucket</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.choose_best_bucket" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.durable">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">durable</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.durable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.get_extra_headers">
<span class="sig-name descname"><span class="pre">get_extra_headers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.get_extra_headers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.has_alternate_node">
<span class="sig-name descname"><span class="pre">has_alternate_node</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.has_alternate_node" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.least_bad_bucket">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">least_bad_bucket</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.least_bad_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the bad_bucket with the smallest shortfall</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.provide_alternate_node">
<span class="sig-name descname"><span class="pre">provide_alternate_node</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.provide_alternate_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback function that is installed in a NodeIter. Called on every call
to NodeIter.next(), which means we can track the number of nodes to
which GET requests have been made and selectively inject an alternate
node, if we have one.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dict describing a node to which the next GET request
should be made.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECGetResponseCollection.shortfall">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shortfall</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.shortfall" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECObjectController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">ECObjectController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECObjectController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController" title="swift.proxy.controllers.obj.BaseObjectController"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseObjectController</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECObjectController.feed_remaining_primaries">
<span class="sig-name descname"><span class="pre">feed_remaining_primaries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">safe_iter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buckets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feeder_q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger_thread_locals</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECObjectController.feed_remaining_primaries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ECObjectController.policy_type">
<span class="sig-name descname"><span class="pre">policy_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'erasure_coding'</span></em><a class="headerlink" href="#swift.proxy.controllers.obj.ECObjectController.policy_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.MIMEPutter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">MIMEPutter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_duration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watchdog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">send_exception_handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mime_boundary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiphase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.MIMEPutter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.obj.Putter" title="swift.proxy.controllers.obj.Putter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Putter</span></code></a></p>
<p>Putter for backend PUT requests that use MIME.</p>
<p>This is here mostly to wrap up the fact that all multipart PUTs are
chunked because of the mime boundary footer trick and the first
half of the two-phase PUT conversation handling.</p>
<p>An HTTP PUT request that supports streaming.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.MIMEPutter.connect">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watchdog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">send_exception_handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">need_multiphase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.MIMEPutter.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a backend node and send the headers.</p>
<p>Override superclass method to notify object of need for support for
multipart body with footers and optionally multiphase commit, and
verify object server’s capabilities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>need_multiphase</strong> – if True then multiphase support is required of
the object server</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.FooterNotSupported" title="swift.common.exceptions.FooterNotSupported"><strong>FooterNotSupported</strong></a> – if need_metadata_footer is set but
backend node can’t process footers</p></li>
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.MultiphasePUTNotSupported" title="swift.common.exceptions.MultiphasePUTNotSupported"><strong>MultiphasePUTNotSupported</strong></a> – if need_multiphase is set but
backend node can’t handle multiphase PUT</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.MIMEPutter.end_of_object_data">
<span class="sig-name descname"><span class="pre">end_of_object_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">footer_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.MIMEPutter.end_of_object_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Call when there is no more data to send.</p>
<p>Overrides superclass implementation to send any footer metadata
after object data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>footer_metadata</strong> – dictionary of metadata items
to be sent as footers.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.MIMEPutter.send_commit_confirmation">
<span class="sig-name descname"><span class="pre">send_commit_confirmation</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.MIMEPutter.send_commit_confirmation" title="Permalink to this definition">¶</a></dt>
<dd><p>Call when there are &gt; quorum 2XX responses received.  Send commit
confirmations to all object nodes to finalize the PUT.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ObjectControllerRouter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">ObjectControllerRouter</span></span><a class="headerlink" href="#swift.proxy.controllers.obj.ObjectControllerRouter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ObjectControllerRouter.policy_type_to_controller_map">
<span class="sig-name descname"><span class="pre">policy_type_to_controller_map</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'erasure_coding':</span> <span class="pre">&lt;class</span> <span class="pre">'swift.proxy.controllers.obj.ECObjectController'&gt;,</span> <span class="pre">'replication':</span> <span class="pre">&lt;class</span> <span class="pre">'swift.proxy.controllers.obj.ReplicatedObjectController'&gt;}</span></em><a class="headerlink" href="#swift.proxy.controllers.obj.ObjectControllerRouter.policy_type_to_controller_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ObjectControllerRouter.register">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ObjectControllerRouter.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for Storage Policy implementations to register
their ObjectController implementations.</p>
<p>This also fills in a policy_type attribute on the class.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.Putter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">Putter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_duration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watchdog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">send_exception_handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunked</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Putter for backend PUT requests.</p>
<p>Encapsulates all the actions required to establish a connection with a
storage node and stream data to that node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> – an HTTPConnection instance</p></li>
<li><p><strong>node</strong> – dict describing storage node</p></li>
<li><p><strong>resp</strong> – an HTTPResponse instance if connect() received final response</p></li>
<li><p><strong>path</strong> – the object path to send to the storage node</p></li>
<li><p><strong>connect_duration</strong> – time taken to initiate the HTTPConnection</p></li>
<li><p><strong>watchdog</strong> – a spawned Watchdog instance that will enforce timeouts</p></li>
<li><p><strong>write_timeout</strong> – time limit to write a chunk to the connection socket</p></li>
<li><p><strong>send_exception_handler</strong> – callback called when an exception occured
writing to the connection socket</p></li>
<li><p><strong>logger</strong> – a Logger instance</p></li>
<li><p><strong>chunked</strong> – boolean indicating if the request encoding is chunked</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.Putter.await_response">
<span class="sig-name descname"><span class="pre">await_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">informational</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.await_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Get 100-continue response indicating the end of 1st phase of a 2-phase
commit or the final response, i.e. the one with status &gt;= 200.</p>
<p>Might or might not actually wait for anything. If we said Expect:
100-continue but got back a non-100 response, that’ll be the thing
returned, and we won’t do any network IO to get it. OTOH, if we got
a 100 Continue response and sent up the PUT request’s body, then
we’ll actually read the 2xx-5xx response off the network here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> – time to wait for a response</p></li>
<li><p><strong>informational</strong> – if True then try to get a 100-continue response,
otherwise try to get a final response.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>HTTPResponse</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Timeout</strong> – if the response took too long</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.Putter.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.Putter.connect">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watchdog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conn_timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">send_exception_handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunked</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a backend node and send the headers.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Putter instance</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.ConnectionTimeout" title="swift.common.exceptions.ConnectionTimeout"><strong>ConnectionTimeout</strong></a> – if initial connection timed out</p></li>
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.ResponseTimeout" title="swift.common.exceptions.ResponseTimeout"><strong>ResponseTimeout</strong></a> – if header retrieval timed out</p></li>
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.InsufficientStorage" title="swift.common.exceptions.InsufficientStorage"><strong>InsufficientStorage</strong></a> – on 507 response from node</p></li>
<li><p><a class="reference internal" href="misc.html#swift.common.exceptions.PutterConnectError" title="swift.common.exceptions.PutterConnectError"><strong>PutterConnectError</strong></a> – on non-507 server error response from node</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.Putter.end_of_object_data">
<span class="sig-name descname"><span class="pre">end_of_object_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.end_of_object_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Call when there is no more data to send.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.Putter.send_chunk">
<span class="sig-name descname"><span class="pre">send_chunk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.send_chunk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ReplicatedObjectController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">ReplicatedObjectController</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ReplicatedObjectController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController" title="swift.proxy.controllers.obj.BaseObjectController"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseObjectController</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.ReplicatedObjectController.policy_type">
<span class="sig-name descname"><span class="pre">policy_type</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'replication'</span></em><a class="headerlink" href="#swift.proxy.controllers.obj.ReplicatedObjectController.policy_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.check_content_type">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">check_content_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.check_content_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.chunk_transformer">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">chunk_transformer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.chunk_transformer" title="Permalink to this definition">¶</a></dt>
<dd><p>A generator to transform a source chunk to erasure coded chunks for each
<cite>send</cite> call. The number of erasure coded chunks is as
policy.ec_n_unique_fragments.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.client_range_to_segment_range">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">client_range_to_segment_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client_start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segment_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.client_range_to_segment_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a byterange from the client and converts it into a byterange
spanning the necessary segments.</p>
<p>Handles prefix, suffix, and fully-specified byte ranges.</p>
<dl class="simple">
<dt>Examples:</dt><dd><p>client_range_to_segment_range(100, 700, 512) = (0, 1023)
client_range_to_segment_range(100, 700, 256) = (0, 767)
client_range_to_segment_range(300, None, 256) = (256, None)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_start</strong> – first byte of the range requested by the client</p></li>
<li><p><strong>client_end</strong> – last byte of the range requested by the client</p></li>
<li><p><strong>segment_size</strong> – size of an EC segment, in bytes</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>a 2-tuple (seg_start, seg_end) where</p>
<ul class="simple">
<li><p>seg_start is the first byte of the first segment, or None if this is
a suffix byte range</p></li>
<li><p>seg_end is the last byte of the last segment, or None if this is a
prefix byte range</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.is_good_source">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">is_good_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.is_good_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether or not the request made to the backend found
what it was looking for.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>status</strong> – the response from the backend</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if found, False if not</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.num_container_updates">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">num_container_updates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">container_replicas</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container_quorum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_replicas</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_quorum</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.num_container_updates" title="Permalink to this definition">¶</a></dt>
<dd><p>We need to send container updates via enough object servers such
that, if the object PUT succeeds, then the container update is
durable (either it’s synchronously updated or written to async
pendings).</p>
<dl class="simple">
<dt>Define:</dt><dd><p>Qc = the quorum size for the container ring
Qo = the quorum size for the object ring
Rc = the replica count for the container ring
Ro = the replica count (or EC N+K) for the object ring</p>
</dd>
</dl>
<p>A durable container update is one that’s made it to at least Qc
nodes. To always be durable, we have to send enough container
updates so that, if only Qo object PUTs succeed, and all the
failed object PUTs had container updates, at least Qc updates
remain. Since (Ro - Qo) object PUTs may fail, we must have at
least Qc + Ro - Qo container updates to ensure that Qc of them
remain.</p>
<p>Also, each container replica is named in at least one object PUT
request so that, when all requests succeed, no work is generated
for the container replicator. Thus, at least Rc updates are
necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>container_replicas</strong> – replica count for the container ring (Rc)</p></li>
<li><p><strong>container_quorum</strong> – quorum size for the container ring (Qc)</p></li>
<li><p><strong>object_replicas</strong> – replica count for the object ring (Ro)</p></li>
<li><p><strong>object_quorum</strong> – quorum size for the object ring (Qo)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.segment_range_to_fragment_range">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">segment_range_to_fragment_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">segment_start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segment_end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segment_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.segment_range_to_fragment_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a byterange spanning some segments and converts that into a
byterange spanning the corresponding fragments within their fragment
archives.</p>
<p>Handles prefix, suffix, and fully-specified byte ranges.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>segment_start</strong> – first byte of the first segment</p></li>
<li><p><strong>segment_end</strong> – last byte of the last segment</p></li>
<li><p><strong>segment_size</strong> – size of an EC segment, in bytes</p></li>
<li><p><strong>fragment_size</strong> – size of an EC fragment, in bytes</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>a 2-tuple (frag_start, frag_end) where</p>
<ul class="simple">
<li><p>frag_start is the first byte of the first fragment, or None if this
is a suffix byte range</p></li>
<li><p>frag_end is the last byte of the last fragment, or None if this is a
prefix byte range</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.controllers.obj.trailing_metadata">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.controllers.obj.</span></span><span class="sig-name descname"><span class="pre">trailing_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_obj_hasher</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes_transferred_from_client</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fragment_archive_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.trailing_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>
<section id="module-swift.proxy.server">
<span id="id3"></span><span id="proxy-server"></span><h2>Proxy Server<a class="headerlink" href="#module-swift.proxy.server" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.server.Application">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.server.</span></span><span class="sig-name descname"><span class="pre">Application</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account_ring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">container_ring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>WSGI application for the proxy server.</p>
<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.check_config">
<span class="sig-name descname"><span class="pre">check_config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.check_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the configuration for possible errors</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.check_response">
<span class="sig-name descname"><span class="pre">check_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.check_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Check response for error status codes and update error limiters as
required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – a dict describing a node</p></li>
<li><p><strong>server_type</strong> – the type of server from which the response was
received (e.g. ‘Object’).</p></li>
<li><p><strong>response</strong> – an instance of HTTPResponse.</p></li>
<li><p><strong>method</strong> – the request method.</p></li>
<li><p><strong>path</strong> – the request path.</p></li>
<li><p><strong>body</strong> – an optional response body. If given, up to 1024 of the
start of the body will be included in any log message.</p></li>
</ul>
</dd>
<dt class="field-even">Return True<span class="colon">:</span></dt>
<dd class="field-even"><p>if the response status code is less than 500, False
otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.error_limit">
<span class="sig-name descname"><span class="pre">error_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.error_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark a node as error limited. This immediately pretends the
node received enough errors to trigger error suppression. Use
this for errors like Insufficient Storage. For other errors
use <code class="xref py py-func docutils literal notranslate"><span class="pre">increment()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – dictionary of node to error limit</p></li>
<li><p><strong>msg</strong> – error message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.error_limited">
<span class="sig-name descname"><span class="pre">error_limited</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.error_limited" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the node is currently error limited.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>node</strong> – dictionary of node to check</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if error limited, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.error_occurred">
<span class="sig-name descname"><span class="pre">error_occurred</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.error_occurred" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle logging, and handling of errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – dictionary of node to handle errors for</p></li>
<li><p><strong>msg</strong> – error message</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.exception_occurred">
<span class="sig-name descname"><span class="pre">exception_occurred</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">typ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_info</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.exception_occurred" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle logging of generic exceptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – dictionary of node to log the error for</p></li>
<li><p><strong>typ</strong> – server type</p></li>
<li><p><strong>additional_info</strong> – additional information to log</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.get_controller">
<span class="sig-name descname"><span class="pre">get_controller</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.get_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the controller to handle a request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>req</strong> – the request</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple of (controller class, path dictionary)</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – (thrown by split_path) if given invalid path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.get_object_ring">
<span class="sig-name descname"><span class="pre">get_object_ring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.get_object_ring" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ring object to use to handle a request based on its policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>policy_idx</strong> – policy index as defined in swift.conf</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>appropriate ring object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.get_policy_options">
<span class="sig-name descname"><span class="pre">get_policy_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.get_policy_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Return policy specific options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>policy</strong> – an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStoragePolicy</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an instance of <a class="reference internal" href="#swift.proxy.server.ProxyOverrideOptions" title="swift.proxy.server.ProxyOverrideOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProxyOverrideOptions</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.handle_request">
<span class="sig-name descname"><span class="pre">handle_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.handle_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Entry point for proxy server.
Should return a WSGI-style callable (such as swob.Response).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>req</strong> – swob.Request object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.iter_nodes">
<span class="sig-name descname"><span class="pre">iter_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.iter_nodes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.modify_wsgi_pipeline">
<span class="sig-name descname"><span class="pre">modify_wsgi_pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pipe</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.modify_wsgi_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Called during WSGI pipeline creation. Modifies the WSGI pipeline
context to ensure that mandatory middleware is present in the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pipe</strong> – A PipelineWrapper object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.set_node_timing">
<span class="sig-name descname"><span class="pre">set_node_timing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timing</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.set_node_timing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.sort_nodes">
<span class="sig-name descname"><span class="pre">sort_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.sort_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts nodes in-place (and returns the sorted list) according to
the configured strategy. The default “sorting” is to randomly
shuffle the nodes. If the “timing” strategy is chosen, the nodes
are sorted according to the stored timing data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> – a list of nodes</p></li>
<li><p><strong>policy</strong> – an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStoragePolicy</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="swift.proxy.server.Application.update_request">
<span class="sig-name descname"><span class="pre">update_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">req</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.update_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="swift.proxy.server.ProxyOverrideOptions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">swift.proxy.server.</span></span><span class="sig-name descname"><span class="pre">ProxyOverrideOptions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override_conf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.ProxyOverrideOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Encapsulates proxy server options that may be overridden e.g. for
policy specific configurations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conf</strong> – the proxy-server config dict.</p></li>
<li><p><strong>override_conf</strong> – a dict of overriding configuration options.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.server.app_factory">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.server.</span></span><span class="sig-name descname"><span class="pre">app_factory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">global_conf</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">local_conf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.app_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>paste.deploy app factory for creating WSGI proxy apps.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="swift.proxy.server.parse_per_policy_config">
<span class="sig-prename descclassname"><span class="pre">swift.proxy.server.</span></span><span class="sig-name descname"><span class="pre">parse_per_policy_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.parse_per_policy_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Search the config file for any per-policy config sections and load those
sections to a dict mapping policy reference (name or index) to policy
options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conf</strong> – the proxy server conf dict</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict mapping policy reference -&gt; dict of policy options</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if a policy config section has an invalid name</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="ring.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Partitioned Consistent Hash Ring"></i></a>
          
          
            <a href="account.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Account"></i></a>
          
          <a id="pdfLink2" href="" target="_blank" title="Download the manuals as PDF"><i class="fa fa-file-pdf-o" data-toggle="tooltip" data-placement="top" title="Download PDF"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">this page last updated: 2014-02-21 10:59:29</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="https://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the
                 document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="OpenStack Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/id/">Bahasa Indonesia (Indonesian)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/it/">Italiano (Italian)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/tr_TR/">Türkçe (Türkiye)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="https://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Swift 0.1.0.dev10162</h4></a>
      <ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/object_api_v1_overview.html">Object Storage API overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_architecture.html">Swift Architectural Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_ring.html">The Rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_policies.html">Storage Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_reaper.html">The Account Reaper</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_auth.html">The Auth System</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_acl.html">Access Control Lists (ACLs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_replication.html">Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="ratelimit.html">Rate Limiting</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_large_objects.html">Large Object Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_global_cluster.html">Global Clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_container_sync.html">Container to Container Synchronization</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_expiring_objects.html">Expiring Object Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="cors.html">CORS</a></li>
<li class="toctree-l1"><a class="reference internal" href="crossdomain.html">Cross-domain Policy File</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_erasure_code.html">Erasure Code Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_encryption.html">Object Encryption</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_backing_store.html">Using Swift as Backing Store for Service Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview_container_sharding.html">Container Sharding</a></li>
<li class="toctree-l1"><a class="reference internal" href="ring_background.html">Building a Consistent Hashing Ring</a></li>
<li class="toctree-l1"><a class="reference internal" href="ring_partpower.html">Modifying Ring Partition Power</a></li>
<li class="toctree-l1"><a class="reference internal" href="associated_projects.html">Associated Projects</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html">Contributing to OpenStack Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#swift-design-principles">Swift Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#recommended-workflow">Recommended workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#notes-on-testing">Notes on Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#ideas">Ideas</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/contributing.html#community">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributor/review_guidelines.html">Review Guidelines</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="development_guidelines.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_saio.html">SAIO (Swift All In One)</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_contribution_swift.html">First Contribution to Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="policies_saio.html">Adding Storage Policies to an Existing SAIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_auth.html">Auth Server and Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_middleware.html">Middleware and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_ondisk_backends.html">Pluggable On-Disk Back-end APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_watchers.html">Auditor Watchers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="deployment_guide.html">Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="apache_deployment_guide.html">Apache Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin_guide.html">Administrator’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="replication_network.html">Dedicated replication network</a></li>
<li class="toctree-l1"><a class="reference internal" href="logs.html">Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ops_runbook/index.html">Swift Ops Runbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin/index.html">OpenStack Swift Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="install/index.html">Object Storage Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="config/index.html">Configuration Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/object_api_v1_overview.html">Object Storage API overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/discoverability.html">Discoverability</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/container_quotas.html">Container quotas</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/object_versioning.html">Object versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/large_objects.html">Large objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/temporary_url_middleware.html">Temporary URL middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/form_post_middleware.html">Form POST middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/use_content-encoding_metadata.html">Use Content-Encoding metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/use_the_content-disposition_metadata.html">Use the Content-Disposition metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/pseudo-hierarchical-folders-directories.html">Pseudo-hierarchical folders and directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/pagination.html">Page through large lists of containers or objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/serialized-response-formats.html">Serialized response formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/static-website.html">Create static website</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/object-expiration.html">Object expiration</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/bulk-delete.html">Bulk delete</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="s3_compat.html">S3/Swift REST API Comparison Matrix</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ring.html">Partitioned Consistent Hash Ring</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Proxy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#proxy-controllers">Proxy Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-swift.proxy.server">Proxy Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="account.html">Account</a></li>
<li class="toctree-l1"><a class="reference internal" href="container.html">Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="db.html">Account DB and Container DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="object.html">Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="audit_watchers.html">Object Audit Watchers</a></li>
</ul>

    </div>

  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="local-table-of-contents">
      <h4 class="docs-sidebar-section-title">Page Contents</h4>
      <ul>
<li><a class="reference internal" href="#">Proxy</a><ul>
<li><a class="reference internal" href="#proxy-controllers">Proxy Controllers</a><ul>
<li><a class="reference internal" href="#module-swift.proxy.controllers.base">Base</a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.base.ByteCountEnforcer"><code class="docutils literal notranslate"><span class="pre">ByteCountEnforcer</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.base.ByteCountEnforcer.read"><code class="docutils literal notranslate"><span class="pre">ByteCountEnforcer.read()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller"><code class="docutils literal notranslate"><span class="pre">Controller</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.GET"><code class="docutils literal notranslate"><span class="pre">Controller.GET()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.GETorHEAD_base"><code class="docutils literal notranslate"><span class="pre">Controller.GETorHEAD_base()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.HEAD"><code class="docutils literal notranslate"><span class="pre">Controller.HEAD()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.OPTIONS"><code class="docutils literal notranslate"><span class="pre">Controller.OPTIONS()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.account_info"><code class="docutils literal notranslate"><span class="pre">Controller.account_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.allowed_methods"><code class="docutils literal notranslate"><span class="pre">Controller.allowed_methods</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.autocreate_account"><code class="docutils literal notranslate"><span class="pre">Controller.autocreate_account()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.best_response"><code class="docutils literal notranslate"><span class="pre">Controller.best_response()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.container_info"><code class="docutils literal notranslate"><span class="pre">Controller.container_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.generate_request_headers"><code class="docutils literal notranslate"><span class="pre">Controller.generate_request_headers()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.get_name_length_limit"><code class="docutils literal notranslate"><span class="pre">Controller.get_name_length_limit()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.have_quorum"><code class="docutils literal notranslate"><span class="pre">Controller.have_quorum()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.is_origin_allowed"><code class="docutils literal notranslate"><span class="pre">Controller.is_origin_allowed()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.make_requests"><code class="docutils literal notranslate"><span class="pre">Controller.make_requests()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.pass_through_headers"><code class="docutils literal notranslate"><span class="pre">Controller.pass_through_headers</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.private_methods"><code class="docutils literal notranslate"><span class="pre">Controller.private_methods</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.server_type"><code class="docutils literal notranslate"><span class="pre">Controller.server_type</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.Controller.transfer_headers"><code class="docutils literal notranslate"><span class="pre">Controller.transfer_headers()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.GetOrHeadHandler"><code class="docutils literal notranslate"><span class="pre">GetOrHeadHandler</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.base.GetOrHeadHandler.fast_forward"><code class="docutils literal notranslate"><span class="pre">GetOrHeadHandler.fast_forward()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.GetOrHeadHandler.get_working_response"><code class="docutils literal notranslate"><span class="pre">GetOrHeadHandler.get_working_response()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.GetOrHeadHandler.is_good_source"><code class="docutils literal notranslate"><span class="pre">GetOrHeadHandler.is_good_source()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.GetOrHeadHandler.last_headers"><code class="docutils literal notranslate"><span class="pre">GetOrHeadHandler.last_headers</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.GetOrHeadHandler.last_status"><code class="docutils literal notranslate"><span class="pre">GetOrHeadHandler.last_status</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.GetOrHeadHandler.learn_size_from_content_range"><code class="docutils literal notranslate"><span class="pre">GetOrHeadHandler.learn_size_from_content_range()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.GetOrHeadHandler.pop_range"><code class="docutils literal notranslate"><span class="pre">GetOrHeadHandler.pop_range()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.NodeIter"><code class="docutils literal notranslate"><span class="pre">NodeIter</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.base.NodeIter.log_handoffs"><code class="docutils literal notranslate"><span class="pre">NodeIter.log_handoffs()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.NodeIter.next"><code class="docutils literal notranslate"><span class="pre">NodeIter.next()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.NodeIter.primaries_left"><code class="docutils literal notranslate"><span class="pre">NodeIter.primaries_left</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.NodeIter.set_node_provider"><code class="docutils literal notranslate"><span class="pre">NodeIter.set_node_provider()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.bytes_to_skip"><code class="docutils literal notranslate"><span class="pre">bytes_to_skip()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.clear_info_cache"><code class="docutils literal notranslate"><span class="pre">clear_info_cache()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.close_swift_conn"><code class="docutils literal notranslate"><span class="pre">close_swift_conn()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.cors_validation"><code class="docutils literal notranslate"><span class="pre">cors_validation()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.delay_denial"><code class="docutils literal notranslate"><span class="pre">delay_denial()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.get_account_info"><code class="docutils literal notranslate"><span class="pre">get_account_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.get_cache_key"><code class="docutils literal notranslate"><span class="pre">get_cache_key()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.get_container_info"><code class="docutils literal notranslate"><span class="pre">get_container_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.get_info"><code class="docutils literal notranslate"><span class="pre">get_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.get_object_info"><code class="docutils literal notranslate"><span class="pre">get_object_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.headers_from_container_info"><code class="docutils literal notranslate"><span class="pre">headers_from_container_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.headers_to_account_info"><code class="docutils literal notranslate"><span class="pre">headers_to_account_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.headers_to_container_info"><code class="docutils literal notranslate"><span class="pre">headers_to_container_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.headers_to_object_info"><code class="docutils literal notranslate"><span class="pre">headers_to_object_info()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.record_cache_op_metrics"><code class="docutils literal notranslate"><span class="pre">record_cache_op_metrics()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.set_info_cache"><code class="docutils literal notranslate"><span class="pre">set_info_cache()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.set_object_info_cache"><code class="docutils literal notranslate"><span class="pre">set_object_info_cache()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.source_key"><code class="docutils literal notranslate"><span class="pre">source_key()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.base.update_headers"><code class="docutils literal notranslate"><span class="pre">update_headers()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.proxy.controllers.account">Account</a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.account.AccountController"><code class="docutils literal notranslate"><span class="pre">AccountController</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.account.AccountController.DELETE"><code class="docutils literal notranslate"><span class="pre">AccountController.DELETE()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.account.AccountController.GETorHEAD"><code class="docutils literal notranslate"><span class="pre">AccountController.GETorHEAD()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.account.AccountController.POST"><code class="docutils literal notranslate"><span class="pre">AccountController.POST()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.account.AccountController.PUT"><code class="docutils literal notranslate"><span class="pre">AccountController.PUT()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.account.AccountController.add_acls_from_sys_metadata"><code class="docutils literal notranslate"><span class="pre">AccountController.add_acls_from_sys_metadata()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.account.AccountController.server_type"><code class="docutils literal notranslate"><span class="pre">AccountController.server_type</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.proxy.controllers.container">Container</a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController"><code class="docutils literal notranslate"><span class="pre">ContainerController</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController.DELETE"><code class="docutils literal notranslate"><span class="pre">ContainerController.DELETE()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController.GET"><code class="docutils literal notranslate"><span class="pre">ContainerController.GET()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController.GETorHEAD"><code class="docutils literal notranslate"><span class="pre">ContainerController.GETorHEAD()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController.HEAD"><code class="docutils literal notranslate"><span class="pre">ContainerController.HEAD()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController.POST"><code class="docutils literal notranslate"><span class="pre">ContainerController.POST()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController.PUT"><code class="docutils literal notranslate"><span class="pre">ContainerController.PUT()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController.UPDATE"><code class="docutils literal notranslate"><span class="pre">ContainerController.UPDATE()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController.clean_acls"><code class="docutils literal notranslate"><span class="pre">ContainerController.clean_acls()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController.pass_through_headers"><code class="docutils literal notranslate"><span class="pre">ContainerController.pass_through_headers</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.container.ContainerController.server_type"><code class="docutils literal notranslate"><span class="pre">ContainerController.server_type</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.proxy.controllers.obj">Object</a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController"><code class="docutils literal notranslate"><span class="pre">BaseObjectController</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController.DELETE"><code class="docutils literal notranslate"><span class="pre">BaseObjectController.DELETE()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController.GET"><code class="docutils literal notranslate"><span class="pre">BaseObjectController.GET()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController.GETorHEAD"><code class="docutils literal notranslate"><span class="pre">BaseObjectController.GETorHEAD()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController.HEAD"><code class="docutils literal notranslate"><span class="pre">BaseObjectController.HEAD()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController.POST"><code class="docutils literal notranslate"><span class="pre">BaseObjectController.POST()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController.PUT"><code class="docutils literal notranslate"><span class="pre">BaseObjectController.PUT()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController.iter_nodes_local_first"><code class="docutils literal notranslate"><span class="pre">BaseObjectController.iter_nodes_local_first()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController.server_type"><code class="docutils literal notranslate"><span class="pre">BaseObjectController.server_type</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECAppIter"><code class="docutils literal notranslate"><span class="pre">ECAppIter</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECAppIter.app_iter_range"><code class="docutils literal notranslate"><span class="pre">ECAppIter.app_iter_range()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECAppIter.app_iter_ranges"><code class="docutils literal notranslate"><span class="pre">ECAppIter.app_iter_ranges()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECAppIter.close"><code class="docutils literal notranslate"><span class="pre">ECAppIter.close()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECAppIter.kickoff"><code class="docutils literal notranslate"><span class="pre">ECAppIter.kickoff()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECAppIter.next"><code class="docutils literal notranslate"><span class="pre">ECAppIter.next()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECFragGetter"><code class="docutils literal notranslate"><span class="pre">ECFragGetter</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECFragGetter.fast_forward"><code class="docutils literal notranslate"><span class="pre">ECFragGetter.fast_forward()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECFragGetter.last_headers"><code class="docutils literal notranslate"><span class="pre">ECFragGetter.last_headers</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECFragGetter.last_status"><code class="docutils literal notranslate"><span class="pre">ECFragGetter.last_status</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECFragGetter.learn_size_from_content_range"><code class="docutils literal notranslate"><span class="pre">ECFragGetter.learn_size_from_content_range()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECFragGetter.pop_range"><code class="docutils literal notranslate"><span class="pre">ECFragGetter.pop_range()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECFragGetter.response_parts_iter"><code class="docutils literal notranslate"><span class="pre">ECFragGetter.response_parts_iter()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECFragGetter.source_and_node_iter"><code class="docutils literal notranslate"><span class="pre">ECFragGetter.source_and_node_iter</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket"><code class="docutils literal notranslate"><span class="pre">ECGetResponseBucket</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket.add_alternate_nodes"><code class="docutils literal notranslate"><span class="pre">ECGetResponseBucket.add_alternate_nodes()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket.add_response"><code class="docutils literal notranslate"><span class="pre">ECGetResponseBucket.add_response()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket.close_conns"><code class="docutils literal notranslate"><span class="pre">ECGetResponseBucket.close_conns()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket.durable"><code class="docutils literal notranslate"><span class="pre">ECGetResponseBucket.durable</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket.get_responses"><code class="docutils literal notranslate"><span class="pre">ECGetResponseBucket.get_responses()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket.set_durable"><code class="docutils literal notranslate"><span class="pre">ECGetResponseBucket.set_durable()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket.shortfall"><code class="docutils literal notranslate"><span class="pre">ECGetResponseBucket.shortfall</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket.shortfall_with_alts"><code class="docutils literal notranslate"><span class="pre">ECGetResponseBucket.shortfall_with_alts</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.add_bad_resp"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.add_bad_resp()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.add_good_response"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.add_good_response()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.add_response"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.add_response()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.best_bucket"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.best_bucket</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.choose_best_bucket"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.choose_best_bucket()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.durable"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.durable</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.get_extra_headers"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.get_extra_headers()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.has_alternate_node"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.has_alternate_node()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.least_bad_bucket"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.least_bad_bucket</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.provide_alternate_node"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.provide_alternate_node()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseCollection.shortfall"><code class="docutils literal notranslate"><span class="pre">ECGetResponseCollection.shortfall</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECObjectController"><code class="docutils literal notranslate"><span class="pre">ECObjectController</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECObjectController.feed_remaining_primaries"><code class="docutils literal notranslate"><span class="pre">ECObjectController.feed_remaining_primaries()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ECObjectController.policy_type"><code class="docutils literal notranslate"><span class="pre">ECObjectController.policy_type</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.MIMEPutter"><code class="docutils literal notranslate"><span class="pre">MIMEPutter</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.MIMEPutter.connect"><code class="docutils literal notranslate"><span class="pre">MIMEPutter.connect()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.MIMEPutter.end_of_object_data"><code class="docutils literal notranslate"><span class="pre">MIMEPutter.end_of_object_data()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.MIMEPutter.send_commit_confirmation"><code class="docutils literal notranslate"><span class="pre">MIMEPutter.send_commit_confirmation()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ObjectControllerRouter"><code class="docutils literal notranslate"><span class="pre">ObjectControllerRouter</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ObjectControllerRouter.policy_type_to_controller_map"><code class="docutils literal notranslate"><span class="pre">ObjectControllerRouter.policy_type_to_controller_map</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ObjectControllerRouter.register"><code class="docutils literal notranslate"><span class="pre">ObjectControllerRouter.register()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.Putter"><code class="docutils literal notranslate"><span class="pre">Putter</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.Putter.await_response"><code class="docutils literal notranslate"><span class="pre">Putter.await_response()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.Putter.close"><code class="docutils literal notranslate"><span class="pre">Putter.close()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.Putter.connect"><code class="docutils literal notranslate"><span class="pre">Putter.connect()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.Putter.end_of_object_data"><code class="docutils literal notranslate"><span class="pre">Putter.end_of_object_data()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.Putter.send_chunk"><code class="docutils literal notranslate"><span class="pre">Putter.send_chunk()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ReplicatedObjectController"><code class="docutils literal notranslate"><span class="pre">ReplicatedObjectController</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.ReplicatedObjectController.policy_type"><code class="docutils literal notranslate"><span class="pre">ReplicatedObjectController.policy_type</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.check_content_type"><code class="docutils literal notranslate"><span class="pre">check_content_type()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.chunk_transformer"><code class="docutils literal notranslate"><span class="pre">chunk_transformer()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.client_range_to_segment_range"><code class="docutils literal notranslate"><span class="pre">client_range_to_segment_range()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.is_good_source"><code class="docutils literal notranslate"><span class="pre">is_good_source()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.num_container_updates"><code class="docutils literal notranslate"><span class="pre">num_container_updates()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.segment_range_to_fragment_range"><code class="docutils literal notranslate"><span class="pre">segment_range_to_fragment_range()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.controllers.obj.trailing_metadata"><code class="docutils literal notranslate"><span class="pre">trailing_metadata()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.proxy.server">Proxy Server</a><ul>
<li><a class="reference internal" href="#swift.proxy.server.Application"><code class="docutils literal notranslate"><span class="pre">Application</span></code></a><ul>
<li><a class="reference internal" href="#swift.proxy.server.Application.check_config"><code class="docutils literal notranslate"><span class="pre">Application.check_config()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.check_response"><code class="docutils literal notranslate"><span class="pre">Application.check_response()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.error_limit"><code class="docutils literal notranslate"><span class="pre">Application.error_limit()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.error_limited"><code class="docutils literal notranslate"><span class="pre">Application.error_limited()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.error_occurred"><code class="docutils literal notranslate"><span class="pre">Application.error_occurred()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.exception_occurred"><code class="docutils literal notranslate"><span class="pre">Application.exception_occurred()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.get_controller"><code class="docutils literal notranslate"><span class="pre">Application.get_controller()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.get_object_ring"><code class="docutils literal notranslate"><span class="pre">Application.get_object_ring()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.get_policy_options"><code class="docutils literal notranslate"><span class="pre">Application.get_policy_options()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.handle_request"><code class="docutils literal notranslate"><span class="pre">Application.handle_request()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.iter_nodes"><code class="docutils literal notranslate"><span class="pre">Application.iter_nodes()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.modify_wsgi_pipeline"><code class="docutils literal notranslate"><span class="pre">Application.modify_wsgi_pipeline()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.set_node_timing"><code class="docutils literal notranslate"><span class="pre">Application.set_node_timing()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.sort_nodes"><code class="docutils literal notranslate"><span class="pre">Application.sort_nodes()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.Application.update_request"><code class="docutils literal notranslate"><span class="pre">Application.update_request()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#swift.proxy.server.ProxyOverrideOptions"><code class="docutils literal notranslate"><span class="pre">ProxyOverrideOptions</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.app_factory"><code class="docutils literal notranslate"><span class="pre">app_factory()</span></code></a></li>
<li><a class="reference internal" href="#swift.proxy.server.parse_per_policy_config"><code class="docutils literal notranslate"><span class="pre">parse_per_policy_config()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
  </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="https://openstack.org/projects/">Projects</a></li>
          <li><a href="https://www.openstack.org/software/security/">OpenStack Security</a></li>
          <li><a href="https://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="https://openstack.org/blog/">Blog</a></li>g
          <li><a href="https://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="https://openstack.org/community/">User Groups</a></li>
          <li><a href="https://openstack.org/community/events/">Events</a></li>
          <li><a href="https://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="https://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="https://docs.openstack.org/contributors">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="https://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="https://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="https://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="https://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="https://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="https://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="https://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-3.2.1.min.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.min.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- standard sphinx include libraries, which allow search highlighting -->
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="_static/searchtools.js"></script>
<script type="text/javascript" src="_static/language_data.js"></script>

<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.1.0.dev10162',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      LINK_SUFFIX: '.html',
      SOURCELINK_SUFFIX: '.txt',
      HAS_SOURCE:  true
    };
</script>

<!-- Javascript for page -->
<script language="JavaScript">
  /* Build a description of this page including SHA, source location on git
   * repo, build time and the project's launchpad bug tag. Set the HREF of the
   * bug buttons
   */
    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
    /* "giturl" is the URL of the source file on Git and is auto-generated by
     * openstackdocstheme.
     *
     * "pagename" is a standard sphinx parameter containing the name of
     * the source file, without extension.
     */

    var sourceFile = "proxy" + ".rst";
    gitURL = "Source: https://opendev.org/openstack/swift/src/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: c25d961319e59efe02c05374924ba82b873992e1";
    var repositoryName = "openstack/swift";
    var bugProject = "swift";
    var bugTitle = "Proxy in Swift";
    var fieldTags = "";
    var useStoryboard = "";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.1.0.dev10162 on 2014-02-21 10:59:29";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags, repositoryName, useStoryboard);
    var currentSourceFile = "proxy";
    var pdfFileName = "doc-swift.pdf";
    pdfLink(currentSourceFile, pdfFileName);
</script>


  </body>
</html>